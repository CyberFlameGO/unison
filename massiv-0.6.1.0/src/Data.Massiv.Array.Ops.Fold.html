<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- Module      : Data.Massiv.Array.Ops.Fold</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Copyright   : (c) Alexey Kuleshevich 2018-2021</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- License     : BSD3</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Maintainer  : Alexey Kuleshevich &lt;lehins@yandex.ru&gt;</span><span>
</span><span id="line-11"></span><span class="hs-comment">-- Stability   : experimental</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- Portability : non-portable</span><span>
</span><span id="line-13"></span><span class="hs-comment">--</span><span>
</span><span id="line-14"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Massiv.Array.Ops.Fold</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">(</span><span>
</span><span id="line-16"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Unstructured folds</span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>  </span><span class="annot"><span class="hs-comment">-- $unstruct_folds</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#fold"><span class="hs-identifier">fold</span></a></span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldMono"><span class="hs-identifier">ifoldMono</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldMono"><span class="hs-identifier">foldMono</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldSemi"><span class="hs-identifier">ifoldSemi</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldSemi"><span class="hs-identifier">foldSemi</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldOuterSlice"><span class="hs-identifier">foldOuterSlice</span></a></span><span>
</span><span id="line-25"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldOuterSlice"><span class="hs-identifier">ifoldOuterSlice</span></a></span><span>
</span><span id="line-26"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInnerSlice"><span class="hs-identifier">foldInnerSlice</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldInnerSlice"><span class="hs-identifier">ifoldInnerSlice</span></a></span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimumM"><span class="hs-identifier">minimumM</span></a></span><span>
</span><span id="line-29"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimum%27"><span class="hs-identifier">minimum'</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximumM"><span class="hs-identifier">maximumM</span></a></span><span>
</span><span id="line-31"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximum%27"><span class="hs-identifier">maximum'</span></a></span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#sum"><span class="hs-identifier">sum</span></a></span><span>
</span><span id="line-33"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#product"><span class="hs-identifier">product</span></a></span><span>
</span><span id="line-34"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#and"><span class="hs-identifier">and</span></a></span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#or"><span class="hs-identifier">or</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#all"><span class="hs-identifier">all</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#any"><span class="hs-identifier">any</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#elem"><span class="hs-identifier">elem</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#eqArrays"><span class="hs-identifier">eqArrays</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#compareArrays"><span class="hs-identifier">compareArrays</span></a></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Single dimension folds</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Safe inner most</span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-comment">--</span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-comment">-- Folding along the inner most dimension will always be faster when compared to doing the same</span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-comment">-- operation along any other dimension, this is due to the fact that inner most folds follow the</span><span>
</span><span id="line-47"></span><span>  </span><span class="hs-comment">-- memory layout of data.</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlInner"><span class="hs-identifier">ifoldlInner</span></a></span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlInner"><span class="hs-identifier">foldlInner</span></a></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrInner"><span class="hs-identifier">ifoldrInner</span></a></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrInner"><span class="hs-identifier">foldrInner</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInner"><span class="hs-identifier">foldInner</span></a></span><span>
</span><span id="line-53"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Type safe within</span></span><span>
</span><span id="line-54"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin"><span class="hs-identifier">ifoldlWithin</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin"><span class="hs-identifier">foldlWithin</span></a></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin"><span class="hs-identifier">ifoldrWithin</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin"><span class="hs-identifier">foldrWithin</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin"><span class="hs-identifier">foldWithin</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Partial within</span></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier">ifoldlWithin'</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-identifier">foldlWithin'</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier">ifoldrWithin'</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin%27"><span class="hs-identifier">foldrWithin'</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin%27"><span class="hs-identifier">foldWithin'</span></a></span><span>
</span><span id="line-65"></span><span>
</span><span id="line-66"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Sequential folds</span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><span class="hs-comment">-- $seq_folds</span></span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlS"><span class="hs-identifier">foldlS</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldrS"><span class="hs-identifier">foldrS</span></a></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlS"><span class="hs-identifier">ifoldlS</span></a></span><span>
</span><span id="line-73"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldrS"><span class="hs-identifier">ifoldrS</span></a></span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Monadic</span></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlM"><span class="hs-identifier">foldlM</span></a></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldrM"><span class="hs-identifier">foldrM</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlM_"><span class="hs-identifier">foldlM_</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldrM_"><span class="hs-identifier">foldrM_</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlM"><span class="hs-identifier">ifoldlM</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldrM"><span class="hs-identifier">ifoldrM</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlM_"><span class="hs-identifier">ifoldlM_</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldrM_"><span class="hs-identifier">ifoldrM_</span></a></span><span>
</span><span id="line-84"></span><span>
</span><span id="line-85"></span><span>  </span><span class="annot"><span class="hs-comment">-- *** Special folds</span></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldrFB"><span class="hs-identifier">foldrFB</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#lazyFoldlS"><span class="hs-identifier">lazyFoldlS</span></a></span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#lazyFoldrS"><span class="hs-identifier">lazyFoldrS</span></a></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span>  </span><span class="annot"><span class="hs-comment">-- ** Parallel folds</span></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><span class="hs-comment">-- $par_folds</span></span><span>
</span><span id="line-93"></span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlP"><span class="hs-identifier">foldlP</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldrP"><span class="hs-identifier">foldrP</span></a></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlP"><span class="hs-identifier">ifoldlP</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldrP"><span class="hs-identifier">ifoldrP</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlIO"><span class="hs-identifier">ifoldlIO</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldrIO"><span class="hs-identifier">ifoldrIO</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-comment">-- , splitReduce</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html"><span class="hs-identifier">Data.Massiv.Array.Delayed.Pull</span></a></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Construct.html"><span class="hs-identifier">Data.Massiv.Array.Ops.Construct</span></a></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.Internal.html"><span class="hs-identifier">Data.Massiv.Array.Ops.Fold.Internal</span></a></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Core.html"><span class="hs-identifier">Data.Massiv.Core</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html"><span class="hs-identifier">Data.Massiv.Core.Common</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">all</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">and</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">any</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">foldl</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">foldr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">map</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">maximum</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">minimum</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">or</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">product</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">sum</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">elem</span></span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | /O(n)/ - Monoidal fold over an array with an index aware function. Also known as reduce.</span><span>
</span><span id="line-112"></span><span class="hs-comment">--</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-114"></span><span id="local-6989586621679280786"><span id="local-6989586621679280787"><span id="local-6989586621679280788"><span id="local-6989586621679280789"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldMono"><span class="hs-identifier hs-type">ifoldMono</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-115"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280789"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280788"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280787"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280786"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280788"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280787"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280786"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Convert each element of an array to an appropriate `Monoid`.</span><span>
</span><span id="line-117"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280789"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280788"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280787"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-comment">-- ^ Source array</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280786"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-119"></span><span id="ifoldMono"><span class="annot"><span class="annottext">ifoldMono :: (ix -&gt; e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldMono"><span class="hs-identifier hs-var hs-var">ifoldMono</span></a></span></span><span> </span><span id="local-6989586621679280785"><span class="annot"><span class="annottext">ix -&gt; e -&gt; m
</span><a href="#local-6989586621679280785"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(m -&gt; ix -&gt; e -&gt; m) -&gt; m -&gt; (m -&gt; m -&gt; m) -&gt; m -&gt; Array r ix e -&gt; m
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; ix -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlInternal"><span class="hs-identifier hs-var">ifoldlInternal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679280783"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280783"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679280782"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280782"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span id="local-6989586621679280781"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280781"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280783"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mappend`</span></span><span> </span><span class="annot"><span class="annottext">ix -&gt; e -&gt; m
</span><a href="#local-6989586621679280785"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280782"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280781"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">m
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-120"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldMono"><span class="hs-pragma hs-type">ifoldMono</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-121"></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span class="hs-comment">-- | /O(n)/ - Semigroup fold over an array with an index aware function.</span><span>
</span><span id="line-124"></span><span class="hs-comment">--</span><span>
</span><span id="line-125"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-126"></span><span id="local-6989586621679280777"><span id="local-6989586621679280778"><span id="local-6989586621679280779"><span id="local-6989586621679280780"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldSemi"><span class="hs-identifier hs-type">ifoldSemi</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-127"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280780"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280779"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280778"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679280777"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280779"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280778"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280777"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Convert each element of an array to an appropriate `Semigroup`.</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280777"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-comment">-- ^ Initial element that must be neutral to the (`&lt;&gt;`) function.</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280780"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280779"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280778"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-comment">-- ^ Source array</span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280777"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-132"></span><span id="ifoldSemi"><span class="annot"><span class="annottext">ifoldSemi :: (ix -&gt; e -&gt; m) -&gt; m -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldSemi"><span class="hs-identifier hs-var hs-var">ifoldSemi</span></a></span></span><span> </span><span id="local-6989586621679280776"><span class="annot"><span class="annottext">ix -&gt; e -&gt; m
</span><a href="#local-6989586621679280776"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280775"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280775"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(m -&gt; ix -&gt; e -&gt; m) -&gt; m -&gt; (m -&gt; m -&gt; m) -&gt; m -&gt; Array r ix e -&gt; m
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; ix -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#ifoldlInternal"><span class="hs-identifier hs-var">ifoldlInternal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679280774"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280774"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679280773"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280773"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span id="local-6989586621679280772"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280772"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280774"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ix -&gt; e -&gt; m
</span><a href="#local-6989586621679280776"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280773"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280772"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280775"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280775"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-133"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldSemi"><span class="hs-pragma hs-type">ifoldSemi</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="hs-comment">-- | /O(n)/ - Semigroup fold over an array.</span><span>
</span><span id="line-137"></span><span class="hs-comment">--</span><span>
</span><span id="line-138"></span><span class="hs-comment">-- @since 0.1.6</span><span>
</span><span id="line-139"></span><span id="local-6989586621679280768"><span id="local-6989586621679280769"><span id="local-6989586621679280770"><span id="local-6989586621679280771"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldSemi"><span class="hs-identifier hs-type">foldSemi</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-140"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280771"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280770"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280769"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="#local-6989586621679280768"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280769"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280768"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- ^ Convert each element of an array to an appropriate `Semigroup`.</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280768"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-comment">-- ^ Initial element that must be neutral to the (`&lt;&gt;`) function.</span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280771"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280770"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280769"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-comment">-- ^ Source array</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280768"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-145"></span><span id="foldSemi"><span class="annot"><span class="annottext">foldSemi :: (e -&gt; m) -&gt; m -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldSemi"><span class="hs-identifier hs-var hs-var">foldSemi</span></a></span></span><span> </span><span id="local-6989586621679280767"><span class="annot"><span class="annottext">e -&gt; m
</span><a href="#local-6989586621679280767"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280766"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280766"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(m -&gt; e -&gt; m) -&gt; m -&gt; (m -&gt; m -&gt; m) -&gt; m -&gt; Array r ix e -&gt; m
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlInternal"><span class="hs-identifier hs-var">foldlInternal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679280764"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280764"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679280763"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280763"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280764"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; m
</span><a href="#local-6989586621679280767"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280763"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280766"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m -&gt; m -&gt; m
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(&lt;&gt;)</span></span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621679280766"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-146"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldSemi"><span class="hs-pragma hs-type">foldSemi</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span class="hs-comment">-- | Left fold along a specified dimension with an index aware function.</span><span>
</span><span id="line-150"></span><span class="hs-comment">--</span><span>
</span><span id="line-151"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-152"></span><span id="local-6989586621679281063"><span id="local-6989586621679281064"><span id="local-6989586621679281065"><span id="local-6989586621679281067"><span id="local-6989586621679281068"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin"><span class="hs-identifier hs-type">ifoldlWithin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#IsIndexDimension"><span class="hs-identifier hs-type">IsIndexDimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281067"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281065"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281064"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dimension"><span class="hs-identifier hs-type">Dimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281067"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281063"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281064"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281063"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281063"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281065"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281064"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281068"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679281063"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-154"></span><span id="ifoldlWithin"><span class="annot"><span class="annottext">ifoldlWithin :: Dimension n
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin"><span class="hs-identifier hs-var hs-var">ifoldlWithin</span></a></span></span><span> </span><span id="local-6989586621679280762"><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280762"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier hs-var">ifoldlWithin'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dimension n -&gt; Dim
forall (n :: Nat). KnownNat n =&gt; Dimension n -&gt; Dim
</span><a href="Data.Massiv.Core.Index.html#fromDimension"><span class="hs-identifier hs-var">fromDimension</span></a></span><span> </span><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280762"><span class="hs-identifier hs-var">dim</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin"><span class="hs-pragma hs-type">ifoldlWithin</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="hs-comment">-- | Left fold along a specified dimension.</span><span>
</span><span id="line-159"></span><span class="hs-comment">--</span><span>
</span><span id="line-160"></span><span class="hs-comment">-- ====__Example__</span><span>
</span><span id="line-161"></span><span class="hs-comment">--</span><span>
</span><span id="line-162"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Massiv.Array</span><span>
</span><span id="line-163"></span><span class="hs-comment">-- &gt;&gt;&gt; :set -XTypeApplications</span><span>
</span><span id="line-164"></span><span class="hs-comment">-- &gt;&gt;&gt; arr = makeArrayLinear @U Seq (Sz (2 :. 5)) id</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- &gt;&gt;&gt; arr</span><span>
</span><span id="line-166"></span><span class="hs-comment">-- Array U Seq (Sz (2 :. 5))</span><span>
</span><span id="line-167"></span><span class="hs-comment">--   [ [ 0, 1, 2, 3, 4 ]</span><span>
</span><span id="line-168"></span><span class="hs-comment">--   , [ 5, 6, 7, 8, 9 ]</span><span>
</span><span id="line-169"></span><span class="hs-comment">--   ]</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- &gt;&gt;&gt; foldlWithin Dim1 (flip (:)) [] arr</span><span>
</span><span id="line-171"></span><span class="hs-comment">-- Array D Seq (Sz1 2)</span><span>
</span><span id="line-172"></span><span class="hs-comment">--   [ [4,3,2,1,0], [9,8,7,6,5] ]</span><span>
</span><span id="line-173"></span><span class="hs-comment">-- &gt;&gt;&gt; foldlWithin Dim2 (flip (:)) [] arr</span><span>
</span><span id="line-174"></span><span class="hs-comment">-- Array D Seq (Sz1 5)</span><span>
</span><span id="line-175"></span><span class="hs-comment">--   [ [5,0], [6,1], [7,2], [8,3], [9,4] ]</span><span>
</span><span id="line-176"></span><span class="hs-comment">--</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-178"></span><span id="local-6989586621679280962"><span id="local-6989586621679280963"><span id="local-6989586621679280964"><span id="local-6989586621679280965"><span id="local-6989586621679280966"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin"><span class="hs-identifier hs-type">foldlWithin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280966"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#IsIndexDimension"><span class="hs-identifier hs-type">IsIndexDimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280966"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280965"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280964"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280966"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280963"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dimension"><span class="hs-identifier hs-type">Dimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280965"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280962"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280963"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280962"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280962"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280964"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280966"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280963"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280966"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280962"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-180"></span><span id="foldlWithin"><span class="annot"><span class="annottext">foldlWithin :: Dimension n
-&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin"><span class="hs-identifier hs-var hs-var">foldlWithin</span></a></span></span><span> </span><span id="local-6989586621679280760"><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280760"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280759"><span class="annot"><span class="annottext">a -&gt; e -&gt; a
</span><a href="#local-6989586621679280759"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dimension n
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix (n :: Nat) r e a.
(Index (Lower ix), IsIndexDimension ix n, Source r ix e) =&gt;
Dimension n
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin"><span class="hs-identifier hs-var">ifoldlWithin</span></a></span><span> </span><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280760"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; e -&gt; a) -&gt; ix -&gt; a -&gt; e -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; e -&gt; a
</span><a href="#local-6989586621679280759"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin"><span class="hs-pragma hs-type">foldlWithin</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span>
</span><span id="line-184"></span><span class="hs-comment">-- | Right fold along a specified dimension with an index aware function.</span><span>
</span><span id="line-185"></span><span class="hs-comment">--</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-187"></span><span id="local-6989586621679281042"><span id="local-6989586621679281043"><span id="local-6989586621679281044"><span id="local-6989586621679281045"><span id="local-6989586621679281046"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin"><span class="hs-identifier hs-type">ifoldrWithin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#IsIndexDimension"><span class="hs-identifier hs-type">IsIndexDimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281045"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281044"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281043"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dimension"><span class="hs-identifier hs-type">Dimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281045"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281043"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281042"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281042"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281042"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281044"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281043"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281046"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679281042"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-189"></span><span id="ifoldrWithin"><span class="annot"><span class="annottext">ifoldrWithin :: Dimension n
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin"><span class="hs-identifier hs-var hs-var">ifoldrWithin</span></a></span></span><span> </span><span id="local-6989586621679280757"><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280757"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier hs-var">ifoldrWithin'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Dimension n -&gt; Dim
forall (n :: Nat). KnownNat n =&gt; Dimension n -&gt; Dim
</span><a href="Data.Massiv.Core.Index.html#fromDimension"><span class="hs-identifier hs-var">fromDimension</span></a></span><span> </span><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280757"><span class="hs-identifier hs-var">dim</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin"><span class="hs-pragma hs-type">ifoldrWithin</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-191"></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="hs-comment">-- | Right fold along a specified dimension.</span><span>
</span><span id="line-194"></span><span class="hs-comment">--</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-196"></span><span id="local-6989586621679280752"><span id="local-6989586621679280753"><span id="local-6989586621679280754"><span id="local-6989586621679280755"><span id="local-6989586621679280756"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin"><span class="hs-identifier hs-type">foldrWithin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280756"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#IsIndexDimension"><span class="hs-identifier hs-type">IsIndexDimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280756"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280755"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280754"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280756"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280753"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dimension"><span class="hs-identifier hs-type">Dimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280755"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280753"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280752"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280752"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280752"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280754"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280756"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280753"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280756"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280752"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span></span><span>
</span><span id="line-198"></span><span id="foldrWithin"><span class="annot"><span class="annottext">foldrWithin :: Dimension n
-&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin"><span class="hs-identifier hs-var hs-var">foldrWithin</span></a></span></span><span> </span><span id="local-6989586621679280751"><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280751"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280750"><span class="annot"><span class="annottext">e -&gt; a -&gt; a
</span><a href="#local-6989586621679280750"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dimension n
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix (n :: Nat) r e a.
(Index (Lower ix), IsIndexDimension ix n, Source r ix e) =&gt;
Dimension n
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin"><span class="hs-identifier hs-var">ifoldrWithin</span></a></span><span> </span><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280751"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(e -&gt; a -&gt; a) -&gt; ix -&gt; e -&gt; a -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; a -&gt; a
</span><a href="#local-6989586621679280750"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin"><span class="hs-pragma hs-type">foldrWithin</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-200"></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | Similar to `ifoldlWithin`, except that dimension is specified at a value level, which means it</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- will throw an exception on an invalid dimension.</span><span>
</span><span id="line-204"></span><span class="hs-comment">--</span><span>
</span><span id="line-205"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-206"></span><span id="local-6989586621679281075"><span id="local-6989586621679281076"><span id="local-6989586621679281077"><span id="local-6989586621679281079"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier hs-type">ifoldlWithin'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281079"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281077"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281079"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281076"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dim"><span class="hs-identifier hs-type">Dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281079"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281075"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281076"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281075"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281075"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281077"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281079"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281076"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281079"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679281075"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-208"></span><span id="ifoldlWithin%27"><span class="annot"><span class="annottext">ifoldlWithin' :: Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier hs-var hs-var">ifoldlWithin'</span></a></span></span><span> </span><span id="local-6989586621679280749"><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280749"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280748"><span class="annot"><span class="annottext">ix -&gt; a -&gt; e -&gt; a
</span><a href="#local-6989586621679280748"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280747"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280747"><span class="hs-identifier hs-var">acc0</span></a></span></span><span> </span><span id="local-6989586621679280746"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280746"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="annottext">Comp -&gt; Sz (Lower ix) -&gt; (Lower ix -&gt; a) -&gt; Array D (Lower ix) a
forall r ix e.
Construct r ix e =&gt;
Comp -&gt; Sz ix -&gt; (ix -&gt; e) -&gt; Array r ix e
</span><a href="Data.Massiv.Core.Common.html#makeArray"><span class="hs-identifier hs-var">makeArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Comp
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280746"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Sz (Lower ix)
forall ix. ix -&gt; Sz ix
</span><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-var">SafeSz</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280742"><span class="hs-identifier hs-var">szl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Lower ix -&gt; a) -&gt; Array D (Lower ix) a)
-&gt; (Lower ix -&gt; a) -&gt; Array D (Lower ix) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679280741"><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280741"><span class="hs-identifier hs-var">ixl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="annottext">ix -&gt; ix -&gt; ix -&gt; (Int -&gt; Int -&gt; Bool) -&gt; a -&gt; (ix -&gt; a -&gt; a) -&gt; a
forall ix a.
Index ix =&gt;
ix -&gt; ix -&gt; ix -&gt; (Int -&gt; Int -&gt; Bool) -&gt; a -&gt; (ix -&gt; a -&gt; a) -&gt; a
</span><a href="Data.Massiv.Core.Index.html#iter"><span class="hs-identifier hs-var">iter</span></a></span><span>
</span><span id="line-211"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Dim -&gt; Int -&gt; ix
forall ix. Index ix =&gt; Lower ix -&gt; Dim -&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.html#insertDim%27"><span class="hs-identifier hs-var">insertDim'</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280741"><span class="hs-identifier hs-var">ixl</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280749"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Dim -&gt; Int -&gt; ix
forall ix. Index ix =&gt; Lower ix -&gt; Dim -&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.html#insertDim%27"><span class="hs-identifier hs-var">insertDim'</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280741"><span class="hs-identifier hs-var">ixl</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280749"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280738"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-213"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ix
forall ix. Index ix =&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.Internal.html#pureIndex"><span class="hs-identifier hs-var">pureIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(&lt;=)</span></span><span>
</span><span id="line-215"></span><span>      </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280747"><span class="hs-identifier hs-var">acc0</span></a></span><span>
</span><span id="line-216"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679280735"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280735"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span id="local-6989586621679280734"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280734"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ix -&gt; a -&gt; e -&gt; a
</span><a href="#local-6989586621679280748"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280735"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280734"><span class="hs-identifier hs-var">acc'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; ix -&gt; e
forall r ix e. Source r ix e =&gt; Array r ix e -&gt; ix -&gt; e
</span><a href="Data.Massiv.Core.Common.html#unsafeIndex"><span class="hs-identifier hs-var">unsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280746"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280735"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-217"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-type">SafeSz</span></a></span><span> </span><span id="local-6989586621679280732"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280732"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280746"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679280738"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280738"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679280742"><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280742"><span class="hs-identifier hs-var">szl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ix -&gt; Dim -&gt; (Int, Lower ix)
forall ix. Index ix =&gt; ix -&gt; Dim -&gt; (Int, Lower ix)
</span><a href="Data.Massiv.Core.Index.html#pullOutDim%27"><span class="hs-identifier hs-var">pullOutDim'</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280732"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280749"><span class="hs-identifier hs-var">dim</span></a></span><span>
</span><span id="line-220"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-pragma hs-type">ifoldlWithin'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span>
</span><span id="line-223"></span><span class="hs-comment">-- | Similar to `foldlWithin`, except that dimension is specified at a value level, which means it will</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- throw an exception on an invalid dimension.</span><span>
</span><span id="line-225"></span><span class="hs-comment">--</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-227"></span><span id="local-6989586621679280990"><span id="local-6989586621679280991"><span id="local-6989586621679280992"><span id="local-6989586621679280993"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-identifier hs-type">foldlWithin'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280993"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280992"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280993"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280991"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dim"><span class="hs-identifier hs-type">Dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280990"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280991"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280990"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280990"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280992"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280993"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280991"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280993"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280990"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-229"></span><span id="foldlWithin%27"><span class="annot"><span class="annottext">foldlWithin' :: Dim -&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-identifier hs-var hs-var">foldlWithin'</span></a></span></span><span> </span><span id="local-6989586621679280729"><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280729"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280728"><span class="annot"><span class="annottext">a -&gt; e -&gt; a
</span><a href="#local-6989586621679280728"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier hs-var">ifoldlWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280729"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; e -&gt; a) -&gt; ix -&gt; a -&gt; e -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; e -&gt; a
</span><a href="#local-6989586621679280728"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-pragma hs-type">foldlWithin'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Similar to `ifoldrWithin`, except that dimension is specified at a value level, which means it</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- will throw an exception on an invalid dimension.</span><span>
</span><span id="line-235"></span><span class="hs-comment">--</span><span>
</span><span id="line-236"></span><span class="hs-comment">--</span><span>
</span><span id="line-237"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-238"></span><span id="local-6989586621679281052"><span id="local-6989586621679281053"><span id="local-6989586621679281054"><span id="local-6989586621679281055"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier hs-type">ifoldrWithin'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281055"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281054"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281055"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281053"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-239"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dim"><span class="hs-identifier hs-type">Dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679281055"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281053"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281052"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281052"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679281052"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281054"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281055"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281053"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679281055"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679281052"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-240"></span><span id="ifoldrWithin%27"><span class="annot"><span class="annottext">ifoldrWithin' :: Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier hs-var hs-var">ifoldrWithin'</span></a></span></span><span> </span><span id="local-6989586621679280727"><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280727"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280726"><span class="annot"><span class="annottext">ix -&gt; e -&gt; a -&gt; a
</span><a href="#local-6989586621679280726"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280725"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280725"><span class="hs-identifier hs-var">acc0</span></a></span></span><span> </span><span id="local-6989586621679280724"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280724"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-241"></span><span>  </span><span class="annot"><span class="annottext">Comp -&gt; Sz (Lower ix) -&gt; (Lower ix -&gt; a) -&gt; Array D (Lower ix) a
forall r ix e.
Construct r ix e =&gt;
Comp -&gt; Sz ix -&gt; (ix -&gt; e) -&gt; Array r ix e
</span><a href="Data.Massiv.Core.Common.html#makeArray"><span class="hs-identifier hs-var">makeArray</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Comp
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280724"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Sz (Lower ix)
forall ix. ix -&gt; Sz ix
</span><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-var">SafeSz</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280723"><span class="hs-identifier hs-var">szl</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((Lower ix -&gt; a) -&gt; Array D (Lower ix) a)
-&gt; (Lower ix -&gt; a) -&gt; Array D (Lower ix) a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679280722"><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280722"><span class="hs-identifier hs-var">ixl</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><span class="annottext">ix -&gt; ix -&gt; ix -&gt; (Int -&gt; Int -&gt; Bool) -&gt; a -&gt; (ix -&gt; a -&gt; a) -&gt; a
forall ix a.
Index ix =&gt;
ix -&gt; ix -&gt; ix -&gt; (Int -&gt; Int -&gt; Bool) -&gt; a -&gt; (ix -&gt; a -&gt; a) -&gt; a
</span><a href="Data.Massiv.Core.Index.html#iter"><span class="hs-identifier hs-var">iter</span></a></span><span>
</span><span id="line-243"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Dim -&gt; Int -&gt; ix
forall ix. Index ix =&gt; Lower ix -&gt; Dim -&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.html#insertDim%27"><span class="hs-identifier hs-var">insertDim'</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280722"><span class="hs-identifier hs-var">ixl</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280727"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280721"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-244"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lower ix -&gt; Dim -&gt; Int -&gt; ix
forall ix. Index ix =&gt; Lower ix -&gt; Dim -&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.html#insertDim%27"><span class="hs-identifier hs-var">insertDim'</span></a></span><span> </span><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280722"><span class="hs-identifier hs-var">ixl</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280727"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-245"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; ix
forall ix. Index ix =&gt; Int -&gt; ix
</span><a href="Data.Massiv.Core.Index.Internal.html#pureIndex"><span class="hs-identifier hs-var">pureIndex</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>      </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">(&gt;=)</span></span><span>
</span><span id="line-247"></span><span>      </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280725"><span class="hs-identifier hs-var">acc0</span></a></span><span>
</span><span id="line-248"></span><span>      </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679280720"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280720"><span class="hs-identifier hs-var">ix</span></a></span></span><span> </span><span id="local-6989586621679280719"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280719"><span class="hs-identifier hs-var">acc'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ix -&gt; e -&gt; a -&gt; a
</span><a href="#local-6989586621679280726"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280720"><span class="hs-identifier hs-var">ix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; ix -&gt; e
forall r ix e. Source r ix e =&gt; Array r ix e -&gt; ix -&gt; e
</span><a href="Data.Massiv.Core.Common.html#unsafeIndex"><span class="hs-identifier hs-var">unsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280724"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280720"><span class="hs-identifier hs-var">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679280719"><span class="hs-identifier hs-var">acc'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#SafeSz"><span class="hs-identifier hs-type">SafeSz</span></a></span><span> </span><span id="local-6989586621679280718"><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280718"><span class="hs-identifier hs-var">sz</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280724"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679280721"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280721"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679280723"><span class="annot"><span class="annottext">Lower ix
</span><a href="#local-6989586621679280723"><span class="hs-identifier hs-var">szl</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ix -&gt; Dim -&gt; (Int, Lower ix)
forall ix. Index ix =&gt; ix -&gt; Dim -&gt; (Int, Lower ix)
</span><a href="Data.Massiv.Core.Index.html#pullOutDim%27"><span class="hs-identifier hs-var">pullOutDim'</span></a></span><span> </span><span class="annot"><span class="annottext">ix
</span><a href="#local-6989586621679280718"><span class="hs-identifier hs-var">sz</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280727"><span class="hs-identifier hs-var">dim</span></a></span><span>
</span><span id="line-252"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-pragma hs-type">ifoldrWithin'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Similar to `foldrWithin`, except that dimension is specified at a value level, which means it</span><span>
</span><span id="line-255"></span><span class="hs-comment">-- will throw an exception on an invalid dimension.</span><span>
</span><span id="line-256"></span><span class="hs-comment">--</span><span>
</span><span id="line-257"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-258"></span><span id="local-6989586621679280978"><span id="local-6989586621679280979"><span id="local-6989586621679280980"><span id="local-6989586621679280981"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin%27"><span class="hs-identifier hs-type">foldrWithin'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280981"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280980"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280981"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280979"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dim"><span class="hs-identifier hs-type">Dim</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280979"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280978"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280978"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280978"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280980"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280981"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280979"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280981"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280978"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-260"></span><span id="foldrWithin%27"><span class="annot"><span class="annottext">foldrWithin' :: Dim -&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin%27"><span class="hs-identifier hs-var hs-var">foldrWithin'</span></a></span></span><span> </span><span id="local-6989586621679280717"><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280717"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span id="local-6989586621679280716"><span class="annot"><span class="annottext">e -&gt; a -&gt; a
</span><a href="#local-6989586621679280716"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier hs-var">ifoldrWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280717"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(e -&gt; a -&gt; a) -&gt; ix -&gt; e -&gt; a -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; a -&gt; a
</span><a href="#local-6989586621679280716"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-261"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin%27"><span class="hs-pragma hs-type">foldrWithin'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">-- | Left fold over the inner most dimension with index aware function.</span><span>
</span><span id="line-265"></span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-267"></span><span id="local-6989586621679280712"><span id="local-6989586621679280713"><span id="local-6989586621679280714"><span id="local-6989586621679280715"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlInner"><span class="hs-identifier hs-type">ifoldlInner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280715"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280714"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280715"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280713"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-268"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280715"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280712"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280713"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280712"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280712"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280714"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280715"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280713"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280715"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280712"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-269"></span><span id="ifoldlInner"><span class="annot"><span class="annottext">ifoldlInner :: (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlInner"><span class="hs-identifier hs-var hs-var">ifoldlInner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlWithin%27"><span class="hs-identifier hs-var">ifoldlWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><span class="hs-number">1</span></span><span>
</span><span id="line-270"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldlInner"><span class="hs-pragma hs-type">ifoldlInner</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="hs-comment">-- | Left fold over the inner most dimension.</span><span>
</span><span id="line-273"></span><span class="hs-comment">--</span><span>
</span><span id="line-274"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-275"></span><span id="local-6989586621679280971"><span id="local-6989586621679280972"><span id="local-6989586621679280973"><span id="local-6989586621679280974"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlInner"><span class="hs-identifier hs-type">foldlInner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280974"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280973"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280974"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280972"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280971"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280972"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280971"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280971"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280973"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280974"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280972"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280974"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280971"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-277"></span><span id="foldlInner"><span class="annot"><span class="annottext">foldlInner :: (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlInner"><span class="hs-identifier hs-var hs-var">foldlInner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim -&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim -&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-identifier hs-var">foldlWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><span class="hs-number">1</span></span><span>
</span><span id="line-278"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldlInner"><span class="hs-pragma hs-type">foldlInner</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-comment">-- | Right fold over the inner most dimension with index aware function.</span><span>
</span><span id="line-281"></span><span class="hs-comment">--</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-283"></span><span id="local-6989586621679280708"><span id="local-6989586621679280709"><span id="local-6989586621679280710"><span id="local-6989586621679280711"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrInner"><span class="hs-identifier hs-type">ifoldrInner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280711"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280710"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280711"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280709"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280711"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280709"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280708"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280708"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280710"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280711"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280709"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280711"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280708"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-285"></span><span id="ifoldrInner"><span class="annot"><span class="annottext">ifoldrInner :: (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrInner"><span class="hs-identifier hs-var hs-var">ifoldrInner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim
-&gt; (ix -&gt; e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrWithin%27"><span class="hs-identifier hs-var">ifoldrWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><span class="hs-number">1</span></span><span>
</span><span id="line-286"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldrInner"><span class="hs-pragma hs-type">ifoldrInner</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-comment">-- | Right fold over the inner most dimension.</span><span>
</span><span id="line-289"></span><span class="hs-comment">--</span><span>
</span><span id="line-290"></span><span class="hs-comment">-- @since 0.2.4</span><span>
</span><span id="line-291"></span><span id="local-6989586621679280704"><span id="local-6989586621679280705"><span id="local-6989586621679280706"><span id="local-6989586621679280707"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrInner"><span class="hs-identifier hs-type">foldrInner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280707"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280706"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280707"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280705"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-292"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280705"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280704"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280704"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280704"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280706"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280707"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280705"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280707"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280704"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-293"></span><span id="foldrInner"><span class="annot"><span class="annottext">foldrInner :: (e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldrInner"><span class="hs-identifier hs-var hs-var">foldrInner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim -&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim -&gt; (e -&gt; a -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldrWithin%27"><span class="hs-identifier hs-var">foldrWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><span class="hs-number">1</span></span><span>
</span><span id="line-294"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldrInner"><span class="hs-pragma hs-type">foldrInner</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-295"></span><span>
</span><span id="line-296"></span><span class="hs-comment">-- | Monoidal fold over the inner most dimension.</span><span>
</span><span id="line-297"></span><span class="hs-comment">--</span><span>
</span><span id="line-298"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-299"></span><span id="local-6989586621679280701"><span id="local-6989586621679280702"><span id="local-6989586621679280703"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInner"><span class="hs-identifier hs-type">foldInner</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280703"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280702"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280701"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280702"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280703"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280701"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280702"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280703"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280702"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280703"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-300"></span><span id="foldInner"><span class="annot"><span class="annottext">foldInner :: Array r ix e -&gt; Array D (Lower ix) e
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldInner"><span class="hs-identifier hs-var hs-var">foldInner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; e -&gt; e) -&gt; e -&gt; Array r ix e -&gt; Array D (Lower ix) e
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlInner"><span class="hs-identifier hs-var">foldlInner</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">e
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-301"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInner"><span class="hs-pragma hs-type">foldInner</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-comment">-- | Monoidal fold over some internal dimension.</span><span>
</span><span id="line-304"></span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-306"></span><span id="local-6989586621679280697"><span id="local-6989586621679280698"><span id="local-6989586621679280699"><span id="local-6989586621679280700"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin"><span class="hs-identifier hs-type">foldWithin</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-307"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280700"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280699"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280698"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280698"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280699"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#IsIndexDimension"><span class="hs-identifier hs-type">IsIndexDimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280699"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280697"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dimension"><span class="hs-identifier hs-type">Dimension</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280697"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-309"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280700"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280699"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280698"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-310"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280699"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280698"><span class="hs-identifier hs-type">a</span></a></span></span></span></span></span><span>
</span><span id="line-311"></span><span id="foldWithin"><span class="annot"><span class="annottext">foldWithin :: Dimension n -&gt; Array r ix a -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin"><span class="hs-identifier hs-var hs-var">foldWithin</span></a></span></span><span> </span><span id="local-6989586621679280696"><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280696"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dimension n
-&gt; (a -&gt; a -&gt; a) -&gt; a -&gt; Array r ix a -&gt; Array D (Lower ix) a
forall ix (n :: Nat) r e a.
(Index (Lower ix), IsIndexDimension ix n, Source r ix e) =&gt;
Dimension n
-&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin"><span class="hs-identifier hs-var">foldlWithin</span></a></span><span> </span><span class="annot"><span class="annottext">Dimension n
</span><a href="#local-6989586621679280696"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-312"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin"><span class="hs-pragma hs-type">foldWithin</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-comment">-- | Monoidal fold over some internal dimension. This is a pratial function and will</span><span>
</span><span id="line-315"></span><span class="hs-comment">-- result in `IndexDimensionException` if supplied dimension is invalid.</span><span>
</span><span id="line-316"></span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-318"></span><span id="local-6989586621679280693"><span id="local-6989586621679280694"><span id="local-6989586621679280695"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin%27"><span class="hs-identifier hs-type">foldWithin'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-319"></span><span>     </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280695"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280694"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280693"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280693"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Index"><span class="hs-identifier hs-type">Index</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280694"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Dim"><span class="hs-identifier hs-type">Dim</span></a></span><span>
</span><span id="line-321"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280695"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280694"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280693"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="Data.Massiv.Array.Delayed.Pull.html#D"><span class="hs-identifier hs-type">D</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Lower"><span class="hs-identifier hs-type">Lower</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280694"><span class="hs-identifier hs-type">ix</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679280693"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-323"></span><span id="foldWithin%27"><span class="annot"><span class="annottext">foldWithin' :: Dim -&gt; Array r ix a -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin%27"><span class="hs-identifier hs-var hs-var">foldWithin'</span></a></span></span><span> </span><span id="local-6989586621679280692"><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280692"><span class="hs-identifier hs-var">dim</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Dim -&gt; (a -&gt; a -&gt; a) -&gt; a -&gt; Array r ix a -&gt; Array D (Lower ix) a
forall ix r e a.
(Index (Lower ix), Source r ix e) =&gt;
Dim -&gt; (a -&gt; e -&gt; a) -&gt; a -&gt; Array r ix e -&gt; Array D (Lower ix) a
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldlWithin%27"><span class="hs-identifier hs-var">foldlWithin'</span></a></span><span> </span><span class="annot"><span class="annottext">Dim
</span><a href="#local-6989586621679280692"><span class="hs-identifier hs-var">dim</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Monoid a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">mappend</span></span><span> </span><span class="annot"><span class="annottext">a
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-324"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldWithin%27"><span class="hs-pragma hs-type">foldWithin'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-325"></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-comment">-- | Reduce each outer slice into a monoid and mappend results together</span><span>
</span><span id="line-328"></span><span class="hs-comment">--</span><span>
</span><span id="line-329"></span><span class="hs-comment">-- ==== __Example__</span><span>
</span><span id="line-330"></span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Massiv.Array as A</span><span>
</span><span id="line-332"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Monoid (Product(..))</span><span>
</span><span id="line-333"></span><span class="hs-comment">-- &gt;&gt;&gt; arr = computeAs P $ iterateN (Sz2 2 3) (+1) (10 :: Int)</span><span>
</span><span id="line-334"></span><span class="hs-comment">-- &gt;&gt;&gt; arr</span><span>
</span><span id="line-335"></span><span class="hs-comment">-- Array P Seq (Sz (2 :. 3))</span><span>
</span><span id="line-336"></span><span class="hs-comment">--   [ [ 11, 12, 13 ]</span><span>
</span><span id="line-337"></span><span class="hs-comment">--   , [ 14, 15, 16 ]</span><span>
</span><span id="line-338"></span><span class="hs-comment">--   ]</span><span>
</span><span id="line-339"></span><span class="hs-comment">-- &gt;&gt;&gt; getProduct $ foldOuterSlice (\row -&gt; Product (A.sum row)) arr</span><span>
</span><span id="line-340"></span><span class="hs-comment">-- 1620</span><span>
</span><span id="line-341"></span><span class="hs-comment">-- &gt;&gt;&gt; (11 + 12 + 13) * (14 + 15 + 16) :: Int</span><span>
</span><span id="line-342"></span><span class="hs-comment">-- 1620</span><span>
</span><span id="line-343"></span><span class="hs-comment">--</span><span>
</span><span id="line-344"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-345"></span><span id="local-6989586621679280688"><span id="local-6989586621679280689"><span id="local-6989586621679280690"><span id="local-6989586621679280691"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldOuterSlice"><span class="hs-identifier hs-type">foldOuterSlice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#OuterSlice"><span class="hs-identifier hs-type">OuterSlice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280691"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280690"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280689"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280688"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Elt"><span class="hs-identifier hs-type">Elt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280691"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280690"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280689"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280688"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280691"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280690"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280689"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280688"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-346"></span><span id="foldOuterSlice"><span class="annot"><span class="annottext">foldOuterSlice :: (Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldOuterSlice"><span class="hs-identifier hs-var hs-var">foldOuterSlice</span></a></span></span><span> </span><span id="local-6989586621679280687"><span class="annot"><span class="annottext">Elt r ix e -&gt; m
</span><a href="#local-6989586621679280687"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
forall r ix e m.
(OuterSlice r ix e, Monoid m) =&gt;
(Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldOuterSlice"><span class="hs-identifier hs-var">ifoldOuterSlice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Elt r ix e -&gt; m) -&gt; Int -&gt; Elt r ix e -&gt; m
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Elt r ix e -&gt; m
</span><a href="#local-6989586621679280687"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldOuterSlice"><span class="hs-pragma hs-type">foldOuterSlice</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span>
</span><span id="line-350"></span><span class="hs-comment">-- | Reduce each outer slice into a monoid with an index aware function and mappend results</span><span>
</span><span id="line-351"></span><span class="hs-comment">-- together</span><span>
</span><span id="line-352"></span><span class="hs-comment">--</span><span>
</span><span id="line-353"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-354"></span><span id="local-6989586621679280949"><span id="local-6989586621679280951"><span id="local-6989586621679280952"><span id="local-6989586621679280953"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldOuterSlice"><span class="hs-identifier hs-type">ifoldOuterSlice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#OuterSlice"><span class="hs-identifier hs-type">OuterSlice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280953"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280952"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280951"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280949"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Ix1"><span class="hs-identifier hs-type">Ix1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Elt"><span class="hs-identifier hs-type">Elt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280953"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280952"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280951"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280949"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280953"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280952"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280951"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280949"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-355"></span><span id="ifoldOuterSlice"><span class="annot"><span class="annottext">ifoldOuterSlice :: (Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldOuterSlice"><span class="hs-identifier hs-var hs-var">ifoldOuterSlice</span></a></span></span><span> </span><span id="local-6989586621679280685"><span class="annot"><span class="annottext">Int -&gt; Elt r ix e -&gt; m
</span><a href="#local-6989586621679280685"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280684"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280684"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; m) -&gt; Array D Int Int -&gt; m
forall r ix e m.
(Source r ix e, Monoid m) =&gt;
(e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldMono"><span class="hs-identifier hs-var">foldMono</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; m
</span><a href="#local-6989586621679280683"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(Array D Int Int -&gt; m) -&gt; Array D Int Int -&gt; m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Comp -&gt; Int -&gt; Int -&gt; Array D Int Int
forall ix. Index ix =&gt; Comp -&gt; ix -&gt; ix -&gt; Array D ix ix
</span><a href="Data.Massiv.Array.Ops.Construct.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Comp
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280684"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ix -&gt; Int
forall ix. Index ix =&gt; ix -&gt; Int
</span><a href="Data.Massiv.Core.Index.html#headDim"><span class="hs-identifier hs-var">headDim</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz ix -&gt; ix
forall ix. Sz ix -&gt; ix
</span><a href="Data.Massiv.Core.Index.Internal.html#unSz"><span class="hs-identifier hs-var">unSz</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280684"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-357"></span><span>    </span><span id="local-6989586621679280683"><span class="annot"><span class="annottext">g :: Int -&gt; m
</span><a href="#local-6989586621679280683"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679280679"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280679"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Elt r ix e -&gt; m
</span><a href="#local-6989586621679280685"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280679"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Int -&gt; Elt r ix e
forall r ix e.
OuterSlice r ix e =&gt;
Array r ix e -&gt; Int -&gt; Elt r ix e
</span><a href="Data.Massiv.Core.Common.html#unsafeOuterSlice"><span class="hs-identifier hs-var">unsafeOuterSlice</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280684"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280679"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="#local-6989586621679280683"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-359"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldOuterSlice"><span class="hs-pragma hs-type">ifoldOuterSlice</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-comment">-- | Reduce each inner slice into a monoid and mappend results together</span><span>
</span><span id="line-363"></span><span class="hs-comment">--</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- ==== __Example__</span><span>
</span><span id="line-365"></span><span class="hs-comment">--</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Massiv.Array as A</span><span>
</span><span id="line-367"></span><span class="hs-comment">-- &gt;&gt;&gt; import Data.Monoid (Product(..))</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- &gt;&gt;&gt; arr = computeAs P $ iterateN (Sz2 2 3) (+1) (10 :: Int)</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- &gt;&gt;&gt; arr</span><span>
</span><span id="line-370"></span><span class="hs-comment">-- Array P Seq (Sz (2 :. 3))</span><span>
</span><span id="line-371"></span><span class="hs-comment">--   [ [ 11, 12, 13 ]</span><span>
</span><span id="line-372"></span><span class="hs-comment">--   , [ 14, 15, 16 ]</span><span>
</span><span id="line-373"></span><span class="hs-comment">--   ]</span><span>
</span><span id="line-374"></span><span class="hs-comment">-- &gt;&gt;&gt; getProduct $ foldInnerSlice (\column -&gt; Product (A.sum column)) arr</span><span>
</span><span id="line-375"></span><span class="hs-comment">-- 19575</span><span>
</span><span id="line-376"></span><span class="hs-comment">-- &gt;&gt;&gt; (11 + 14) * (12 + 15) * (13 + 16) :: Int</span><span>
</span><span id="line-377"></span><span class="hs-comment">-- 19575</span><span>
</span><span id="line-378"></span><span class="hs-comment">--</span><span>
</span><span id="line-379"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-380"></span><span id="local-6989586621679280674"><span id="local-6989586621679280675"><span id="local-6989586621679280676"><span id="local-6989586621679280677"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInnerSlice"><span class="hs-identifier hs-type">foldInnerSlice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#InnerSlice"><span class="hs-identifier hs-type">InnerSlice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280677"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280676"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280675"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280674"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Elt"><span class="hs-identifier hs-type">Elt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280677"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280676"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280675"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280674"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280677"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280676"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280675"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280674"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-381"></span><span id="foldInnerSlice"><span class="annot"><span class="annottext">foldInnerSlice :: (Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#foldInnerSlice"><span class="hs-identifier hs-var hs-var">foldInnerSlice</span></a></span></span><span> </span><span id="local-6989586621679280673"><span class="annot"><span class="annottext">Elt r ix e -&gt; m
</span><a href="#local-6989586621679280673"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
forall r ix e m.
(InnerSlice r ix e, Monoid m) =&gt;
(Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldInnerSlice"><span class="hs-identifier hs-var">ifoldInnerSlice</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Elt r ix e -&gt; m) -&gt; Int -&gt; Elt r ix e -&gt; m
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Elt r ix e -&gt; m
</span><a href="#local-6989586621679280673"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#foldInnerSlice"><span class="hs-pragma hs-type">foldInnerSlice</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span class="hs-comment">-- | Reduce each inner slice into a monoid with an index aware function and mappend</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- results together</span><span>
</span><span id="line-387"></span><span class="hs-comment">--</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- @since 0.4.3</span><span>
</span><span id="line-389"></span><span id="local-6989586621679280926"><span id="local-6989586621679280928"><span id="local-6989586621679280929"><span id="local-6989586621679280930"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldInnerSlice"><span class="hs-identifier hs-type">ifoldInnerSlice</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#InnerSlice"><span class="hs-identifier hs-type">InnerSlice</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280930"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280929"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280928"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679280926"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Index.Internal.html#Ix1"><span class="hs-identifier hs-type">Ix1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Elt"><span class="hs-identifier hs-type">Elt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280930"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280929"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280928"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280926"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280930"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280929"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280928"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280926"><span class="hs-identifier hs-type">m</span></a></span></span></span></span></span><span>
</span><span id="line-390"></span><span id="ifoldInnerSlice"><span class="annot"><span class="annottext">ifoldInnerSlice :: (Int -&gt; Elt r ix e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.html#ifoldInnerSlice"><span class="hs-identifier hs-var hs-var">ifoldInnerSlice</span></a></span></span><span> </span><span id="local-6989586621679280672"><span class="annot"><span class="annottext">Int -&gt; Elt r ix e -&gt; m
</span><a href="#local-6989586621679280672"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679280671"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280671"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Int -&gt; m) -&gt; Array D Int Int -&gt; m
forall r ix e m.
(Source r ix e, Monoid m) =&gt;
(e -&gt; m) -&gt; Array r ix e -&gt; m
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldMono"><span class="hs-identifier hs-var">foldMono</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; m
</span><a href="#local-6989586621679280670"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">(Array D Int Int -&gt; m) -&gt; Array D Int Int -&gt; m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Comp -&gt; Int -&gt; Int -&gt; Array D Int Int
forall ix. Index ix =&gt; Comp -&gt; ix -&gt; ix -&gt; Array D ix ix
</span><a href="Data.Massiv.Array.Ops.Construct.html#range"><span class="hs-identifier hs-var">range</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Comp
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Comp
</span><a href="Data.Massiv.Core.Common.html#getComp"><span class="hs-identifier hs-var">getComp</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280671"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz Int -&gt; Int
forall ix. Sz ix -&gt; ix
</span><a href="Data.Massiv.Core.Index.Internal.html#unSz"><span class="hs-identifier hs-var">unSz</span></a></span><span> </span><span class="annot"><span class="annottext">Sz Int
</span><a href="#local-6989586621679280669"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-392"></span><span>    </span><span id="local-6989586621679280668"><span class="annot"><span class="annottext">szs :: (Sz (Lower ix), Sz Int)
</span><a href="#local-6989586621679280668"><span class="hs-identifier hs-var">szs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz (Lower ix)
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679280669"><span class="annot"><span class="annottext">Sz Int
</span><a href="#local-6989586621679280669"><span class="hs-identifier hs-var">k</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Sz ix -&gt; (Sz (Lower ix), Sz Int)
forall ix. Index ix =&gt; Sz ix -&gt; (Sz (Lower ix), Sz Int)
</span><a href="Data.Massiv.Core.Index.Internal.html#unsnocSz"><span class="hs-identifier hs-var">unsnocSz</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280671"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-393"></span><span>    </span><span id="local-6989586621679280670"><span class="annot"><span class="annottext">g :: Int -&gt; m
</span><a href="#local-6989586621679280670"><span class="hs-identifier hs-var hs-var">g</span></a></span></span><span> </span><span id="local-6989586621679280666"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280666"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Elt r ix e -&gt; m
</span><a href="#local-6989586621679280672"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280666"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; (Sz (Lower ix), Sz Int) -&gt; Int -&gt; Elt r ix e
forall r ix e.
InnerSlice r ix e =&gt;
Array r ix e -&gt; (Sz (Lower ix), Sz Int) -&gt; Int -&gt; Elt r ix e
</span><a href="Data.Massiv.Core.Common.html#unsafeInnerSlice"><span class="hs-identifier hs-var">unsafeInnerSlice</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280671"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">(Sz (Lower ix), Sz Int)
</span><a href="#local-6989586621679280668"><span class="hs-identifier hs-var">szs</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679280666"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-394"></span><span>    </span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="#local-6989586621679280670"><span class="hs-pragma hs-type">g</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-395"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#ifoldInnerSlice"><span class="hs-pragma hs-type">ifoldInnerSlice</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-396"></span><span>
</span><span id="line-397"></span><span class="hs-comment">-- | /O(n)/ - Compute maximum of all elements.</span><span>
</span><span id="line-398"></span><span class="hs-comment">--</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-400"></span><span id="local-6989586621679280886"><span id="local-6989586621679280887"><span id="local-6989586621679280888"><span id="local-6989586621679280889"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximumM"><span class="hs-identifier hs-type">maximumM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679280889"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280888"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280887"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280886"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679280886"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280888"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280887"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280886"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280889"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280886"><span class="hs-identifier hs-type">e</span></a></span></span></span></span></span><span>
</span><span id="line-401"></span><span id="maximumM"><span class="annot"><span class="annottext">maximumM :: Array r ix e -&gt; m e
</span><a href="Data.Massiv.Array.Ops.Fold.html#maximumM"><span class="hs-identifier hs-var hs-var">maximumM</span></a></span></span><span> </span><span id="local-6989586621679280664"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280664"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-402"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Bool
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Core.Common.html#isEmpty"><span class="hs-identifier hs-var">isEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280664"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-403"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SizeException -&gt; m e
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz ix -&gt; SizeException
forall ix. Index ix =&gt; Sz ix -&gt; SizeException
</span><a href="Data.Massiv.Core.Index.Internal.html#SizeEmptyException"><span class="hs-identifier hs-var">SizeEmptyException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280664"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679280660"><span class="annot"><span class="annottext">e0 :: e
</span><a href="#local-6989586621679280660"><span class="hs-identifier hs-var hs-var">e0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; ix -&gt; e
forall r ix e. Source r ix e =&gt; Array r ix e -&gt; ix -&gt; e
</span><a href="Data.Massiv.Core.Common.html#unsafeIndex"><span class="hs-identifier hs-var">unsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280664"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">ix
forall ix. Index ix =&gt; ix
</span><a href="Data.Massiv.Core.Index.html#zeroIndex"><span class="hs-identifier hs-var">zeroIndex</span></a></span><span>
</span><span id="line-405"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e -&gt; m e
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(e -&gt; m e) -&gt; e -&gt; m e
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(e -&gt; e -&gt; e) -&gt; e -&gt; (e -&gt; e -&gt; e) -&gt; e -&gt; Array r ix e -&gt; e
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlInternal"><span class="hs-identifier hs-var">foldlInternal</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280660"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280660"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280664"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-406"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximumM"><span class="hs-pragma hs-type">maximumM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-407"></span><span>
</span><span id="line-408"></span><span>
</span><span id="line-409"></span><span class="hs-comment">-- | /O(n)/ - Compute maximum of all elements.</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-412"></span><span id="local-6989586621679280655"><span id="local-6989586621679280656"><span id="local-6989586621679280657"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximum%27"><span class="hs-identifier hs-type">maximum'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280657"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280656"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280655"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679280655"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280657"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280656"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280655"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280655"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-413"></span><span id="maximum%27"><span class="annot"><span class="annottext">maximum' :: Array r ix e -&gt; e
</span><a href="Data.Massiv.Array.Ops.Fold.html#maximum%27"><span class="hs-identifier hs-var hs-var">maximum'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; e) -&gt; (e -&gt; e) -&gt; Either SomeException e -&gt; e
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; e
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; e
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException e -&gt; e)
-&gt; (Array r ix e -&gt; Either SomeException e) -&gt; Array r ix e -&gt; e
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Either SomeException e
forall (m :: * -&gt; *) r ix e.
(MonadThrow m, Source r ix e, Ord e) =&gt;
Array r ix e -&gt; m e
</span><a href="Data.Massiv.Array.Ops.Fold.html#maximumM"><span class="hs-identifier hs-var">maximumM</span></a></span><span>
</span><span id="line-414"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#maximum%27"><span class="hs-pragma hs-type">maximum'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | /O(n)/ - Compute minimum of all elements.</span><span>
</span><span id="line-418"></span><span class="hs-comment">--</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-420"></span><span id="local-6989586621679280647"><span id="local-6989586621679280648"><span id="local-6989586621679280649"><span id="local-6989586621679280650"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimumM"><span class="hs-identifier hs-type">minimumM</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679280650"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280649"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280648"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280647"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679280647"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280649"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280648"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280647"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280650"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280647"><span class="hs-identifier hs-type">e</span></a></span></span></span></span></span><span>
</span><span id="line-421"></span><span id="minimumM"><span class="annot"><span class="annottext">minimumM :: Array r ix e -&gt; m e
</span><a href="Data.Massiv.Array.Ops.Fold.html#minimumM"><span class="hs-identifier hs-var hs-var">minimumM</span></a></span></span><span> </span><span id="local-6989586621679280646"><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280646"><span class="hs-identifier hs-var">arr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-422"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Bool
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Core.Common.html#isEmpty"><span class="hs-identifier hs-var">isEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280646"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-423"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">SizeException -&gt; m e
forall (m :: * -&gt; *) e a. (MonadThrow m, Exception e) =&gt; e -&gt; m a
</span><span class="hs-identifier hs-var">throwM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Sz ix -&gt; SizeException
forall ix. Index ix =&gt; Sz ix -&gt; SizeException
</span><a href="Data.Massiv.Core.Index.Internal.html#SizeEmptyException"><span class="hs-identifier hs-var">SizeEmptyException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Array r ix e -&gt; Sz ix
forall r ix e. Load r ix e =&gt; Array r ix e -&gt; Sz ix
</span><a href="Data.Massiv.Core.Common.html#size"><span class="hs-identifier hs-var">size</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280646"><span class="hs-identifier hs-var">arr</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-424"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679280645"><span class="annot"><span class="annottext">e0 :: e
</span><a href="#local-6989586621679280645"><span class="hs-identifier hs-var hs-var">e0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; ix -&gt; e
forall r ix e. Source r ix e =&gt; Array r ix e -&gt; ix -&gt; e
</span><a href="Data.Massiv.Core.Common.html#unsafeIndex"><span class="hs-identifier hs-var">unsafeIndex</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280646"><span class="hs-identifier hs-var">arr</span></a></span><span> </span><span class="annot"><span class="annottext">ix
forall ix. Index ix =&gt; ix
</span><a href="Data.Massiv.Core.Index.html#zeroIndex"><span class="hs-identifier hs-var">zeroIndex</span></a></span><span>
</span><span id="line-425"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">e -&gt; m e
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(e -&gt; m e) -&gt; e -&gt; m e
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(e -&gt; e -&gt; e) -&gt; e -&gt; (e -&gt; e -&gt; e) -&gt; e -&gt; Array r ix e -&gt; e
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlInternal"><span class="hs-identifier hs-var">foldlInternal</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280645"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">min</span></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280645"><span class="hs-identifier hs-var">e0</span></a></span><span> </span><span class="annot"><span class="annottext">Array r ix e
</span><a href="#local-6989586621679280646"><span class="hs-identifier hs-var">arr</span></a></span><span>
</span><span id="line-426"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimumM"><span class="hs-pragma hs-type">minimumM</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- | /O(n)/ - Compute minimum of all elements.</span><span>
</span><span id="line-429"></span><span class="hs-comment">--</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- @since 0.3.0</span><span>
</span><span id="line-431"></span><span id="local-6989586621679280641"><span id="local-6989586621679280642"><span id="local-6989586621679280643"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimum%27"><span class="hs-identifier hs-type">minimum'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280643"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280642"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280641"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679280641"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280643"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280642"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280641"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280641"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-432"></span><span id="minimum%27"><span class="annot"><span class="annottext">minimum' :: Array r ix e -&gt; e
</span><a href="Data.Massiv.Array.Ops.Fold.html#minimum%27"><span class="hs-identifier hs-var hs-var">minimum'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; e) -&gt; (e -&gt; e) -&gt; Either SomeException e -&gt; e
forall a c b. (a -&gt; c) -&gt; (b -&gt; c) -&gt; Either a b -&gt; c
</span><span class="hs-identifier hs-var">either</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; e
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">throw</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; e
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">(Either SomeException e -&gt; e)
-&gt; (Array r ix e -&gt; Either SomeException e) -&gt; Array r ix e -&gt; e
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Array r ix e -&gt; Either SomeException e
forall (m :: * -&gt; *) r ix e.
(MonadThrow m, Source r ix e, Ord e) =&gt;
Array r ix e -&gt; m e
</span><a href="Data.Massiv.Array.Ops.Fold.html#minimumM"><span class="hs-identifier hs-var">minimumM</span></a></span><span>
</span><span id="line-433"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#minimum%27"><span class="hs-pragma hs-type">minimum'</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span>
</span><span id="line-436"></span><span class="hs-comment">-- -- | /O(n)/ - Compute sum of all elements.</span><span>
</span><span id="line-437"></span><span class="hs-comment">-- --</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- -- @since 0.1.0</span><span>
</span><span id="line-439"></span><span class="hs-comment">-- sum' ::</span><span>
</span><span id="line-440"></span><span class="hs-comment">--      forall r ix e. (Source r ix e, Numeric r e)</span><span>
</span><span id="line-441"></span><span class="hs-comment">--   =&gt; Array r ix e</span><span>
</span><span id="line-442"></span><span class="hs-comment">--   -&gt; IO e</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- sum' = splitReduce (\_ -&gt; pure . sumArray) (\x y -&gt; pure (x + y)) 0</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- {-# INLINE sum' #-}</span><span>
</span><span id="line-445"></span><span>
</span><span id="line-446"></span><span class="hs-comment">-- | /O(n)/ - Compute sum of all elements.</span><span>
</span><span id="line-447"></span><span class="hs-comment">--</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- @since 0.1.0</span><span>
</span><span id="line-449"></span><span id="local-6989586621679280638"><span id="local-6989586621679280639"><span id="local-6989586621679280640"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#sum"><span class="hs-identifier hs-type">sum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280640"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280639"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280638"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679280638"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280640"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280639"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280638"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280638"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-450"></span><span id="sum"><span class="annot"><span class="annottext">sum :: Array r ix e -&gt; e
</span><a href="Data.Massiv.Array.Ops.Fold.html#sum"><span class="hs-identifier hs-var hs-var">sum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; e -&gt; e) -&gt; e -&gt; (e -&gt; e -&gt; e) -&gt; e -&gt; Array r ix e -&gt; e
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlInternal"><span class="hs-identifier hs-var">foldlInternal</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-number">0</span></span><span>
</span><span id="line-451"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#sum"><span class="hs-pragma hs-type">sum</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span>
</span><span id="line-454"></span><span class="hs-comment">-- | /O(n)/ - Compute product of all elements.</span><span>
</span><span id="line-455"></span><span class="hs-comment">--</span><span>
</span><span id="line-456"></span><span class="hs-comment">-- @since 0.1.0</span><span>
</span><span id="line-457"></span><span id="local-6989586621679280634"><span id="local-6989586621679280635"><span id="local-6989586621679280636"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#product"><span class="hs-identifier hs-type">product</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280636"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280635"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280634"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Num</span></span><span> </span><span class="annot"><a href="#local-6989586621679280634"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280636"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280635"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280634"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280634"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span>
</span><span id="line-458"></span><span id="product"><span class="annot"><span class="annottext">product :: Array r ix e -&gt; e
</span><a href="Data.Massiv.Array.Ops.Fold.html#product"><span class="hs-identifier hs-var hs-var">product</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; e -&gt; e) -&gt; e -&gt; (e -&gt; e -&gt; e) -&gt; e -&gt; Array r ix e -&gt; e
forall r ix e a b.
Source r ix e =&gt;
(a -&gt; e -&gt; a) -&gt; a -&gt; (b -&gt; a -&gt; b) -&gt; b -&gt; Array r ix e -&gt; b
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#foldlInternal"><span class="hs-identifier hs-var">foldlInternal</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(*)</span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; e
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(*)</span></span><span> </span><span class="annot"><span class="annottext">e
</span><span class="hs-number">1</span></span><span>
</span><span id="line-459"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#product"><span class="hs-pragma hs-type">product</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-460"></span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span class="hs-comment">-- | /O(n)/ - Compute conjunction of all elements.</span><span>
</span><span id="line-463"></span><span class="hs-comment">--</span><span>
</span><span id="line-464"></span><span class="hs-comment">-- @since 0.1.0</span><span>
</span><span id="line-465"></span><span id="local-6989586621679280631"><span id="local-6989586621679280632"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#and"><span class="hs-identifier hs-type">and</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280632"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280631"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280632"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280631"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-466"></span><span id="and"><span class="annot"><span class="annottext">and :: Array r ix Bool -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.html#and"><span class="hs-identifier hs-var hs-var">and</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Array r ix Bool -&gt; Bool
forall r ix e. Source r ix e =&gt; (e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.html#all"><span class="hs-identifier hs-var">all</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-467"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#and"><span class="hs-pragma hs-type">and</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-468"></span><span>
</span><span id="line-469"></span><span>
</span><span id="line-470"></span><span class="hs-comment">-- | /O(n)/ - Compute disjunction of all elements.</span><span>
</span><span id="line-471"></span><span class="hs-comment">--</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- @since 0.1.0</span><span>
</span><span id="line-473"></span><span id="local-6989586621679280629"><span id="local-6989586621679280630"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#or"><span class="hs-identifier hs-type">or</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280630"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280629"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280630"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280629"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span><span>
</span><span id="line-474"></span><span id="or"><span class="annot"><span class="annottext">or :: Array r ix Bool -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.html#or"><span class="hs-identifier hs-var hs-var">or</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Array r ix Bool -&gt; Bool
forall r ix e. Source r ix e =&gt; (e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-475"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#or"><span class="hs-pragma hs-type">or</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-476"></span><span>
</span><span id="line-477"></span><span>
</span><span id="line-478"></span><span class="hs-comment">-- | /O(n)/ - Determines whether all elements of the array satisfy a predicate.</span><span>
</span><span id="line-479"></span><span class="hs-comment">--</span><span>
</span><span id="line-480"></span><span class="hs-comment">-- @since 0.1.0</span><span>
</span><span id="line-481"></span><span id="local-6989586621679280868"><span id="local-6989586621679280869"><span id="local-6989586621679280870"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#all"><span class="hs-identifier hs-type">all</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280870"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280869"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280868"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679280868"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280870"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280869"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280868"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span></span><span>
</span><span id="line-482"></span><span id="all"><span class="annot"><span class="annottext">all :: (e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.html#all"><span class="hs-identifier hs-var hs-var">all</span></a></span></span><span> </span><span id="local-6989586621679280628"><span class="annot"><span class="annottext">e -&gt; Bool
</span><a href="#local-6989586621679280628"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Array r ix e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
forall r ix e. Source r ix e =&gt; (e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (e -&gt; Bool) -&gt; e -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; Bool
</span><a href="#local-6989586621679280628"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-483"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#all"><span class="hs-pragma hs-type">all</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-comment">-- | /O(n)/ - Determines whether an element is present in the array.</span><span>
</span><span id="line-486"></span><span class="hs-comment">--</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- @since 0.5.5</span><span>
</span><span id="line-488"></span><span id="local-6989586621679280624"><span id="local-6989586621679280625"><span id="local-6989586621679280626"><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#elem"><span class="hs-identifier hs-type">elem</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679280626"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Source"><span class="hs-identifier hs-type">Source</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280625"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280624"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280626"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679280626"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Massiv.Core.Common.html#Array"><span class="hs-identifier hs-type">Array</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280625"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280624"><span class="hs-identifier hs-type">ix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679280626"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span></span><span>
</span><span id="line-489"></span><span id="elem"><span class="annot"><span class="annottext">elem :: e -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.html#elem"><span class="hs-identifier hs-var hs-var">elem</span></a></span></span><span> </span><span id="local-6989586621679280623"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280623"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
forall r ix e. Source r ix e =&gt; (e -&gt; Bool) -&gt; Array r ix e -&gt; Bool
</span><a href="Data.Massiv.Array.Ops.Fold.Internal.html#any"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679280623"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">e -&gt; e -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="hs-special">)</span><span>
</span><span id="line-490"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Data.Massiv.Array.Ops.Fold.html#elem"><span class="hs-pragma hs-type">elem</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-491"></span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span class="hs-comment">{- $unstruct_folds

Functions in this section will fold any `Source` array with respect to the inner
`Comp`utation strategy setting.

-}</span><span>
</span><span id="line-499"></span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-comment">{- $seq_folds

Functions in this section will fold any `Source` array sequentially, regardless of the inner
`Comp`utation strategy setting.

-}</span><span>
</span><span id="line-507"></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span class="hs-comment">{- $par_folds

__Note__ It is important to compile with @-threaded -with-rtsopts=-N@ flags, otherwise there will be
no parallelization.

Functions in this section will fold any `Source` array in parallel, regardless of the inner
`Comp`utation strategy setting. All of the parallel structured folds are performed inside `IO`
monad, because referential transparency can't generally be preserved and results will depend on the
number of cores/capabilities that computation is being performed on.

In contrast to sequential folds, each parallel folding function accepts two functions and two
initial elements as arguments. This is necessary because an array is first split into chunks, which
folded individually on separate cores with the first function, and the results of those folds are
further folded with the second function.

-}</span><span>
</span><span id="line-525"></span></pre></body></html>