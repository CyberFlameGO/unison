<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-warnings-deprecations #-}</span><span>
</span><span id="line-2"></span><span class="hs-comment">{- | This module redefines some of the functions in &quot;Control.Exception&quot; to
work for more general monads built on top of 'IO'.
-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">System.Console.Haskeline.MonadException</span><span class="hs-special">(</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><span class="hs-comment">-- * The MonadException class</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier">MonadException</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Generalizations of Control.Exception</span></span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#catch"><span class="hs-identifier">catch</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#handle"><span class="hs-identifier">handle</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#catches"><span class="hs-identifier">catches</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#Handler"><span class="hs-identifier">Handler</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#finally"><span class="hs-identifier">finally</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#throwIO"><span class="hs-identifier">throwIO</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#throwTo"><span class="hs-identifier">throwTo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#bracket"><span class="hs-identifier">bracket</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Helpers for defining \&quot;wrapper\&quot; functions</span></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#liftIOOp"><span class="hs-identifier">liftIOOp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#liftIOOp_"><span class="hs-identifier">liftIOOp_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Internal implementation</span></span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier">RunIO</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Extensible Exceptions</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-identifier">Exception</span></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-identifier">E.IOException</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-29"></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Exception</span></span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">liftM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Identity</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Reader</span></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.State.Strict</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Error</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.List</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Maybe</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.RWS</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Writer</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent</span></span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ThreadId</span></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>
</span><span id="line-44"></span><span class="hs-comment">-- This approach is based on that of the monad-control package.</span><span>
</span><span id="line-45"></span><span class="hs-comment">-- Since we want to use haskeline to bootstrap GHC, we reimplement</span><span>
</span><span id="line-46"></span><span class="hs-comment">-- a simplified version here.  </span><span>
</span><span id="line-47"></span><span class="hs-comment">-- Additionally, we avoid TypeFamilies (which are used in the latest version of</span><span>
</span><span id="line-48"></span><span class="hs-comment">-- monad-control) so that we're still compatible with older versions of GHC.</span><span>
</span><span id="line-49"></span><span>
</span><span id="line-50"></span><span class="hs-comment">-- | A 'RunIO' function takes a monadic action @m@ as input,</span><span>
</span><span id="line-51"></span><span class="hs-comment">-- and outputs an IO action which performs the underlying impure part of @m@</span><span>
</span><span id="line-52"></span><span class="hs-comment">-- and returns the ''pure'' part of @m@.</span><span>
</span><span id="line-53"></span><span class="hs-comment">--</span><span>
</span><span id="line-54"></span><span class="hs-comment">-- Note that @(RunIO return)@ is an incorrect implementation, since it does not</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- separate the pure and impure parts of the monadic action.  This module defines</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- implementations for several common monad transformers.</span><span>
</span><span id="line-57"></span><span class="hs-keyword">newtype</span><span> </span><span id="RunIO"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span></span><span> </span><span id="local-6989586621679076908"><span class="annot"><a href="#local-6989586621679076908"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RunIO"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679076972"><span class="annot"><a href="#local-6989586621679076972"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="#local-6989586621679076908"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076972"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076908"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076972"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-comment">-- Uses a newtype so we don't need RankNTypes.</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-comment">-- | An instance of 'MonadException' is generally made up of monad transformers</span><span>
</span><span id="line-61"></span><span class="hs-comment">-- layered on top of the IO monad.  </span><span>
</span><span id="line-62"></span><span class="hs-comment">-- </span><span>
</span><span id="line-63"></span><span class="hs-comment">-- The 'controlIO' method enables us to \&quot;lift\&quot; a function that manages IO actions (such</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- as 'bracket' or 'catch') into a function that wraps arbitrary monadic actions.</span><span>
</span><span id="line-65"></span><span class="hs-keyword">class</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679076978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="MonadException"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-var">MonadException</span></a></span></span><span> </span><span id="local-6989586621679076978"><span class="annot"><a href="#local-6989586621679076978"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-66"></span><span>    </span><span id="local-6989586621679076976"><span id="controlIO"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-type">controlIO</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076976"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076976"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-67"></span><span>
</span><span id="line-68"></span><span class="hs-comment">-- | Lift a IO operation</span><span>
</span><span id="line-69"></span><span class="hs-comment">-- </span><span>
</span><span id="line-70"></span><span class="hs-comment">-- &gt; wrap :: (a -&gt; IO b) -&gt; IO b</span><span>
</span><span id="line-71"></span><span class="hs-comment">-- </span><span>
</span><span id="line-72"></span><span class="hs-comment">-- to a more general monadic operation</span><span>
</span><span id="line-73"></span><span class="hs-comment">-- </span><span>
</span><span id="line-74"></span><span class="hs-comment">-- &gt; liftIOOp wrap :: MonadException m =&gt; (a -&gt; m b) -&gt; m b</span><span>
</span><span id="line-75"></span><span class="hs-comment">--</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- For example: </span><span>
</span><span id="line-77"></span><span class="hs-comment">--</span><span>
</span><span id="line-78"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-79"></span><span class="hs-comment">--  'liftIOOp' ('System.IO.withFile' f m) :: MonadException m =&gt; (Handle -&gt; m r) -&gt; m r</span><span>
</span><span id="line-80"></span><span class="hs-comment">--  'liftIOOp' 'Foreign.Marshal.Alloc.alloca' :: (MonadException m, Storable a) =&gt; (Ptr a -&gt; m b) -&gt; m b</span><span>
</span><span id="line-81"></span><span class="hs-comment">--  'liftIOOp' (`Foreign.ForeignPtr.withForeignPtr` fp) :: MonadException m =&gt; (Ptr a -&gt; m b) -&gt; m b</span><span>
</span><span id="line-82"></span><span class="hs-comment">-- @</span><span>
</span><span id="line-83"></span><span id="local-6989586621679076797"><span id="local-6989586621679076798"><span id="local-6989586621679076799"><span id="local-6989586621679076800"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#liftIOOp"><span class="hs-identifier hs-type">liftIOOp</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076799"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076798"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076797"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076799"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076798"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076800"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076797"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-84"></span><span id="liftIOOp"><span class="annot"><span class="annottext">liftIOOp :: ((a -&gt; IO (m b)) -&gt; IO (m c)) -&gt; (a -&gt; m b) -&gt; m c
</span><a href="System.Console.Haskeline.MonadException.html#liftIOOp"><span class="hs-identifier hs-var hs-var">liftIOOp</span></a></span></span><span> </span><span id="local-6989586621679076796"><span class="annot"><span class="annottext">(a -&gt; IO (m b)) -&gt; IO (m c)
</span><a href="#local-6989586621679076796"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679076795"><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679076795"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m c)) -&gt; m c
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m c)) -&gt; m c) -&gt; (RunIO m -&gt; IO (m c)) -&gt; m c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076794"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076794"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(a -&gt; IO (m b)) -&gt; IO (m c)
</span><a href="#local-6989586621679076796"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m b -&gt; IO (m b)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076794"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m b -&gt; IO (m b)) -&gt; (a -&gt; m b) -&gt; a -&gt; IO (m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679076795"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>
</span><span id="line-86"></span><span class="hs-comment">-- | Lift an IO operation</span><span>
</span><span id="line-87"></span><span class="hs-comment">-- </span><span>
</span><span id="line-88"></span><span class="hs-comment">-- &gt; wrap :: IO a -&gt; IO a</span><span>
</span><span id="line-89"></span><span class="hs-comment">-- </span><span>
</span><span id="line-90"></span><span class="hs-comment">-- to a more general monadic operation</span><span>
</span><span id="line-91"></span><span class="hs-comment">-- </span><span>
</span><span id="line-92"></span><span class="hs-comment">-- &gt; liftIOOp_ wrap :: MonadException m =&gt; m a -&gt; m a</span><span>
</span><span id="line-93"></span><span id="local-6989586621679076791"><span id="local-6989586621679076792"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#liftIOOp_"><span class="hs-identifier hs-type">liftIOOp_</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076792"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076792"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076791"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076792"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076791"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076792"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076791"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076792"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076791"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-94"></span><span id="liftIOOp_"><span class="annot"><span class="annottext">liftIOOp_ :: (IO (m a) -&gt; IO (m a)) -&gt; m a -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#liftIOOp_"><span class="hs-identifier hs-var hs-var">liftIOOp_</span></a></span></span><span> </span><span id="local-6989586621679076790"><span class="annot"><span class="annottext">IO (m a) -&gt; IO (m a)
</span><a href="#local-6989586621679076790"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679076789"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076789"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m a)) -&gt; m a
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m a)) -&gt; m a) -&gt; (RunIO m -&gt; IO (m a)) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076788"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076788"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (m a) -&gt; IO (m a)
</span><a href="#local-6989586621679076790"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076788"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076789"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span id="local-6989586621679076952"><span id="local-6989586621679076953"><span id="local-6989586621679076954"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#catch"><span class="hs-identifier hs-type">catch</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076954"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">E.Exception</span></span><span> </span><span class="annot"><a href="#local-6989586621679076953"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076954"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076952"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076953"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076954"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076952"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076954"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076952"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-98"></span><span id="catch"><span class="annot"><span class="annottext">catch :: m a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#catch"><span class="hs-identifier hs-var hs-var">catch</span></a></span></span><span> </span><span id="local-6989586621679076787"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076787"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span id="local-6989586621679076786"><span class="annot"><span class="annottext">e -&gt; m a
</span><a href="#local-6989586621679076786"><span class="hs-identifier hs-var">handler</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m a)) -&gt; m a
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m a)) -&gt; m a) -&gt; (RunIO m -&gt; IO (m a)) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076785"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076785"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (m a) -&gt; (e -&gt; IO (m a)) -&gt; IO (m a)
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">E.catch</span></span><span>
</span><span id="line-99"></span><span>                                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076785"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076787"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>                                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076785"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO (m a)) -&gt; (e -&gt; m a) -&gt; e -&gt; IO (m a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; m a
</span><a href="#local-6989586621679076786"><span class="hs-identifier hs-var">handler</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span id="local-6989586621679076781"><span id="local-6989586621679076782"><span id="local-6989586621679076783"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#handle"><span class="hs-identifier hs-type">handle</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076783"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="#local-6989586621679076782"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076782"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076783"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076781"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076783"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076781"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076783"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076781"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-103"></span><span id="handle"><span class="annot"><span class="annottext">handle :: (e -&gt; m a) -&gt; m a -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#handle"><span class="hs-identifier hs-var hs-var">handle</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(m a -&gt; (e -&gt; m a) -&gt; m a) -&gt; (e -&gt; m a) -&gt; m a -&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (e -&gt; m a) -&gt; m a
forall (m :: * -&gt; *) e a.
(MonadException m, Exception e) =&gt;
m a -&gt; (e -&gt; m a) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#catch"><span class="hs-identifier hs-var">catch</span></a></span><span>
</span><span id="line-104"></span><span> </span><span>
</span><span id="line-105"></span><span id="local-6989586621679076778"><span id="local-6989586621679076779"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#catches"><span class="hs-identifier hs-type">catches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076779"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076779"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076778"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076779"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076778"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076779"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076778"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-106"></span><span id="catches"><span class="annot"><span class="annottext">catches :: m a -&gt; [Handler m a] -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#catches"><span class="hs-identifier hs-var hs-var">catches</span></a></span></span><span> </span><span id="local-6989586621679076777"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076777"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span id="local-6989586621679076776"><span class="annot"><span class="annottext">[Handler m a]
</span><a href="#local-6989586621679076776"><span class="hs-identifier hs-var">handlers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m a)) -&gt; m a
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m a)) -&gt; m a) -&gt; (RunIO m -&gt; IO (m a)) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076775"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076775"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-107"></span><span>                           </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679076774"><span class="annot"><span class="annottext">catchesHandler :: SomeException -&gt; IO (m a)
</span><a href="#local-6989586621679076774"><span class="hs-identifier hs-var hs-var">catchesHandler</span></a></span></span><span> </span><span id="local-6989586621679076773"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679076773"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Handler m a -&gt; IO (m a) -&gt; IO (m a))
-&gt; IO (m a) -&gt; [Handler m a] -&gt; IO (m a)
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">Handler m a -&gt; IO (m a) -&gt; IO (m a)
forall a. Handler m a -&gt; IO (m a) -&gt; IO (m a)
</span><a href="#local-6989586621679076771"><span class="hs-identifier hs-var">tryHandler</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException -&gt; IO (m a)
forall a e. Exception e =&gt; e -&gt; a
</span><span class="hs-identifier hs-var">E.throw</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679076773"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Handler m a]
</span><a href="#local-6989586621679076776"><span class="hs-identifier hs-var">handlers</span></a></span><span>
</span><span id="line-108"></span><span>                                   </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679076771"><span class="annot"><span class="annottext">tryHandler :: Handler m a -&gt; IO (m a) -&gt; IO (m a)
</span><a href="#local-6989586621679076771"><span class="hs-identifier hs-var hs-var">tryHandler</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#Handler"><span class="hs-identifier hs-type">Handler</span></a></span><span> </span><span id="local-6989586621679076768"><span class="annot"><span class="annottext">e -&gt; m a
</span><a href="#local-6989586621679076768"><span class="hs-identifier hs-var">handler</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679076767"><span class="annot"><span class="annottext">IO (m a)
</span><a href="#local-6989586621679076767"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-109"></span><span>                                             </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; Maybe e
forall e. Exception e =&gt; SomeException -&gt; Maybe e
</span><span class="hs-identifier hs-var">E.fromException</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679076773"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-110"></span><span>                                               </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679076765"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679076765"><span class="hs-identifier hs-var">e'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076775"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m a -&gt; IO (m a)) -&gt; m a -&gt; IO (m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; m a
</span><a href="#local-6989586621679076768"><span class="hs-identifier hs-var">handler</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679076765"><span class="hs-identifier hs-var">e'</span></a></span><span>
</span><span id="line-111"></span><span>                                               </span><span class="annot"><span class="annottext">Maybe e
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (m a)
</span><a href="#local-6989586621679076767"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-112"></span><span>                           </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">IO (m a) -&gt; (SomeException -&gt; IO (m a)) -&gt; IO (m a)
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-identifier hs-var">E.catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076775"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076777"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO (m a)
</span><a href="#local-6989586621679076774"><span class="hs-identifier hs-var">catchesHandler</span></a></span><span>
</span><span id="line-113"></span><span>
</span><span id="line-114"></span><span class="hs-keyword">data</span><span> </span><span id="Handler"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span></span><span> </span><span id="local-6989586621679076764"><span class="annot"><a href="#local-6989586621679076764"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679076763"><span class="annot"><a href="#local-6989586621679076763"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679076762"><span class="annot"><a href="#local-6989586621679076762"><span class="hs-identifier hs-type">e</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="#local-6989586621679076762"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="Handler"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#Handler"><span class="hs-identifier hs-var">Handler</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076762"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076764"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076763"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span id="local-6989586621679076758"><span id="local-6989586621679076759"><span id="local-6989586621679076760"><span id="local-6989586621679076761"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#bracket"><span class="hs-identifier hs-type">bracket</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076760"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076760"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076759"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679076760"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076758"><span class="hs-identifier hs-type">c</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076761"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076758"><span class="hs-identifier hs-type">c</span></a></span></span></span></span></span><span>
</span><span id="line-118"></span><span id="bracket"><span class="annot"><span class="annottext">bracket :: m a -&gt; (a -&gt; m b) -&gt; (a -&gt; m c) -&gt; m c
</span><a href="System.Console.Haskeline.MonadException.html#bracket"><span class="hs-identifier hs-var hs-var">bracket</span></a></span></span><span> </span><span id="local-6989586621679076757"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076757"><span class="hs-identifier hs-var">before</span></a></span></span><span> </span><span id="local-6989586621679076756"><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679076756"><span class="hs-identifier hs-var">after</span></a></span></span><span> </span><span id="local-6989586621679076755"><span class="annot"><span class="annottext">a -&gt; m c
</span><a href="#local-6989586621679076755"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m c)) -&gt; m c
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m c)) -&gt; m c) -&gt; (RunIO m -&gt; IO (m c)) -&gt; m c
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076754"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076754"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (m a) -&gt; (m a -&gt; IO (m b)) -&gt; (m a -&gt; IO (m c)) -&gt; IO (m c)
forall a b c. IO a -&gt; (a -&gt; IO b) -&gt; (a -&gt; IO c) -&gt; IO c
</span><span class="hs-identifier hs-var">E.bracket</span></span><span>
</span><span id="line-120"></span><span>                                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076754"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076757"><span class="hs-identifier hs-var">before</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>                                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076752"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076752"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m b -&gt; IO (m b)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076754"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076752"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m b
</span><a href="#local-6989586621679076756"><span class="hs-identifier hs-var">after</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>                                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076751"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076751"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m c -&gt; IO (m c)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076754"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076751"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">m a -&gt; (a -&gt; m c) -&gt; m c
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m c
</span><a href="#local-6989586621679076755"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span id="local-6989586621679076748"><span id="local-6989586621679076749"><span id="local-6989586621679076750"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#finally"><span class="hs-identifier hs-type">finally</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076749"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076748"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076750"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076749"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-125"></span><span id="finally"><span class="annot"><span class="annottext">finally :: m a -&gt; m b -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#finally"><span class="hs-identifier hs-var hs-var">finally</span></a></span></span><span> </span><span id="local-6989586621679076747"><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076747"><span class="hs-identifier hs-var">thing</span></a></span></span><span> </span><span id="local-6989586621679076746"><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679076746"><span class="hs-identifier hs-var">ender</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m a)) -&gt; m a
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m a)) -&gt; m a) -&gt; (RunIO m -&gt; IO (m a)) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076745"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076745"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">IO (m a) -&gt; IO (m b) -&gt; IO (m a)
forall a b. IO a -&gt; IO b -&gt; IO a
</span><span class="hs-identifier hs-var">E.finally</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m a -&gt; IO (m a)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076745"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m a
</span><a href="#local-6989586621679076747"><span class="hs-identifier hs-var">thing</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">m b -&gt; IO (m b)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076745"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">m b
</span><a href="#local-6989586621679076746"><span class="hs-identifier hs-var">ender</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span id="local-6989586621679076741"><span id="local-6989586621679076742"><span id="local-6989586621679076743"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#throwIO"><span class="hs-identifier hs-type">throwIO</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679076743"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="#local-6989586621679076742"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076742"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076743"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076741"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-128"></span><span id="throwIO"><span class="annot"><span class="annottext">throwIO :: e -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#throwIO"><span class="hs-identifier hs-var hs-var">throwIO</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO a -&gt; m a) -&gt; (e -&gt; IO a) -&gt; e -&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">e -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">E.throwIO</span></span><span>
</span><span id="line-129"></span><span>
</span><span id="line-130"></span><span id="local-6989586621679076737"><span id="local-6989586621679076738"><span class="annot"><a href="System.Console.Haskeline.MonadException.html#throwTo"><span class="hs-identifier hs-type">throwTo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679076738"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Exception</span></span><span> </span><span class="annot"><a href="#local-6989586621679076737"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ThreadId</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076737"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679076738"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-131"></span><span id="throwTo"><span class="annot"><span class="annottext">throwTo :: ThreadId -&gt; e -&gt; m ()
</span><a href="System.Console.Haskeline.MonadException.html#throwTo"><span class="hs-identifier hs-var hs-var">throwTo</span></a></span></span><span> </span><span id="local-6989586621679076736"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621679076736"><span class="hs-identifier hs-var">tid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; (e -&gt; IO ()) -&gt; e -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ThreadId -&gt; e -&gt; IO ()
forall e. Exception e =&gt; ThreadId -&gt; e -&gt; IO ()
</span><span class="hs-identifier hs-var">E.throwTo</span></span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621679076736"><span class="hs-identifier hs-var">tid</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="hs-comment">----------</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- Instances of MonadException.</span><span>
</span><span id="line-135"></span><span class="hs-comment">-- Since implementations of this class are non-obvious to a casual user,</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- we provide instances for nearly everything in the transformers package.</span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-139"></span><span>    </span><span id="local-6989586621679076731"><span class="annot"><span class="annottext">controlIO :: (RunIO IO -&gt; IO (IO a)) -&gt; IO a
</span><a href="#local-6989586621679076731"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076730"><span class="annot"><span class="annottext">RunIO IO -&gt; IO (IO a)
</span><a href="#local-6989586621679076730"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO (IO a) -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(IO (IO a) -&gt; IO a) -&gt; IO (IO a) -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO IO -&gt; IO (IO a)
</span><a href="#local-6989586621679076730"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(forall b. IO b -&gt; IO (IO b)) -&gt; RunIO IO
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(b -&gt; IO b) -&gt; IO b -&gt; IO (IO b)
forall (m :: * -&gt; *) a1 r. Monad m =&gt; (a1 -&gt; r) -&gt; m a1 -&gt; m r
</span><span class="hs-identifier hs-var">liftM</span></span><span> </span><span class="annot"><span class="annottext">b -&gt; IO b
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-comment">-- Note: it's crucial that we use &quot;liftM return&quot; instead of &quot;return&quot; here.</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-comment">-- For example, in &quot;finally thing end&quot;, this ensures that &quot;end&quot; will always run, </span><span>
</span><span id="line-142"></span><span>    </span><span class="hs-comment">-- regardless of whether an mzero occurred inside of &quot;thing&quot;.</span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span id="local-6989586621679076728"><span id="local-6989586621679076729"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076729"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076728"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076729"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>    </span><span id="local-6989586621679076725"><span class="annot"><span class="annottext">controlIO :: (RunIO (ReaderT r m) -&gt; IO (ReaderT r m a)) -&gt; ReaderT r m a
</span><a href="#local-6989586621679076725"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076724"><span class="annot"><span class="annottext">RunIO (ReaderT r m) -&gt; IO (ReaderT r m a)
</span><a href="#local-6989586621679076724"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; m a) -&gt; ReaderT r m a
forall r (m :: * -&gt; *) a. (r -&gt; m a) -&gt; ReaderT r m a
</span><span class="hs-identifier hs-var">ReaderT</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; m a) -&gt; ReaderT r m a) -&gt; (r -&gt; m a) -&gt; ReaderT r m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076722"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076722"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m a)) -&gt; m a
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m a)) -&gt; m a) -&gt; (RunIO m -&gt; IO (m a)) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076721"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076721"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-146"></span><span>                    </span><span id="local-6989586621679076720"><span class="annot"><span class="annottext">run' :: RunIO (ReaderT r m)
</span><a href="#local-6989586621679076720"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. ReaderT r m b -&gt; IO (ReaderT r m b))
-&gt; RunIO (ReaderT r m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m b -&gt; ReaderT r m b) -&gt; IO (m b) -&gt; IO (ReaderT r m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(r -&gt; m b) -&gt; ReaderT r m b
forall r (m :: * -&gt; *) a. (r -&gt; m a) -&gt; ReaderT r m a
</span><span class="hs-identifier hs-var">ReaderT</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; m b) -&gt; ReaderT r m b)
-&gt; (m b -&gt; r -&gt; m b) -&gt; m b -&gt; ReaderT r m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m b -&gt; r -&gt; m b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (m b) -&gt; IO (ReaderT r m b))
-&gt; (ReaderT r m b -&gt; IO (m b))
-&gt; ReaderT r m b
-&gt; IO (ReaderT r m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m b -&gt; IO (m b)
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076721"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m b -&gt; IO (m b))
-&gt; (ReaderT r m b -&gt; m b) -&gt; ReaderT r m b -&gt; IO (m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ReaderT r m b -&gt; r -&gt; m b) -&gt; r -&gt; ReaderT r m b -&gt; m b
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ReaderT r m b -&gt; r -&gt; m b
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076722"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-147"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(ReaderT r m a -&gt; m a) -&gt; IO (ReaderT r m a) -&gt; IO (m a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(ReaderT r m a -&gt; r -&gt; m a) -&gt; r -&gt; ReaderT r m a -&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ReaderT r m a -&gt; r -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076722"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (ReaderT r m a) -&gt; IO (m a)) -&gt; IO (ReaderT r m a) -&gt; IO (m a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (ReaderT r m) -&gt; IO (ReaderT r m a)
</span><a href="#local-6989586621679076724"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (ReaderT r m)
</span><a href="#local-6989586621679076720"><span class="hs-identifier hs-var">run'</span></a></span></span></span><span>
</span><span id="line-148"></span><span>
</span><span id="line-149"></span><span id="local-6989586621679076716"><span id="local-6989586621679076717"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076717"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StateT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076716"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076717"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679076713"><span class="annot"><span class="annottext">controlIO :: (RunIO (StateT s m) -&gt; IO (StateT s m a)) -&gt; StateT s m a
</span><a href="#local-6989586621679076713"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076712"><span class="annot"><span class="annottext">RunIO (StateT s m) -&gt; IO (StateT s m a)
</span><a href="#local-6989586621679076712"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(s -&gt; m (a, s)) -&gt; StateT s m a
forall s (m :: * -&gt; *) a. (s -&gt; m (a, s)) -&gt; StateT s m a
</span><span class="hs-identifier hs-var">StateT</span></span><span> </span><span class="annot"><span class="annottext">((s -&gt; m (a, s)) -&gt; StateT s m a)
-&gt; (s -&gt; m (a, s)) -&gt; StateT s m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076710"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076710"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m (a, s))) -&gt; m (a, s)
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m (a, s))) -&gt; m (a, s))
-&gt; (RunIO m -&gt; IO (m (a, s))) -&gt; m (a, s)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076709"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076709"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-151"></span><span>                    </span><span id="local-6989586621679076708"><span class="annot"><span class="annottext">run' :: RunIO (StateT s m)
</span><a href="#local-6989586621679076708"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. StateT s m b -&gt; IO (StateT s m b)) -&gt; RunIO (StateT s m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (b, s) -&gt; StateT s m b) -&gt; IO (m (b, s)) -&gt; IO (StateT s m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(s -&gt; m (b, s)) -&gt; StateT s m b
forall s (m :: * -&gt; *) a. (s -&gt; m (a, s)) -&gt; StateT s m a
</span><span class="hs-identifier hs-var">StateT</span></span><span> </span><span class="annot"><span class="annottext">((s -&gt; m (b, s)) -&gt; StateT s m b)
-&gt; (m (b, s) -&gt; s -&gt; m (b, s)) -&gt; m (b, s) -&gt; StateT s m b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (b, s) -&gt; s -&gt; m (b, s)
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (m (b, s)) -&gt; IO (StateT s m b))
-&gt; (StateT s m b -&gt; IO (m (b, s)))
-&gt; StateT s m b
-&gt; IO (StateT s m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (b, s) -&gt; IO (m (b, s))
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076709"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m (b, s) -&gt; IO (m (b, s)))
-&gt; (StateT s m b -&gt; m (b, s)) -&gt; StateT s m b -&gt; IO (m (b, s))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(StateT s m b -&gt; s -&gt; m (b, s)) -&gt; s -&gt; StateT s m b -&gt; m (b, s)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">StateT s m b -&gt; s -&gt; m (b, s)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076710"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-152"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(StateT s m a -&gt; m (a, s)) -&gt; IO (StateT s m a) -&gt; IO (m (a, s))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(StateT s m a -&gt; s -&gt; m (a, s)) -&gt; s -&gt; StateT s m a -&gt; m (a, s)
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">StateT s m a -&gt; s -&gt; m (a, s)
forall s (m :: * -&gt; *) a. StateT s m a -&gt; s -&gt; m (a, s)
</span><span class="hs-identifier hs-var hs-var">runStateT</span></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076710"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (StateT s m a) -&gt; IO (m (a, s)))
-&gt; IO (StateT s m a) -&gt; IO (m (a, s))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (StateT s m) -&gt; IO (StateT s m a)
</span><a href="#local-6989586621679076712"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (StateT s m)
</span><a href="#local-6989586621679076708"><span class="hs-identifier hs-var">run'</span></a></span></span></span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span id="local-6989586621679076706"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076706"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MaybeT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076706"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-155"></span><span>    </span><span id="local-6989586621679076703"><span class="annot"><span class="annottext">controlIO :: (RunIO (MaybeT m) -&gt; IO (MaybeT m a)) -&gt; MaybeT m a
</span><a href="#local-6989586621679076703"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076702"><span class="annot"><span class="annottext">RunIO (MaybeT m) -&gt; IO (MaybeT m a)
</span><a href="#local-6989586621679076702"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Maybe a) -&gt; MaybeT m a
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe a) -&gt; MaybeT m a) -&gt; m (Maybe a) -&gt; MaybeT m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m (Maybe a))) -&gt; m (Maybe a)
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m (Maybe a))) -&gt; m (Maybe a))
-&gt; (RunIO m -&gt; IO (m (Maybe a))) -&gt; m (Maybe a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076700"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076700"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-156"></span><span>                    </span><span id="local-6989586621679076699"><span class="annot"><span class="annottext">run' :: RunIO (MaybeT m)
</span><a href="#local-6989586621679076699"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. MaybeT m b -&gt; IO (MaybeT m b)) -&gt; RunIO (MaybeT m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (Maybe b) -&gt; MaybeT m b) -&gt; IO (m (Maybe b)) -&gt; IO (MaybeT m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe b) -&gt; MaybeT m b
forall (m :: * -&gt; *) a. m (Maybe a) -&gt; MaybeT m a
</span><span class="hs-identifier hs-var">MaybeT</span></span><span> </span><span class="annot"><span class="annottext">(IO (m (Maybe b)) -&gt; IO (MaybeT m b))
-&gt; (MaybeT m b -&gt; IO (m (Maybe b)))
-&gt; MaybeT m b
-&gt; IO (MaybeT m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (Maybe b) -&gt; IO (m (Maybe b))
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076700"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Maybe b) -&gt; IO (m (Maybe b)))
-&gt; (MaybeT m b -&gt; m (Maybe b)) -&gt; MaybeT m b -&gt; IO (m (Maybe b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MaybeT m b -&gt; m (Maybe b)
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span class="hs-special">)</span><span>
</span><span id="line-157"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(MaybeT m a -&gt; m (Maybe a)) -&gt; IO (MaybeT m a) -&gt; IO (m (Maybe a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">MaybeT m a -&gt; m (Maybe a)
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var hs-var">runMaybeT</span></span><span> </span><span class="annot"><span class="annottext">(IO (MaybeT m a) -&gt; IO (m (Maybe a)))
-&gt; IO (MaybeT m a) -&gt; IO (m (Maybe a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (MaybeT m) -&gt; IO (MaybeT m a)
</span><a href="#local-6989586621679076702"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (MaybeT m)
</span><a href="#local-6989586621679076699"><span class="hs-identifier hs-var">run'</span></a></span></span><span> </span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span id="local-6989586621679076696"><span id="local-6989586621679076697"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076697"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Error</span></span><span> </span><span class="annot"><a href="#local-6989586621679076696"><span class="hs-identifier hs-type">e</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ErrorT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076696"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076697"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621679076693"><span class="annot"><span class="annottext">controlIO :: (RunIO (ErrorT e m) -&gt; IO (ErrorT e m a)) -&gt; ErrorT e m a
</span><a href="#local-6989586621679076693"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076692"><span class="annot"><span class="annottext">RunIO (ErrorT e m) -&gt; IO (ErrorT e m a)
</span><a href="#local-6989586621679076692"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Either e a) -&gt; ErrorT e m a
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ErrorT e m a
</span><span class="hs-identifier hs-var">ErrorT</span></span><span> </span><span class="annot"><span class="annottext">(m (Either e a) -&gt; ErrorT e m a) -&gt; m (Either e a) -&gt; ErrorT e m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m (Either e a))) -&gt; m (Either e a)
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m (Either e a))) -&gt; m (Either e a))
-&gt; (RunIO m -&gt; IO (m (Either e a))) -&gt; m (Either e a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076690"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076690"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-161"></span><span>                    </span><span id="local-6989586621679076689"><span class="annot"><span class="annottext">run' :: RunIO (ErrorT e m)
</span><a href="#local-6989586621679076689"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. ErrorT e m b -&gt; IO (ErrorT e m b)) -&gt; RunIO (ErrorT e m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (Either e b) -&gt; ErrorT e m b)
-&gt; IO (m (Either e b)) -&gt; IO (ErrorT e m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">m (Either e b) -&gt; ErrorT e m b
forall e (m :: * -&gt; *) a. m (Either e a) -&gt; ErrorT e m a
</span><span class="hs-identifier hs-var">ErrorT</span></span><span> </span><span class="annot"><span class="annottext">(IO (m (Either e b)) -&gt; IO (ErrorT e m b))
-&gt; (ErrorT e m b -&gt; IO (m (Either e b)))
-&gt; ErrorT e m b
-&gt; IO (ErrorT e m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (Either e b) -&gt; IO (m (Either e b))
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076690"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Either e b) -&gt; IO (m (Either e b)))
-&gt; (ErrorT e m b -&gt; m (Either e b))
-&gt; ErrorT e m b
-&gt; IO (m (Either e b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ErrorT e m b -&gt; m (Either e b)
forall e (m :: * -&gt; *) a. ErrorT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var hs-var">runErrorT</span></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(ErrorT e m a -&gt; m (Either e a))
-&gt; IO (ErrorT e m a) -&gt; IO (m (Either e a))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ErrorT e m a -&gt; m (Either e a)
forall e (m :: * -&gt; *) a. ErrorT e m a -&gt; m (Either e a)
</span><span class="hs-identifier hs-var hs-var">runErrorT</span></span><span> </span><span class="annot"><span class="annottext">(IO (ErrorT e m a) -&gt; IO (m (Either e a)))
-&gt; IO (ErrorT e m a) -&gt; IO (m (Either e a))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (ErrorT e m) -&gt; IO (ErrorT e m a)
</span><a href="#local-6989586621679076692"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (ErrorT e m)
forall e. RunIO (ErrorT e m)
</span><a href="#local-6989586621679076689"><span class="hs-identifier hs-var">run'</span></a></span></span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621679076687"><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076687"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ListT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076687"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-165"></span><span>    </span><span id="local-6989586621679076684"><span class="annot"><span class="annottext">controlIO :: (RunIO (ListT m) -&gt; IO (ListT m a)) -&gt; ListT m a
</span><a href="#local-6989586621679076684"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076683"><span class="annot"><span class="annottext">RunIO (ListT m) -&gt; IO (ListT m a)
</span><a href="#local-6989586621679076683"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m [a] -&gt; ListT m a
forall (m :: * -&gt; *) a. m [a] -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(m [a] -&gt; ListT m a) -&gt; m [a] -&gt; ListT m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m [a])) -&gt; m [a]
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m [a])) -&gt; m [a])
-&gt; (RunIO m -&gt; IO (m [a])) -&gt; m [a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076681"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076681"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-166"></span><span>                    </span><span id="local-6989586621679076680"><span class="annot"><span class="annottext">run' :: RunIO (ListT m)
</span><a href="#local-6989586621679076680"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. ListT m b -&gt; IO (ListT m b)) -&gt; RunIO (ListT m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m [b] -&gt; ListT m b) -&gt; IO (m [b]) -&gt; IO (ListT m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">m [b] -&gt; ListT m b
forall (m :: * -&gt; *) a. m [a] -&gt; ListT m a
</span><span class="hs-identifier hs-var">ListT</span></span><span> </span><span class="annot"><span class="annottext">(IO (m [b]) -&gt; IO (ListT m b))
-&gt; (ListT m b -&gt; IO (m [b])) -&gt; ListT m b -&gt; IO (ListT m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m [b] -&gt; IO (m [b])
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076681"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m [b] -&gt; IO (m [b]))
-&gt; (ListT m b -&gt; m [b]) -&gt; ListT m b -&gt; IO (m [b])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ListT m b -&gt; m [b]
forall (m :: * -&gt; *) a. ListT m a -&gt; m [a]
</span><span class="hs-identifier hs-var hs-var">runListT</span></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(ListT m a -&gt; m [a]) -&gt; IO (ListT m a) -&gt; IO (m [a])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">ListT m a -&gt; m [a]
forall (m :: * -&gt; *) a. ListT m a -&gt; m [a]
</span><span class="hs-identifier hs-var hs-var">runListT</span></span><span> </span><span class="annot"><span class="annottext">(IO (ListT m a) -&gt; IO (m [a])) -&gt; IO (ListT m a) -&gt; IO (m [a])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (ListT m) -&gt; IO (ListT m a)
</span><a href="#local-6989586621679076683"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (ListT m)
</span><a href="#local-6989586621679076680"><span class="hs-identifier hs-var">run'</span></a></span></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621679076677"><span id="local-6989586621679076678"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679076678"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076677"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WriterT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076678"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076677"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>    </span><span id="local-6989586621679076674"><span class="annot"><span class="annottext">controlIO :: (RunIO (WriterT w m) -&gt; IO (WriterT w m a)) -&gt; WriterT w m a
</span><a href="#local-6989586621679076674"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076673"><span class="annot"><span class="annottext">RunIO (WriterT w m) -&gt; IO (WriterT w m a)
</span><a href="#local-6989586621679076673"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (a, w) -&gt; WriterT w m a
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><span class="hs-identifier hs-var">WriterT</span></span><span> </span><span class="annot"><span class="annottext">(m (a, w) -&gt; WriterT w m a) -&gt; m (a, w) -&gt; WriterT w m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m (a, w))) -&gt; m (a, w)
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m (a, w))) -&gt; m (a, w))
-&gt; (RunIO m -&gt; IO (m (a, w))) -&gt; m (a, w)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076671"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076671"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-171"></span><span>                    </span><span id="local-6989586621679076670"><span class="annot"><span class="annottext">run' :: RunIO (WriterT w m)
</span><a href="#local-6989586621679076670"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. WriterT w m b -&gt; IO (WriterT w m b))
-&gt; RunIO (WriterT w m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (b, w) -&gt; WriterT w m b) -&gt; IO (m (b, w)) -&gt; IO (WriterT w m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">m (b, w) -&gt; WriterT w m b
forall w (m :: * -&gt; *) a. m (a, w) -&gt; WriterT w m a
</span><span class="hs-identifier hs-var">WriterT</span></span><span> </span><span class="annot"><span class="annottext">(IO (m (b, w)) -&gt; IO (WriterT w m b))
-&gt; (WriterT w m b -&gt; IO (m (b, w)))
-&gt; WriterT w m b
-&gt; IO (WriterT w m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (b, w) -&gt; IO (m (b, w))
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076671"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m (b, w) -&gt; IO (m (b, w)))
-&gt; (WriterT w m b -&gt; m (b, w)) -&gt; WriterT w m b -&gt; IO (m (b, w))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WriterT w m b -&gt; m (b, w)
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var hs-var">runWriterT</span></span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(WriterT w m a -&gt; m (a, w)) -&gt; IO (WriterT w m a) -&gt; IO (m (a, w))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">WriterT w m a -&gt; m (a, w)
forall w (m :: * -&gt; *) a. WriterT w m a -&gt; m (a, w)
</span><span class="hs-identifier hs-var hs-var">runWriterT</span></span><span> </span><span class="annot"><span class="annottext">(IO (WriterT w m a) -&gt; IO (m (a, w)))
-&gt; IO (WriterT w m a) -&gt; IO (m (a, w))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (WriterT w m) -&gt; IO (WriterT w m a)
</span><a href="#local-6989586621679076673"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (WriterT w m)
forall w. RunIO (WriterT w m)
</span><a href="#local-6989586621679076670"><span class="hs-identifier hs-var">run'</span></a></span></span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span id="local-6989586621679076665"><span id="local-6989586621679076666"><span id="local-6989586621679076667"><span id="local-6989586621679076668"><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="#local-6989586621679076668"><span class="hs-identifier hs-type">w</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076667"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">RWST</span></span><span> </span><span class="annot"><a href="#local-6989586621679076666"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076668"><span class="hs-identifier hs-type">w</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076665"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076667"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>    </span><span id="local-6989586621679076662"><span class="annot"><span class="annottext">controlIO :: (RunIO (RWST r w s m) -&gt; IO (RWST r w s m a)) -&gt; RWST r w s m a
</span><a href="#local-6989586621679076662"><span class="hs-identifier hs-var hs-var hs-var hs-var">controlIO</span></a></span></span><span> </span><span id="local-6989586621679076661"><span class="annot"><span class="annottext">RunIO (RWST r w s m) -&gt; IO (RWST r w s m a)
</span><a href="#local-6989586621679076661"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; s -&gt; m (a, s, w)) -&gt; RWST r w s m a
forall r w s (m :: * -&gt; *) a.
(r -&gt; s -&gt; m (a, s, w)) -&gt; RWST r w s m a
</span><span class="hs-identifier hs-var">RWST</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; s -&gt; m (a, s, w)) -&gt; RWST r w s m a)
-&gt; (r -&gt; s -&gt; m (a, s, w)) -&gt; RWST r w s m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679076659"><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076659"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621679076658"><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076658"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RunIO m -&gt; IO (m (a, s, w))) -&gt; m (a, s, w)
forall (m :: * -&gt; *) a.
MonadException m =&gt;
(RunIO m -&gt; IO (m a)) -&gt; m a
</span><a href="System.Console.Haskeline.MonadException.html#controlIO"><span class="hs-identifier hs-var">controlIO</span></a></span><span> </span><span class="annot"><span class="annottext">((RunIO m -&gt; IO (m (a, s, w))) -&gt; m (a, s, w))
-&gt; (RunIO m -&gt; IO (m (a, s, w))) -&gt; m (a, s, w)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-type">RunIO</span></a></span><span> </span><span id="local-6989586621679076657"><span class="annot"><span class="annottext">forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076657"><span class="hs-identifier hs-var">run</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-176"></span><span>                    </span><span id="local-6989586621679076656"><span class="annot"><span class="annottext">run' :: RunIO (RWST r w s m)
</span><a href="#local-6989586621679076656"><span class="hs-identifier hs-var hs-var">run'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall b. RWST r w s m b -&gt; IO (RWST r w s m b))
-&gt; RunIO (RWST r w s m)
forall (m :: * -&gt; *). (forall b. m b -&gt; IO (m b)) -&gt; RunIO m
</span><a href="System.Console.Haskeline.MonadException.html#RunIO"><span class="hs-identifier hs-var">RunIO</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(m (b, s, w) -&gt; RWST r w s m b)
-&gt; IO (m (b, s, w)) -&gt; IO (RWST r w s m b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076655"><span class="annot"><span class="annottext">m (b, s, w)
</span><a href="#local-6989586621679076655"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(r -&gt; s -&gt; m (b, s, w)) -&gt; RWST r w s m b
forall r w s (m :: * -&gt; *) a.
(r -&gt; s -&gt; m (a, s, w)) -&gt; RWST r w s m a
</span><span class="hs-identifier hs-var">RWST</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="annot"><span class="annottext">r
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">s
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (b, s, w)
</span><a href="#local-6989586621679076655"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>                                    </span><span class="annot"><span class="annottext">(IO (m (b, s, w)) -&gt; IO (RWST r w s m b))
-&gt; (RWST r w s m b -&gt; IO (m (b, s, w)))
-&gt; RWST r w s m b
-&gt; IO (RWST r w s m b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m (b, s, w) -&gt; IO (m (b, s, w))
forall b. m b -&gt; IO (m b)
</span><a href="#local-6989586621679076657"><span class="hs-identifier hs-var">run</span></a></span><span> </span><span class="annot"><span class="annottext">(m (b, s, w) -&gt; IO (m (b, s, w)))
-&gt; (RWST r w s m b -&gt; m (b, s, w))
-&gt; RWST r w s m b
-&gt; IO (m (b, s, w))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076654"><span class="annot"><span class="annottext">RWST r w s m b
</span><a href="#local-6989586621679076654"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RWST r w s m b -&gt; r -&gt; s -&gt; m (b, s, w)
forall r w s (m :: * -&gt; *) a.
RWST r w s m a -&gt; r -&gt; s -&gt; m (a, s, w)
</span><span class="hs-identifier hs-var hs-var">runRWST</span></span><span> </span><span class="annot"><span class="annottext">RWST r w s m b
</span><a href="#local-6989586621679076654"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076659"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076658"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-178"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(RWST r w s m a -&gt; m (a, s, w))
-&gt; IO (RWST r w s m a) -&gt; IO (m (a, s, w))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679076652"><span class="annot"><span class="annottext">RWST r w s m a
</span><a href="#local-6989586621679076652"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RWST r w s m a -&gt; r -&gt; s -&gt; m (a, s, w)
forall r w s (m :: * -&gt; *) a.
RWST r w s m a -&gt; r -&gt; s -&gt; m (a, s, w)
</span><span class="hs-identifier hs-var hs-var">runRWST</span></span><span> </span><span class="annot"><span class="annottext">RWST r w s m a
</span><a href="#local-6989586621679076652"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">r
</span><a href="#local-6989586621679076659"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">s
</span><a href="#local-6989586621679076658"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (RWST r w s m a) -&gt; IO (m (a, s, w)))
-&gt; IO (RWST r w s m a) -&gt; IO (m (a, s, w))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RunIO (RWST r w s m) -&gt; IO (RWST r w s m a)
</span><a href="#local-6989586621679076661"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">RunIO (RWST r w s m)
forall w. RunIO (RWST r w s m)
</span><a href="#local-6989586621679076656"><span class="hs-identifier hs-var">run'</span></a></span></span></span></span></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span id="local-6989586621679076648"><span id="local-6989586621679076651"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679076651"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="System.Console.Haskeline.MonadException.html#MonadException"><span class="hs-identifier hs-type">MonadException</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">IdentityT</span></span><span> </span><span class="annot"><a href="#local-6989586621679076651"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-181"></span></pre></body></html>