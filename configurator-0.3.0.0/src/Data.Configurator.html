<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns, OverloadedStrings, RecordWildCards,
    ScopedTypeVariables, TupleSections #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="hs-comment">-- |</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- Module:      Data.Configurator</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- Copyright:   (c) 2011 MailRank, Inc.</span><span>
</span><span id="line-7"></span><span class="hs-comment">-- License:     BSD3</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- Maintainer:  Bryan O'Sullivan &lt;bos@serpentine.com&gt;</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- Stability:   experimental</span><span>
</span><span id="line-10"></span><span class="hs-comment">-- Portability: portable</span><span>
</span><span id="line-11"></span><span class="hs-comment">--</span><span>
</span><span id="line-12"></span><span class="hs-comment">-- A simple (yet powerful) library for working with configuration</span><span>
</span><span id="line-13"></span><span class="hs-comment">-- files.</span><span>
</span><span id="line-14"></span><span>
</span><span id="line-15"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Configurator</span><span>
</span><span id="line-16"></span><span>    </span><span class="hs-special">(</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Configuration file format</span></span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><span class="hs-comment">-- $format</span></span><span>
</span><span id="line-19"></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Binding a name to a value</span></span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><span class="hs-comment">-- $binding</span></span><span>
</span><span id="line-22"></span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** Value types</span></span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><span class="hs-comment">-- $types</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><span class="hs-comment">-- *** String interpolation</span></span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><span class="hs-comment">-- $interp</span></span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Grouping directives</span></span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><span class="hs-comment">-- $group</span></span><span>
</span><span id="line-31"></span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-comment">-- ** Importing files</span></span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-comment">-- $import</span></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Types</span></span><span>
</span><span id="line-36"></span><span>      </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier">Worth</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Loading configuration data</span></span><span>
</span><span id="line-38"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#autoReload"><span class="hs-identifier">autoReload</span></a></span><span>
</span><span id="line-39"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier">autoReloadGroups</span></a></span><span>
</span><span id="line-40"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#autoConfig"><span class="hs-identifier">autoConfig</span></a></span><span>
</span><span id="line-41"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#empty"><span class="hs-identifier">empty</span></a></span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Lookup functions</span></span><span>
</span><span id="line-43"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#lookup"><span class="hs-identifier">lookup</span></a></span><span>
</span><span id="line-44"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#lookupDefault"><span class="hs-identifier">lookupDefault</span></a></span><span>
</span><span id="line-45"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#require"><span class="hs-identifier">require</span></a></span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Notification of configuration changes</span></span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><span class="hs-comment">-- $notify</span></span><span>
</span><span id="line-48"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#prefix"><span class="hs-identifier">prefix</span></a></span><span>
</span><span id="line-49"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#exact"><span class="hs-identifier">exact</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#subscribe"><span class="hs-identifier">subscribe</span></a></span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Low-level loading functions</span></span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#load"><span class="hs-identifier">load</span></a></span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#loadGroups"><span class="hs-identifier">loadGroups</span></a></span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#reload"><span class="hs-identifier">reload</span></a></span><span>
</span><span id="line-55"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#subconfig"><span class="hs-identifier">subconfig</span></a></span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#addToConfig"><span class="hs-identifier">addToConfig</span></a></span><span>
</span><span id="line-57"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#addGroupsToConfig"><span class="hs-identifier">addGroupsToConfig</span></a></span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Helper functions</span></span><span>
</span><span id="line-59"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#display"><span class="hs-identifier">display</span></a></span><span>
</span><span id="line-60"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.html#getMap"><span class="hs-identifier">getMap</span></a></span><span>
</span><span id="line-61"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ThreadId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">forkIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">threadDelay</span></span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SomeException</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">evaluate</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">handle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">throwIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">try</span></span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">forM</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">forM_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">join</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">when</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">msum</span></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Configurator.Instances.html"><span class="hs-identifier">Data.Configurator.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Configurator.Parser.html"><span class="hs-identifier">Data.Configurator.Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Parser.html#interp"><span class="hs-identifier">interp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Parser.html#topLevel"><span class="hs-identifier">topLevel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html"><span class="hs-identifier">Data.Configurator.Types.Internal</span></a></span><span>
</span><span id="line-69"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.IORef</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">atomicModifyIORef</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">newIORef</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">readIORef</span></span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">tails</span></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromMaybe</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">isJust</span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Ratio</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">denominator</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">numerator</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.Builder</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">fromText</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">toLazyText</span></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.Builder.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">decimal</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.Builder.RealFloat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">realFloat</span></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">lookup</span></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Environment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getEnv</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">hPutStrLn</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">stderr</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO.Unsafe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unsafePerformIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Posix.Types</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EpochTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FileOffset</span></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.PosixCompat.Files</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fileSize</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">getFileStatus</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">modificationTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Exception</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">E</span></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Attoparsec.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Attoparsec.Text.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text.Lazy.IO</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-89"></span><span>
</span><span id="line-90"></span><span class="annot"><a href="Data.Configurator.html#loadFiles"><span class="hs-identifier hs-type">loadFiles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Directive"><span class="hs-identifier hs-type">Directive</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span id="loadFiles"><span class="annot"><span class="annottext">loadFiles :: [Worth Path] -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="Data.Configurator.html#loadFiles"><span class="hs-identifier hs-var hs-var">loadFiles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HashMap (Worth Path) [Directive]
 -&gt; Worth Path -&gt; IO (HashMap (Worth Path) [Directive]))
-&gt; HashMap (Worth Path) [Directive]
-&gt; [Worth Path]
-&gt; IO (HashMap (Worth Path) [Directive])
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
-&gt; Worth Path -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="#local-6989586621679056323"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span>
</span><span id="line-92"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>   </span><span id="local-6989586621679056323"><span class="annot"><span class="annottext">go :: HashMap (Worth Path) [Directive]
-&gt; Worth Path -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="#local-6989586621679056323"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679056321"><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056321"><span class="hs-identifier hs-var">seen</span></a></span></span><span> </span><span id="local-6989586621679056320"><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056320"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-94"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056319"><span class="annot"><span class="annottext">rewrap :: b -&gt; Worth b
</span><a href="#local-6989586621679056319"><span class="hs-identifier hs-var hs-var">rewrap</span></a></span></span><span> </span><span id="local-6989586621679056318"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056318"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; Path -&gt; b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056318"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; b) -&gt; Worth Path -&gt; Worth b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056320"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-95"></span><span>         </span><span id="local-6989586621679056315"><span class="annot"><span class="annottext">wpath :: Path
</span><a href="#local-6989586621679056315"><span class="hs-identifier hs-var hs-var">wpath</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Worth Path -&gt; Path
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056320"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-96"></span><span>     </span><span id="local-6989586621679056313"><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056313"><span class="hs-identifier hs-var">path'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Worth Path
forall b. b -&gt; Worth b
</span><a href="#local-6989586621679056319"><span class="hs-identifier hs-var">rewrap</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Worth Path) -&gt; IO Path -&gt; IO (Worth Path)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; HashMap Path Value -&gt; IO Path
</span><a href="Data.Configurator.html#interpolate"><span class="hs-identifier hs-var">interpolate</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056315"><span class="hs-identifier hs-var">wpath</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span>
</span><span id="line-97"></span><span>     </span><span id="local-6989586621679056311"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056311"><span class="hs-identifier hs-var">ds</span></a></span></span><span>    </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Worth FilePath -&gt; IO [Directive]
</span><a href="Data.Configurator.html#loadOne"><span class="hs-identifier hs-var">loadOne</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; FilePath
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; FilePath) -&gt; Worth Path -&gt; Worth FilePath
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056313"><span class="hs-identifier hs-var">path'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span class="hs-glyph">!</span><span id="local-6989586621679056308"><span class="annot"><span class="annottext">seen' :: HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056308"><span class="hs-identifier hs-var hs-var">seen'</span></a></span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Worth Path
-&gt; [Directive]
-&gt; HashMap (Worth Path) [Directive]
-&gt; HashMap (Worth Path) [Directive]
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">H.insert</span></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056320"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056311"><span class="hs-identifier hs-var">ds</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056321"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-99"></span><span>         </span><span id="local-6989586621679056306"><span class="annot"><span class="annottext">notSeen :: Worth Path -&gt; Bool
</span><a href="#local-6989586621679056306"><span class="hs-identifier hs-var hs-var">notSeen</span></a></span></span><span> </span><span id="local-6989586621679056305"><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056305"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; (HashMap (Worth Path) [Directive] -&gt; Bool)
-&gt; HashMap (Worth Path) [Directive]
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe [Directive] -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe [Directive] -&gt; Bool)
-&gt; (HashMap (Worth Path) [Directive] -&gt; Maybe [Directive])
-&gt; HashMap (Worth Path) [Directive]
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Worth Path -&gt; HashMap (Worth Path) [Directive] -&gt; Maybe [Directive]
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056305"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap (Worth Path) [Directive] -&gt; Bool)
-&gt; HashMap (Worth Path) [Directive] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056321"><span class="hs-identifier hs-var">seen</span></a></span><span>
</span><span id="line-100"></span><span>     </span><span class="annot"><span class="annottext">(HashMap (Worth Path) [Directive]
 -&gt; Worth Path -&gt; IO (HashMap (Worth Path) [Directive]))
-&gt; HashMap (Worth Path) [Directive]
-&gt; [Worth Path]
-&gt; IO (HashMap (Worth Path) [Directive])
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
-&gt; Worth Path -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="#local-6989586621679056323"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056308"><span class="hs-identifier hs-var">seen'</span></a></span><span> </span><span class="annot"><span class="annottext">([Worth Path] -&gt; IO (HashMap (Worth Path) [Directive]))
-&gt; ([Directive] -&gt; [Worth Path])
-&gt; [Directive]
-&gt; IO (HashMap (Worth Path) [Directive])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Worth Path -&gt; Bool) -&gt; [Worth Path] -&gt; [Worth Path]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">Worth Path -&gt; Bool
</span><a href="#local-6989586621679056306"><span class="hs-identifier hs-var">notSeen</span></a></span><span> </span><span class="annot"><span class="annottext">([Worth Path] -&gt; [Worth Path])
-&gt; ([Directive] -&gt; [Worth Path]) -&gt; [Directive] -&gt; [Worth Path]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056315"><span class="hs-identifier hs-var">wpath</span></a></span><span> </span><span class="annot"><span class="annottext">([Directive] -&gt; IO (HashMap (Worth Path) [Directive]))
-&gt; [Directive] -&gt; IO (HashMap (Worth Path) [Directive])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056311"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-comment">-- | Create a 'Config' from the contents of the named files. Throws an</span><span>
</span><span id="line-103"></span><span class="hs-comment">-- exception on error, such as if files do not exist or contain errors.</span><span>
</span><span id="line-104"></span><span class="hs-comment">--</span><span>
</span><span id="line-105"></span><span class="hs-comment">-- File names have any environment variables expanded prior to the</span><span>
</span><span id="line-106"></span><span class="hs-comment">-- first time they are opened, so you can specify a file name such as</span><span>
</span><span id="line-107"></span><span class="hs-comment">-- @\&quot;$(HOME)/myapp.cfg\&quot;@.</span><span>
</span><span id="line-108"></span><span class="annot"><a href="Data.Configurator.html#load"><span class="hs-identifier hs-type">load</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-109"></span><span id="load"><span class="annot"><span class="annottext">load :: [Worth FilePath] -&gt; IO Config
</span><a href="Data.Configurator.html#load"><span class="hs-identifier hs-var hs-var">load</span></a></span></span><span> </span><span id="local-6989586621679056300"><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056300"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BaseConfig -&gt; Config) -&gt; IO BaseConfig -&gt; IO Config
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; BaseConfig -&gt; Config
</span><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO BaseConfig -&gt; IO Config) -&gt; IO BaseConfig -&gt; IO Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO BaseConfig
</span><a href="Data.Configurator.html#load%27"><span class="hs-identifier hs-var">load'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Worth FilePath -&gt; (Path, Worth FilePath))
-&gt; [Worth FilePath] -&gt; [(Path, Worth FilePath)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679056297"><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056297"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056297"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056300"><span class="hs-identifier hs-var">files</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="hs-comment">-- | Create a 'Config' from the contents of the named files, placing them</span><span>
</span><span id="line-112"></span><span class="hs-comment">-- into named prefixes.  If a prefix is non-empty, it should end in a</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- dot.</span><span>
</span><span id="line-114"></span><span class="annot"><a href="Data.Configurator.html#loadGroups"><span class="hs-identifier hs-type">loadGroups</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-115"></span><span id="loadGroups"><span class="annot"><span class="annottext">loadGroups :: [(Path, Worth FilePath)] -&gt; IO Config
</span><a href="Data.Configurator.html#loadGroups"><span class="hs-identifier hs-var hs-var">loadGroups</span></a></span></span><span> </span><span id="local-6989586621679056295"><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056295"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(BaseConfig -&gt; Config) -&gt; IO BaseConfig -&gt; IO Config
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; BaseConfig -&gt; Config
</span><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO BaseConfig -&gt; IO Config) -&gt; IO BaseConfig -&gt; IO Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO BaseConfig
</span><a href="Data.Configurator.html#load%27"><span class="hs-identifier hs-var">load'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056295"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><a href="Data.Configurator.html#load%27"><span class="hs-identifier hs-type">load'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span>
</span><span id="line-118"></span><span id="load%27"><span class="annot"><span class="annottext">load' :: Maybe AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO BaseConfig
</span><a href="Data.Configurator.html#load%27"><span class="hs-identifier hs-var hs-var">load'</span></a></span></span><span> </span><span id="local-6989586621679056294"><span class="annot"><span class="annottext">Maybe AutoConfig
</span><a href="#local-6989586621679056294"><span class="hs-identifier hs-var">auto</span></a></span></span><span> </span><span id="local-6989586621679056293"><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056293"><span class="hs-identifier hs-var">paths0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056292"><span class="annot"><span class="annottext">second :: (t -&gt; b) -&gt; (a, t) -&gt; (a, b)
</span><a href="#local-6989586621679056292"><span class="hs-identifier hs-var hs-var">second</span></a></span></span><span> </span><span id="local-6989586621679056291"><span class="annot"><span class="annottext">t -&gt; b
</span><a href="#local-6989586621679056291"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679056290"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056290"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679056289"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679056289"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056290"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">t -&gt; b
</span><a href="#local-6989586621679056291"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679056289"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-120"></span><span>      </span><span id="local-6989586621679056288"><span class="annot"><span class="annottext">paths :: [(Path, Worth Path)]
</span><a href="#local-6989586621679056288"><span class="hs-identifier hs-var hs-var">paths</span></a></span></span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Path, Worth FilePath) -&gt; (Path, Worth Path))
-&gt; [(Path, Worth FilePath)] -&gt; [(Path, Worth Path)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Worth FilePath -&gt; Worth Path)
-&gt; (Path, Worth FilePath) -&gt; (Path, Worth Path)
forall t b a. (t -&gt; b) -&gt; (a, t) -&gt; (a, b)
</span><a href="#local-6989586621679056292"><span class="hs-identifier hs-var">second</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(FilePath -&gt; Path) -&gt; Worth FilePath -&gt; Worth Path
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Path
</span><span class="hs-identifier hs-var">T.pack</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056293"><span class="hs-identifier hs-var">paths0</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621679056286"><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056286"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Worth Path] -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="Data.Configurator.html#loadFiles"><span class="hs-identifier hs-var">loadFiles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Path, Worth Path) -&gt; Worth Path)
-&gt; [(Path, Worth Path)] -&gt; [Worth Path]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Path, Worth Path) -&gt; Worth Path
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056288"><span class="hs-identifier hs-var">paths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621679056285"><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056285"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)] -&gt; IO (IORef [(Path, Worth Path)])
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056288"><span class="hs-identifier hs-var">paths</span></a></span><span>
</span><span id="line-123"></span><span>  </span><span id="local-6989586621679056284"><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056284"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (IORef (HashMap Path Value))
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; IO (IORef (HashMap Path Value)))
-&gt; IO (HashMap Path Value) -&gt; IO (IORef (HashMap Path Value))
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
-&gt; HashMap (Worth Path) [Directive] -&gt; IO (HashMap Path Value)
</span><a href="Data.Configurator.html#flatten"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056288"><span class="hs-identifier hs-var">paths</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056286"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-124"></span><span>  </span><span id="local-6989586621679056281"><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056281"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
-&gt; IO (IORef (HashMap Pattern [ChangeHandler]))
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span>
</span><span id="line-125"></span><span>  </span><span class="annot"><span class="annottext">BaseConfig -&gt; IO BaseConfig
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">BaseConfig :: Maybe AutoConfig
-&gt; IORef [(Path, Worth Path)]
-&gt; IORef (HashMap Path Value)
-&gt; IORef (HashMap Pattern [ChangeHandler])
-&gt; BaseConfig
</span><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-126"></span><span>                </span><span class="annot"><span class="annottext">cfgAuto :: Maybe AutoConfig
</span><a href="Data.Configurator.Types.Internal.html#cfgAuto"><span class="hs-identifier hs-var">cfgAuto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig
</span><a href="#local-6989586621679056294"><span class="hs-identifier hs-var">auto</span></a></span><span>
</span><span id="line-127"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgPaths :: IORef [(Path, Worth Path)]
</span><a href="Data.Configurator.Types.Internal.html#cfgPaths"><span class="hs-identifier hs-var">cfgPaths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056285"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-128"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgMap :: IORef (HashMap Path Value)
</span><a href="Data.Configurator.Types.Internal.html#cfgMap"><span class="hs-identifier hs-var">cfgMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056284"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-129"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
</span><a href="Data.Configurator.Types.Internal.html#cfgSubs"><span class="hs-identifier hs-var">cfgSubs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056281"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-130"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-131"></span><span>
</span><span id="line-132"></span><span class="hs-comment">-- | Gives a 'Config' corresponding to just a single group of the original</span><span>
</span><span id="line-133"></span><span class="hs-comment">-- 'Config'.  The subconfig can be used just like the original 'Config', but</span><span>
</span><span id="line-134"></span><span class="hs-comment">-- see the documentation for 'reload'.</span><span>
</span><span id="line-135"></span><span class="annot"><a href="Data.Configurator.html#subconfig"><span class="hs-identifier hs-type">subconfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-136"></span><span id="subconfig"><span class="annot"><span class="annottext">subconfig :: Path -&gt; Config -&gt; Config
</span><a href="Data.Configurator.html#subconfig"><span class="hs-identifier hs-var hs-var">subconfig</span></a></span></span><span> </span><span id="local-6989586621679056275"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056275"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span id="local-6989586621679056274"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056274"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span id="local-6989586621679056273"><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056273"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; BaseConfig -&gt; Config
</span><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Path] -&gt; Path
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056274"><span class="hs-identifier hs-var">root</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056275"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056273"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="hs-comment">-- | Forcibly reload a 'Config'. Throws an exception on error, such as</span><span>
</span><span id="line-139"></span><span class="hs-comment">-- if files no longer exist or contain errors.  If the provided 'Config' is</span><span>
</span><span id="line-140"></span><span class="hs-comment">-- a 'subconfig', this will reload the entire top-level configuration, not just</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- the local section.</span><span>
</span><span id="line-142"></span><span class="annot"><a href="Data.Configurator.html#reload"><span class="hs-identifier hs-type">reload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-143"></span><span id="reload"><span class="annot"><span class="annottext">reload :: Config -&gt; IO ()
</span><a href="Data.Configurator.html#reload"><span class="hs-identifier hs-var hs-var">reload</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679056271"><span class="annot"><span class="annottext">cfg :: BaseConfig
</span><a href="#local-6989586621679056271"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056267"><span id="local-6989586621679056268"><span id="local-6989586621679056269"><span id="local-6989586621679056270"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056267"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BaseConfig -&gt; IO ()
</span><a href="Data.Configurator.html#reloadBase"><span class="hs-identifier hs-var">reloadBase</span></a></span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056271"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><a href="Data.Configurator.html#reloadBase"><span class="hs-identifier hs-type">reloadBase</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-146"></span><span id="reloadBase"><span class="annot"><span class="annottext">reloadBase :: BaseConfig -&gt; IO ()
</span><a href="Data.Configurator.html#reloadBase"><span class="hs-identifier hs-var hs-var">reloadBase</span></a></span></span><span> </span><span id="local-6989586621679056265"><span class="annot"><span class="annottext">cfg :: BaseConfig
</span><a href="#local-6989586621679056265"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056261"><span id="local-6989586621679056262"><span id="local-6989586621679056263"><span id="local-6989586621679056264"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056261"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-147"></span><span>  </span><span id="local-6989586621679056260"><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056260"><span class="hs-identifier hs-var">paths</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)] -&gt; IO [(Path, Worth Path)]
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056263"><span class="hs-identifier hs-var">cfgPaths</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679056259"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056259"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
-&gt; HashMap (Worth Path) [Directive] -&gt; IO (HashMap Path Value)
</span><a href="Data.Configurator.html#flatten"><span class="hs-identifier hs-var">flatten</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056260"><span class="hs-identifier hs-var">paths</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap (Worth Path) [Directive] -&gt; IO (HashMap Path Value))
-&gt; IO (HashMap (Worth Path) [Directive]) -&gt; IO (HashMap Path Value)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Worth Path] -&gt; IO (HashMap (Worth Path) [Directive])
</span><a href="Data.Configurator.html#loadFiles"><span class="hs-identifier hs-var">loadFiles</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Path, Worth Path) -&gt; Worth Path)
-&gt; [(Path, Worth Path)] -&gt; [Worth Path]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Path, Worth Path) -&gt; Worth Path
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056260"><span class="hs-identifier hs-var">paths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>  </span><span id="local-6989586621679056258"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056258"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
-&gt; (HashMap Path Value -&gt; (HashMap Path Value, HashMap Path Value))
-&gt; IO (HashMap Path Value)
forall a b. IORef a -&gt; (a -&gt; (a, b)) -&gt; IO b
</span><span class="hs-identifier hs-var">atomicModifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056262"><span class="hs-identifier hs-var">cfgMap</span></a></span><span> </span><span class="annot"><span class="annottext">((HashMap Path Value -&gt; (HashMap Path Value, HashMap Path Value))
 -&gt; IO (HashMap Path Value))
-&gt; (HashMap Path Value -&gt; (HashMap Path Value, HashMap Path Value))
-&gt; IO (HashMap Path Value)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679056257"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056257"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056259"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056257"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>  </span><span class="annot"><span class="annottext">BaseConfig
-&gt; HashMap Path Value
-&gt; HashMap Path Value
-&gt; HashMap Pattern [ChangeHandler]
-&gt; IO ()
</span><a href="Data.Configurator.html#notifySubscribers"><span class="hs-identifier hs-var">notifySubscribers</span></a></span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056265"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056258"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056259"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap Pattern [ChangeHandler] -&gt; IO ())
-&gt; IO (HashMap Pattern [ChangeHandler]) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
-&gt; IO (HashMap Pattern [ChangeHandler])
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056261"><span class="hs-identifier hs-var">cfgSubs</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span class="hs-comment">-- | Add additional files to a 'Config', causing it to be reloaded to add</span><span>
</span><span id="line-153"></span><span class="hs-comment">-- their contents.</span><span>
</span><span id="line-154"></span><span class="annot"><a href="Data.Configurator.html#addToConfig"><span class="hs-identifier hs-type">addToConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-155"></span><span id="addToConfig"><span class="annot"><span class="annottext">addToConfig :: [Worth FilePath] -&gt; Config -&gt; IO ()
</span><a href="Data.Configurator.html#addToConfig"><span class="hs-identifier hs-var hs-var">addToConfig</span></a></span></span><span> </span><span id="local-6989586621679056255"><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056255"><span class="hs-identifier hs-var">paths0</span></a></span></span><span> </span><span id="local-6989586621679056254"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056254"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)] -&gt; Config -&gt; IO ()
</span><a href="Data.Configurator.html#addGroupsToConfig"><span class="hs-identifier hs-var">addGroupsToConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Worth FilePath -&gt; (Path, Worth FilePath))
-&gt; [Worth FilePath] -&gt; [(Path, Worth FilePath)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679056253"><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056253"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056253"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056255"><span class="hs-identifier hs-var">paths0</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056254"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span class="hs-comment">-- | Add additional files to named groups in a 'Config', causing it to be</span><span>
</span><span id="line-158"></span><span class="hs-comment">-- reloaded to add their contents.  If the prefixes are non-empty, they should</span><span>
</span><span id="line-159"></span><span class="hs-comment">-- end in dots.</span><span>
</span><span id="line-160"></span><span class="annot"><a href="Data.Configurator.html#addGroupsToConfig"><span class="hs-identifier hs-type">addGroupsToConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span id="addGroupsToConfig"><span class="annot"><span class="annottext">addGroupsToConfig :: [(Path, Worth FilePath)] -&gt; Config -&gt; IO ()
</span><a href="Data.Configurator.html#addGroupsToConfig"><span class="hs-identifier hs-var hs-var">addGroupsToConfig</span></a></span></span><span> </span><span id="local-6989586621679056252"><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056252"><span class="hs-identifier hs-var">paths0</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span id="local-6989586621679056251"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056251"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span id="local-6989586621679056250"><span class="annot"><span class="annottext">cfg :: BaseConfig
</span><a href="#local-6989586621679056250"><span class="hs-identifier hs-var">cfg</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056246"><span id="local-6989586621679056247"><span id="local-6989586621679056248"><span id="local-6989586621679056249"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056246"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056245"><span class="annot"><span class="annottext">fix :: (Path, f FilePath) -&gt; (Path, f Path)
</span><a href="#local-6989586621679056245"><span class="hs-identifier hs-var hs-var">fix</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679056244"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056244"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679056243"><span class="annot"><span class="annottext">f FilePath
</span><a href="#local-6989586621679056243"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056251"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056244"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; Path) -&gt; f FilePath -&gt; f Path
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; Path
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">f FilePath
</span><a href="#local-6989586621679056243"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>      </span><span id="local-6989586621679056241"><span class="annot"><span class="annottext">paths :: [(Path, Worth Path)]
</span><a href="#local-6989586621679056241"><span class="hs-identifier hs-var hs-var">paths</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Path, Worth FilePath) -&gt; (Path, Worth Path))
-&gt; [(Path, Worth FilePath)] -&gt; [(Path, Worth Path)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Path, Worth FilePath) -&gt; (Path, Worth Path)
forall (f :: * -&gt; *).
Functor f =&gt;
(Path, f FilePath) -&gt; (Path, f Path)
</span><a href="#local-6989586621679056245"><span class="hs-identifier hs-var">fix</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056252"><span class="hs-identifier hs-var">paths0</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
-&gt; ([(Path, Worth Path)] -&gt; ([(Path, Worth Path)], ())) -&gt; IO ()
forall a b. IORef a -&gt; (a -&gt; (a, b)) -&gt; IO b
</span><span class="hs-identifier hs-var">atomicModifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056248"><span class="hs-identifier hs-var">cfgPaths</span></a></span><span> </span><span class="annot"><span class="annottext">(([(Path, Worth Path)] -&gt; ([(Path, Worth Path)], ())) -&gt; IO ())
-&gt; ([(Path, Worth Path)] -&gt; ([(Path, Worth Path)], ())) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679056240"><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056240"><span class="hs-identifier hs-var">prev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056240"><span class="hs-identifier hs-var">prev</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
-&gt; [(Path, Worth Path)] -&gt; [(Path, Worth Path)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056241"><span class="hs-identifier hs-var">paths</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>  </span><span class="annot"><span class="annottext">BaseConfig -&gt; IO ()
</span><a href="Data.Configurator.html#reloadBase"><span class="hs-identifier hs-var">reloadBase</span></a></span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056250"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-166"></span><span>
</span><span id="line-167"></span><span class="hs-comment">-- | Defaults for automatic 'Config' reloading when using</span><span>
</span><span id="line-168"></span><span class="hs-comment">-- 'autoReload'.  The 'interval' is one second, while the 'onError'</span><span>
</span><span id="line-169"></span><span class="hs-comment">-- action ignores its argument and does nothing.</span><span>
</span><span id="line-170"></span><span class="annot"><a href="Data.Configurator.html#autoConfig"><span class="hs-identifier hs-type">autoConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span>
</span><span id="line-171"></span><span id="autoConfig"><span class="annot"><span class="annottext">autoConfig :: AutoConfig
</span><a href="Data.Configurator.html#autoConfig"><span class="hs-identifier hs-var hs-var">autoConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoConfig :: Int -&gt; (SomeException -&gt; IO ()) -&gt; AutoConfig
</span><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-172"></span><span>               </span><span class="annot"><span class="annottext">interval :: Int
</span><a href="Data.Configurator.Types.Internal.html#interval"><span class="hs-identifier hs-var">interval</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-173"></span><span>             </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">onError :: SomeException -&gt; IO ()
</span><a href="Data.Configurator.Types.Internal.html#onError"><span class="hs-identifier hs-var">onError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; SomeException -&gt; IO ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; SomeException -&gt; IO ())
-&gt; IO () -&gt; SomeException -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-174"></span><span>             </span><span class="hs-special">}</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-comment">-- | Load a 'Config' from the given 'FilePath's, and start a reload</span><span>
</span><span id="line-177"></span><span class="hs-comment">-- thread.</span><span>
</span><span id="line-178"></span><span class="hs-comment">--</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- At intervals, a thread checks for modifications to both the</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- original files and any files they refer to in @import@ directives,</span><span>
</span><span id="line-181"></span><span class="hs-comment">-- and reloads the 'Config' if any files have been modified.</span><span>
</span><span id="line-182"></span><span class="hs-comment">--</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- If the initial attempt to load the configuration files fails, an</span><span>
</span><span id="line-184"></span><span class="hs-comment">-- exception is thrown.  If the initial load succeeds, but a</span><span>
</span><span id="line-185"></span><span class="hs-comment">-- subsequent attempt fails, the 'onError' handler is invoked.</span><span>
</span><span id="line-186"></span><span class="hs-comment">--</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- File names have any environment variables expanded prior to the</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- first time they are opened, so you can specify a file name such as</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- @\&quot;$(HOME)/myapp.cfg\&quot;@.</span><span>
</span><span id="line-190"></span><span class="annot"><a href="Data.Configurator.html#autoReload"><span class="hs-identifier hs-type">autoReload</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span>
</span><span id="line-191"></span><span>           </span><span class="hs-comment">-- ^ Directions for when to reload and how to handle</span><span>
</span><span id="line-192"></span><span>           </span><span class="hs-comment">-- errors.</span><span>
</span><span id="line-193"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span>           </span><span class="hs-comment">-- ^ Configuration files to load.</span><span>
</span><span id="line-195"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ThreadId</span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span id="autoReload"><span class="annot"><span class="annottext">autoReload :: AutoConfig -&gt; [Worth FilePath] -&gt; IO (Config, ThreadId)
</span><a href="Data.Configurator.html#autoReload"><span class="hs-identifier hs-var hs-var">autoReload</span></a></span></span><span> </span><span id="local-6989586621679056236"><span class="annot"><span class="annottext">AutoConfig
</span><a href="#local-6989586621679056236"><span class="hs-identifier hs-var">auto</span></a></span></span><span> </span><span id="local-6989586621679056235"><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056235"><span class="hs-identifier hs-var">paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO (Config, ThreadId)
</span><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier hs-var">autoReloadGroups</span></a></span><span> </span><span class="annot"><span class="annottext">AutoConfig
</span><a href="#local-6989586621679056236"><span class="hs-identifier hs-var">auto</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Worth FilePath -&gt; (Path, Worth FilePath))
-&gt; [Worth FilePath] -&gt; [(Path, Worth FilePath)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679056234"><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056234"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056234"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056235"><span class="hs-identifier hs-var">paths</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier hs-type">autoReloadGroups</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span>
</span><span id="line-199"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-200"></span><span>                 </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ThreadId</span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span id="autoReloadGroups"><span class="annot"><span class="annottext">autoReloadGroups :: AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO (Config, ThreadId)
</span><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier hs-var hs-var">autoReloadGroups</span></a></span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056232"><span id="local-6989586621679056233"><span class="annot"><span class="annottext">Int
SomeException -&gt; IO ()
onError :: SomeException -&gt; IO ()
interval :: Int
onError :: AutoConfig -&gt; SomeException -&gt; IO ()
interval :: AutoConfig -&gt; Int
</span><a href="#local-6989586621679056232"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><span class="hs-identifier">_</span></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679056233"><span class="hs-identifier hs-var">interval</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>    </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (Config, ThreadId)
forall a. HasCallStack =&gt; FilePath -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;autoReload: negative interval&quot;</span></span><span>
</span><span id="line-203"></span><span class="annot"><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier hs-var">autoReloadGroups</span></a></span><span> </span><span class="annot"><span class="annottext">AutoConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO (Config, ThreadId)
forall a. HasCallStack =&gt; FilePath -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;autoReload: no paths to load&quot;</span></span><span>
</span><span id="line-204"></span><span class="annot"><a href="Data.Configurator.html#autoReloadGroups"><span class="hs-identifier hs-var">autoReloadGroups</span></a></span><span> </span><span id="local-6989586621679056229"><span class="annot"><span class="annottext">auto :: AutoConfig
</span><a href="#local-6989586621679056229"><span class="hs-identifier hs-var">auto</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#AutoConfig"><span class="hs-identifier hs-type">AutoConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056227"><span id="local-6989586621679056228"><span class="annot"><span class="annottext">Int
SomeException -&gt; IO ()
onError :: SomeException -&gt; IO ()
interval :: Int
onError :: AutoConfig -&gt; SomeException -&gt; IO ()
interval :: AutoConfig -&gt; Int
</span><a href="#local-6989586621679056227"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679056226"><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056226"><span class="hs-identifier hs-var">paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-205"></span><span>  </span><span id="local-6989586621679056225"><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056225"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig -&gt; [(Path, Worth FilePath)] -&gt; IO BaseConfig
</span><a href="Data.Configurator.html#load%27"><span class="hs-identifier hs-var">load'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AutoConfig -&gt; Maybe AutoConfig
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">AutoConfig
</span><a href="#local-6989586621679056229"><span class="hs-identifier hs-var">auto</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056226"><span class="hs-identifier hs-var">paths</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056224"><span class="annot"><span class="annottext">files :: [Worth FilePath]
</span><a href="#local-6989586621679056224"><span class="hs-identifier hs-var hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Path, Worth FilePath) -&gt; Worth FilePath)
-&gt; [(Path, Worth FilePath)] -&gt; [Worth FilePath]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Path, Worth FilePath) -&gt; Worth FilePath
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth FilePath)]
</span><a href="#local-6989586621679056226"><span class="hs-identifier hs-var">paths</span></a></span><span>
</span><span id="line-207"></span><span>      </span><span id="local-6989586621679056223"><span class="annot"><span class="annottext">loop :: [Maybe Meta] -&gt; IO b
</span><a href="#local-6989586621679056223"><span class="hs-identifier hs-var hs-var">loop</span></a></span></span><span> </span><span id="local-6989586621679056222"><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056222"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>        </span><span class="annot"><span class="annottext">Int -&gt; IO ()
</span><span class="hs-identifier hs-var">threadDelay</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679056228"><span class="hs-identifier hs-var">interval</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1000000</span></span><span class="hs-special">)</span><span>
</span><span id="line-209"></span><span>        </span><span id="local-6989586621679056219"><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056219"><span class="hs-identifier hs-var">meta'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Worth FilePath] -&gt; IO [Maybe Meta]
</span><a href="Data.Configurator.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056224"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-210"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056219"><span class="hs-identifier hs-var">meta'</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta] -&gt; [Maybe Meta] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056222"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-211"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Maybe Meta] -&gt; IO b
</span><a href="#local-6989586621679056223"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056222"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-212"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BaseConfig -&gt; IO ()
</span><a href="Data.Configurator.html#reloadBase"><span class="hs-identifier hs-var">reloadBase</span></a></span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056225"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (SomeException -&gt; IO ()) -&gt; IO ()
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO ()
</span><a href="#local-6989586621679056227"><span class="hs-identifier hs-var">onError</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO b -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta] -&gt; IO b
</span><a href="#local-6989586621679056223"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta]
</span><a href="#local-6989586621679056219"><span class="hs-identifier hs-var">meta'</span></a></span><span>
</span><span id="line-213"></span><span>  </span><span id="local-6989586621679056216"><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621679056216"><span class="hs-identifier hs-var">tid</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; IO ThreadId
</span><span class="hs-identifier hs-var">forkIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ThreadId) -&gt; IO () -&gt; IO ThreadId
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Maybe Meta] -&gt; IO ()
forall b. [Maybe Meta] -&gt; IO b
</span><a href="#local-6989586621679056223"><span class="hs-identifier hs-var">loop</span></a></span><span> </span><span class="annot"><span class="annottext">([Maybe Meta] -&gt; IO ()) -&gt; IO [Maybe Meta] -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[Worth FilePath] -&gt; IO [Maybe Meta]
</span><a href="Data.Configurator.html#getMeta"><span class="hs-identifier hs-var">getMeta</span></a></span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056224"><span class="hs-identifier hs-var">files</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="annottext">(Config, ThreadId) -&gt; IO (Config, ThreadId)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; BaseConfig -&gt; Config
</span><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">BaseConfig
</span><a href="#local-6989586621679056225"><span class="hs-identifier hs-var">cfg</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ThreadId
</span><a href="#local-6989586621679056216"><span class="hs-identifier hs-var">tid</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>
</span><span id="line-216"></span><span class="hs-comment">-- | Save both a file's size and its last modification date, so we</span><span>
</span><span id="line-217"></span><span class="hs-comment">-- have a better chance of detecting a modification on a crappy</span><span>
</span><span id="line-218"></span><span class="hs-comment">-- filesystem with timestamp resolution of 1 second or worse.</span><span>
</span><span id="line-219"></span><span class="hs-keyword">type</span><span> </span><span id="Meta"><span class="annot"><a href="Data.Configurator.html#Meta"><span class="hs-identifier hs-var">Meta</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FileOffset</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>
</span><span id="line-221"></span><span class="annot"><a href="Data.Configurator.html#getMeta"><span class="hs-identifier hs-type">getMeta</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Data.Configurator.html#Meta"><span class="hs-identifier hs-type">Meta</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-222"></span><span id="getMeta"><span class="annot"><span class="annottext">getMeta :: [Worth FilePath] -&gt; IO [Maybe Meta]
</span><a href="Data.Configurator.html#getMeta"><span class="hs-identifier hs-var hs-var">getMeta</span></a></span></span><span> </span><span id="local-6989586621679056215"><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056215"><span class="hs-identifier hs-var">paths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
-&gt; (Worth FilePath -&gt; IO (Maybe Meta)) -&gt; IO [Maybe Meta]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m (t b)
</span><span class="hs-identifier hs-var">forM</span></span><span> </span><span class="annot"><span class="annottext">[Worth FilePath]
</span><a href="#local-6989586621679056215"><span class="hs-identifier hs-var">paths</span></a></span><span> </span><span class="annot"><span class="annottext">((Worth FilePath -&gt; IO (Maybe Meta)) -&gt; IO [Maybe Meta])
-&gt; (Worth FilePath -&gt; IO (Maybe Meta)) -&gt; IO [Maybe Meta]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679056214"><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056214"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-223"></span><span>   </span><span class="annot"><span class="annottext">(SomeException -&gt; IO (Maybe Meta))
-&gt; IO (Maybe Meta) -&gt; IO (Maybe Meta)
forall e a. Exception e =&gt; (e -&gt; IO a) -&gt; IO a -&gt; IO a
</span><span class="hs-identifier hs-var">handle</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException
</span><span class="hs-identifier">_</span></span><span class="hs-glyph">::</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Meta -&gt; IO (Maybe Meta)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Maybe Meta
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Meta) -&gt; IO (Maybe Meta))
-&gt; (IO Meta -&gt; IO (Maybe Meta)) -&gt; IO Meta -&gt; IO (Maybe Meta)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Meta -&gt; Maybe Meta) -&gt; IO Meta -&gt; IO (Maybe Meta)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Meta -&gt; Maybe Meta
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(IO Meta -&gt; IO (Maybe Meta)) -&gt; IO Meta -&gt; IO (Maybe Meta)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-224"></span><span>     </span><span id="local-6989586621679056213"><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621679056213"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FileStatus
</span><span class="hs-identifier hs-var">getFileStatus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Worth FilePath -&gt; FilePath
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056214"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>     </span><span class="annot"><span class="annottext">Meta -&gt; IO Meta
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FileStatus -&gt; FileOffset
</span><span class="hs-identifier hs-var">fileSize</span></span><span> </span><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621679056213"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">FileStatus -&gt; EpochTime
</span><span class="hs-identifier hs-var">modificationTime</span></span><span> </span><span class="annot"><span class="annottext">FileStatus
</span><a href="#local-6989586621679056213"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>
</span><span id="line-227"></span><span class="hs-comment">-- | Look up a name in the given 'Config'.  If a binding exists, and</span><span>
</span><span id="line-228"></span><span class="hs-comment">-- the value can be 'convert'ed to the desired type, return the</span><span>
</span><span id="line-229"></span><span class="hs-comment">-- converted value, otherwise 'Nothing'.</span><span>
</span><span id="line-230"></span><span id="local-6989586621679056442"><span class="annot"><a href="Data.Configurator.html#lookup"><span class="hs-identifier hs-type">lookup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Configured"><span class="hs-identifier hs-type">Configured</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679056442"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679056442"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-231"></span><span id="lookup"><span class="annot"><span class="annottext">lookup :: Config -&gt; Path -&gt; IO (Maybe a)
</span><a href="Data.Configurator.html#lookup"><span class="hs-identifier hs-var hs-var">lookup</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span id="local-6989586621679056212"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056212"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056208"><span id="local-6989586621679056209"><span id="local-6989586621679056210"><span id="local-6989586621679056211"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056208"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679056207"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056207"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (Maybe a) -&gt; Maybe a
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Maybe a) -&gt; Maybe a)
-&gt; (HashMap Path Value -&gt; Maybe (Maybe a))
-&gt; HashMap Path Value
-&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe a) -&gt; Maybe Value -&gt; Maybe (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe a
forall a. Configured a =&gt; Value -&gt; Maybe a
</span><a href="Data.Configurator.Types.Internal.html#convert"><span class="hs-identifier hs-var">convert</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Value -&gt; Maybe (Maybe a))
-&gt; (HashMap Path Value -&gt; Maybe Value)
-&gt; HashMap Path Value
-&gt; Maybe (Maybe a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056212"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056207"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; Maybe a)
-&gt; IO (HashMap Path Value) -&gt; IO (Maybe a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value) -&gt; IO (HashMap Path Value)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056209"><span class="hs-identifier hs-var">cfgMap</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="hs-comment">-- | Look up a name in the given 'Config'.  If a binding exists, and</span><span>
</span><span id="line-235"></span><span class="hs-comment">-- the value can be 'convert'ed to the desired type, return the</span><span>
</span><span id="line-236"></span><span class="hs-comment">-- converted value, otherwise throw a 'KeyError'.</span><span>
</span><span id="line-237"></span><span id="local-6989586621679056205"><span class="annot"><a href="Data.Configurator.html#require"><span class="hs-identifier hs-type">require</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Configured"><span class="hs-identifier hs-type">Configured</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679056205"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679056205"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-238"></span><span id="require"><span class="annot"><span class="annottext">require :: Config -&gt; Path -&gt; IO a
</span><a href="Data.Configurator.html#require"><span class="hs-identifier hs-var hs-var">require</span></a></span></span><span> </span><span id="local-6989586621679056204"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056204"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679056203"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056203"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-239"></span><span>  </span><span id="local-6989586621679056202"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679056202"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Config -&gt; Path -&gt; IO (Maybe a)
forall a. Configured a =&gt; Config -&gt; Path -&gt; IO (Maybe a)
</span><a href="Data.Configurator.html#lookup"><span class="hs-identifier hs-var">lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056204"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056203"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-240"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621679056202"><span class="hs-identifier hs-var">val</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679056201"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056201"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; IO a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056201"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">KeyError -&gt; IO a
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(KeyError -&gt; IO a) -&gt; (Path -&gt; KeyError) -&gt; Path -&gt; IO a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; KeyError
</span><a href="Data.Configurator.Types.Internal.html#KeyError"><span class="hs-identifier hs-var">KeyError</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; IO a) -&gt; Path -&gt; IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056203"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-243"></span><span>
</span><span id="line-244"></span><span class="hs-comment">-- | Look up a name in the given 'Config'.  If a binding exists, and</span><span>
</span><span id="line-245"></span><span class="hs-comment">-- the value can be converted to the desired type, return it,</span><span>
</span><span id="line-246"></span><span class="hs-comment">-- otherwise return the default value.</span><span>
</span><span id="line-247"></span><span id="local-6989586621679056199"><span class="annot"><a href="Data.Configurator.html#lookupDefault"><span class="hs-identifier hs-type">lookupDefault</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Configured"><span class="hs-identifier hs-type">Configured</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679056199"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-248"></span><span>                 </span><span class="annot"><a href="#local-6989586621679056199"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-249"></span><span>              </span><span class="hs-comment">-- ^ Default value to return if 'lookup' or 'convert'</span><span>
</span><span id="line-250"></span><span>              </span><span class="hs-comment">-- fails.</span><span>
</span><span id="line-251"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679056199"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-252"></span><span id="lookupDefault"><span class="annot"><span class="annottext">lookupDefault :: a -&gt; Config -&gt; Path -&gt; IO a
</span><a href="Data.Configurator.html#lookupDefault"><span class="hs-identifier hs-var hs-var">lookupDefault</span></a></span></span><span> </span><span id="local-6989586621679056198"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056198"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span id="local-6989586621679056197"><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056197"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679056196"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056196"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a -&gt; a
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056198"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; a) -&gt; IO (Maybe a) -&gt; IO a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; Path -&gt; IO (Maybe a)
forall a. Configured a =&gt; Config -&gt; Path -&gt; IO (Maybe a)
</span><a href="Data.Configurator.html#lookup"><span class="hs-identifier hs-var">lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Config
</span><a href="#local-6989586621679056197"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056196"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="hs-comment">-- | Perform a simple dump of a 'Config' to @stdout@.</span><span>
</span><span id="line-255"></span><span class="annot"><a href="Data.Configurator.html#display"><span class="hs-identifier hs-type">display</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span id="display"><span class="annot"><span class="annottext">display :: Config -&gt; IO ()
</span><a href="Data.Configurator.html#display"><span class="hs-identifier hs-var hs-var">display</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span id="local-6989586621679056195"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056195"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056191"><span id="local-6989586621679056192"><span id="local-6989586621679056193"><span id="local-6989586621679056194"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056191"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Path, HashMap Path Value) -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><span class="hs-identifier hs-var">print</span></span><span> </span><span class="annot"><span class="annottext">((Path, HashMap Path Value) -&gt; IO ())
-&gt; (HashMap Path Value -&gt; (Path, HashMap Path Value))
-&gt; HashMap Path Value
-&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056195"><span class="hs-identifier hs-var">root</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; IO ()) -&gt; IO (HashMap Path Value) -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value) -&gt; IO (HashMap Path Value)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056192"><span class="hs-identifier hs-var">cfgMap</span></a></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-comment">-- | Fetch the 'H.HashMap' that maps names to values.</span><span>
</span><span id="line-259"></span><span class="annot"><a href="Data.Configurator.html#getMap"><span class="hs-identifier hs-type">getMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span id="getMap"><span class="annot"><span class="annottext">getMap :: Config -&gt; IO (HashMap Path Value)
</span><a href="Data.Configurator.html#getMap"><span class="hs-identifier hs-var hs-var">getMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value) -&gt; IO (HashMap Path Value)
forall a. IORef a -&gt; IO a
</span><span class="hs-identifier hs-var">readIORef</span></span><span> </span><span class="annot"><span class="annottext">(IORef (HashMap Path Value) -&gt; IO (HashMap Path Value))
-&gt; (Config -&gt; IORef (HashMap Path Value))
-&gt; Config
-&gt; IO (HashMap Path Value)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BaseConfig -&gt; IORef (HashMap Path Value)
</span><a href="Data.Configurator.Types.Internal.html#cfgMap"><span class="hs-identifier hs-var hs-var">cfgMap</span></a></span><span> </span><span class="annot"><span class="annottext">(BaseConfig -&gt; IORef (HashMap Path Value))
-&gt; (Config -&gt; BaseConfig) -&gt; Config -&gt; IORef (HashMap Path Value)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Config -&gt; BaseConfig
</span><a href="Data.Configurator.Types.Internal.html#baseCfg"><span class="hs-identifier hs-var hs-var">baseCfg</span></a></span><span>
</span><span id="line-261"></span><span>
</span><span id="line-262"></span><span class="annot"><a href="Data.Configurator.html#flatten"><span class="hs-identifier hs-type">flatten</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-263"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Directive"><span class="hs-identifier hs-type">Directive</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>        </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span id="flatten"><span class="annot"><span class="annottext">flatten :: [(Path, Worth Path)]
-&gt; HashMap (Worth Path) [Directive] -&gt; IO (HashMap Path Value)
</span><a href="Data.Configurator.html#flatten"><span class="hs-identifier hs-var hs-var">flatten</span></a></span></span><span> </span><span id="local-6989586621679056189"><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056189"><span class="hs-identifier hs-var">roots</span></a></span></span><span> </span><span id="local-6989586621679056188"><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056188"><span class="hs-identifier hs-var">files</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value
 -&gt; (Path, Worth Path) -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value
-&gt; [(Path, Worth Path)]
-&gt; IO (HashMap Path Value)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; (Path, Worth Path) -&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056187"><span class="hs-identifier hs-var">doPath</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)]
</span><a href="#local-6989586621679056189"><span class="hs-identifier hs-var">roots</span></a></span><span>
</span><span id="line-266"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-267"></span><span>  </span><span id="local-6989586621679056187"><span class="annot"><span class="annottext">doPath :: HashMap Path Value -&gt; (Path, Worth Path) -&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056187"><span class="hs-identifier hs-var hs-var">doPath</span></a></span></span><span> </span><span id="local-6989586621679056186"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056186"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679056185"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056185"><span class="hs-identifier hs-var">pfx</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679056184"><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056184"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Worth Path -&gt; HashMap (Worth Path) [Directive] -&gt; Maybe [Directive]
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056184"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056188"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-268"></span><span>        </span><span class="annot"><span class="annottext">Maybe [Directive]
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (HashMap Path Value)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056186"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-269"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679056183"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056183"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; Directive -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value -&gt; [Directive] -&gt; IO (HashMap Path Value)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
-&gt; Path
-&gt; HashMap Path Value
-&gt; Directive
-&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056185"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Worth Path -&gt; Path
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">Worth Path
</span><a href="#local-6989586621679056184"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056186"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056183"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span>  </span><span id="local-6989586621679056182"><span class="annot"><span class="annottext">directive :: Path
-&gt; Path
-&gt; HashMap Path Value
-&gt; Directive
-&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056182"><span class="hs-identifier hs-var hs-var">directive</span></a></span></span><span> </span><span id="local-6989586621679056181"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056181"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679056180"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056180"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span id="local-6989586621679056178"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056178"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span id="local-6989586621679056176"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056176"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-272"></span><span>      </span><span id="local-6989586621679056175"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056175"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; HashMap Path Value -&gt; IO Path
</span><a href="Data.Configurator.html#interpolate"><span class="hs-identifier hs-var">interpolate</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056181"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056176"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056180"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-273"></span><span>      </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (HashMap Path Value)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value -&gt; IO (HashMap Path Value)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Value -&gt; HashMap Path Value -&gt; HashMap Path Value
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">H.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-identifier hs-var">T.append</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056181"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056178"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Value
</span><a href="Data.Configurator.Types.Internal.html#String"><span class="hs-identifier hs-var">String</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056175"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056180"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-274"></span><span>  </span><span class="annot"><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span id="local-6989586621679056173"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056173"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679056172"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056172"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Bind"><span class="hs-identifier hs-type">Bind</span></a></span><span> </span><span id="local-6989586621679056171"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056171"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679056170"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056170"><span class="hs-identifier hs-var">value</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-275"></span><span>      </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (HashMap Path Value)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value -&gt; IO (HashMap Path Value)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$!</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Value -&gt; HashMap Path Value -&gt; HashMap Path Value
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">H.insert</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-identifier hs-var">T.append</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056173"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056171"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056170"><span class="hs-identifier hs-var">value</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056172"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-276"></span><span>  </span><span class="annot"><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span id="local-6989586621679056169"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056169"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span id="local-6989586621679056168"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056168"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679056167"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056167"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Group"><span class="hs-identifier hs-type">Group</span></a></span><span> </span><span id="local-6989586621679056165"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056165"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679056164"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056164"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; Directive -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value -&gt; [Directive] -&gt; IO (HashMap Path Value)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
-&gt; Path
-&gt; HashMap Path Value
-&gt; Directive
-&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056163"><span class="hs-identifier hs-var">pfx'</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056168"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056167"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056164"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-277"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679056163"><span class="annot"><span class="annottext">pfx' :: Path
</span><a href="#local-6989586621679056163"><span class="hs-identifier hs-var hs-var">pfx'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Path] -&gt; Path
</span><span class="hs-identifier hs-var">T.concat</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056169"><span class="hs-identifier hs-var">pfx</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056165"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-278"></span><span>  </span><span class="annot"><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span id="local-6989586621679056162"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056162"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span id="local-6989586621679056161"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056161"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621679056160"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056160"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Import"><span class="hs-identifier hs-type">Import</span></a></span><span> </span><span id="local-6989586621679056158"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056158"><span class="hs-identifier hs-var">path</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-279"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056157"><span class="annot"><span class="annottext">f' :: Path
</span><a href="#local-6989586621679056157"><span class="hs-identifier hs-var hs-var">f'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><a href="Data.Configurator.html#relativize"><span class="hs-identifier hs-var">relativize</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056161"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056158"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-280"></span><span>      </span><span class="hs-keyword">in</span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Worth Path -&gt; HashMap (Worth Path) [Directive] -&gt; Maybe [Directive]
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Worth Path
forall b. b -&gt; Worth b
</span><a href="Data.Configurator.Types.Internal.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><a href="Data.Configurator.html#relativize"><span class="hs-identifier hs-var">relativize</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056161"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056158"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap (Worth Path) [Directive]
</span><a href="#local-6989586621679056188"><span class="hs-identifier hs-var">files</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-281"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679056154"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056154"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(HashMap Path Value -&gt; Directive -&gt; IO (HashMap Path Value))
-&gt; HashMap Path Value -&gt; [Directive] -&gt; IO (HashMap Path Value)
forall (t :: * -&gt; *) (m :: * -&gt; *) b a.
(Foldable t, Monad m) =&gt;
(b -&gt; a -&gt; m b) -&gt; b -&gt; t a -&gt; m b
</span><span class="hs-identifier hs-var">foldM</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
-&gt; Path
-&gt; HashMap Path Value
-&gt; Directive
-&gt; IO (HashMap Path Value)
</span><a href="#local-6989586621679056182"><span class="hs-identifier hs-var">directive</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056162"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056157"><span class="hs-identifier hs-var">f'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056160"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056154"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-282"></span><span>            </span><span class="annot"><span class="annottext">Maybe [Directive]
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (HashMap Path Value)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056160"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-283"></span><span>
</span><span id="line-284"></span><span class="annot"><a href="Data.Configurator.html#interpolate"><span class="hs-identifier hs-type">interpolate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">T.Text</span></span><span>
</span><span id="line-285"></span><span id="interpolate"><span class="annot"><span class="annottext">interpolate :: Path -&gt; Path -&gt; HashMap Path Value -&gt; IO Path
</span><a href="Data.Configurator.html#interpolate"><span class="hs-identifier hs-var hs-var">interpolate</span></a></span></span><span> </span><span id="local-6989586621679056152"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056152"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span id="local-6989586621679056151"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056151"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621679056150"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056150"><span class="hs-identifier hs-var">env</span></a></span></span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;$&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
</span><span class="hs-operator hs-var">`T.isInfixOf`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056151"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-287"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Parser [Interpolate] -&gt; Path -&gt; Either FilePath [Interpolate]
forall a. Parser a -&gt; Path -&gt; Either FilePath a
</span><span class="hs-identifier hs-var">T.parseOnly</span></span><span> </span><span class="annot"><span class="annottext">Parser [Interpolate]
</span><a href="Data.Configurator.Parser.html#interp"><span class="hs-identifier hs-var">interp</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056151"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-288"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679056147"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056147"><span class="hs-identifier hs-var">err</span></a></span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConfigError -&gt; IO Path
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(ConfigError -&gt; IO Path) -&gt; ConfigError -&gt; IO Path
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; ConfigError
</span><a href="Data.Configurator.Types.Internal.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056147"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-289"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679056145"><span class="annot"><span class="annottext">[Interpolate]
</span><a href="#local-6989586621679056145"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Path
</span><span class="hs-identifier hs-var">L.toStrict</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Path) -&gt; ([Builder] -&gt; Text) -&gt; [Builder] -&gt; Path
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Builder -&gt; Text
</span><span class="hs-identifier hs-var">toLazyText</span></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; Text) -&gt; ([Builder] -&gt; Builder) -&gt; [Builder] -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Builder] -&gt; Builder
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Builder] -&gt; Path) -&gt; IO [Builder] -&gt; IO Path
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Interpolate -&gt; IO Builder) -&gt; [Interpolate] -&gt; IO [Builder]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">Interpolate -&gt; IO Builder
</span><a href="#local-6989586621679056142"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="annot"><span class="annottext">[Interpolate]
</span><a href="#local-6989586621679056145"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; IO Path
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056151"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-291"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>  </span><span id="local-6989586621679056141"><span class="annot"><span class="annottext">lookupEnv :: Path -&gt; Maybe Value
</span><a href="#local-6989586621679056141"><span class="hs-identifier hs-var hs-var">lookupEnv</span></a></span></span><span> </span><span id="local-6989586621679056140"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056140"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Maybe Value] -&gt; Maybe Value
forall (t :: * -&gt; *) (m :: * -&gt; *) a.
(Foldable t, MonadPlus m) =&gt;
t (m a) -&gt; m a
</span><span class="hs-identifier hs-var">msum</span></span><span> </span><span class="annot"><span class="annottext">([Maybe Value] -&gt; Maybe Value) -&gt; [Maybe Value] -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Maybe Value) -&gt; [Path] -&gt; [Maybe Value]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Path -&gt; HashMap Path Value -&gt; Maybe Value)
-&gt; HashMap Path Value -&gt; Path -&gt; Maybe Value
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056150"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Path]
</span><a href="#local-6989586621679056138"><span class="hs-identifier hs-var">fullnames</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679056138"><span class="annot"><span class="annottext">fullnames :: [Path]
</span><a href="#local-6989586621679056138"><span class="hs-identifier hs-var hs-var">fullnames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Path] -&gt; Path) -&gt; [[Path]] -&gt; [Path]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; [Path] -&gt; Path
</span><span class="hs-identifier hs-var">T.intercalate</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span>     </span><span class="hs-comment">-- [&quot;a.b.c.x&quot;,&quot;a.b.x&quot;,&quot;a.x&quot;,&quot;x&quot;]</span><span>
</span><span id="line-294"></span><span>                    </span><span class="annot"><span class="annottext">([[Path]] -&gt; [Path]) -&gt; (Path -&gt; [[Path]]) -&gt; Path -&gt; [Path]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">([Path] -&gt; [Path]) -&gt; [[Path]] -&gt; [[Path]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Path] -&gt; [Path]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">([Path] -&gt; [Path]) -&gt; ([Path] -&gt; [Path]) -&gt; [Path] -&gt; [Path]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056140"><span class="hs-identifier hs-var">name</span></a></span><span class="annot"><span class="annottext">Path -&gt; [Path] -&gt; [Path]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- [[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;x&quot;],[&quot;a&quot;,&quot;b&quot;,&quot;x&quot;],[&quot;a&quot;,&quot;x&quot;],[&quot;x&quot;]]</span><span>
</span><span id="line-295"></span><span>                    </span><span class="annot"><span class="annottext">([[Path]] -&gt; [[Path]]) -&gt; (Path -&gt; [[Path]]) -&gt; Path -&gt; [[Path]]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Path] -&gt; [[Path]]
forall a. [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">tails</span></span><span>                   </span><span class="hs-comment">-- [[&quot;c&quot;,&quot;b&quot;,&quot;a&quot;],[&quot;b&quot;,&quot;a&quot;],[&quot;a&quot;],[]]</span><span>
</span><span id="line-296"></span><span>                    </span><span class="annot"><span class="annottext">([Path] -&gt; [[Path]]) -&gt; (Path -&gt; [Path]) -&gt; Path -&gt; [[Path]]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Path] -&gt; [Path]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span>                 </span><span class="hs-comment">-- [&quot;c&quot;,&quot;b&quot;,&quot;a&quot;]</span><span>
</span><span id="line-297"></span><span>                    </span><span class="annot"><span class="annottext">([Path] -&gt; [Path]) -&gt; (Path -&gt; [Path]) -&gt; Path -&gt; [Path]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Bool) -&gt; [Path] -&gt; [Path]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; (Path -&gt; Bool) -&gt; Path -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Bool
</span><span class="hs-identifier hs-var">T.null</span></span><span class="hs-special">)</span><span>   </span><span class="hs-comment">-- [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</span><span>
</span><span id="line-298"></span><span>                    </span><span class="annot"><span class="annottext">([Path] -&gt; [Path]) -&gt; (Path -&gt; [Path]) -&gt; Path -&gt; [Path]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Char -&gt; Bool) -&gt; Path -&gt; [Path]
</span><span class="hs-identifier hs-var">T.split</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'.'</span></span><span class="hs-special">)</span><span>         </span><span class="hs-comment">-- [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;&quot;]</span><span>
</span><span id="line-299"></span><span>                    </span><span class="annot"><span class="annottext">(Path -&gt; [Path]) -&gt; Path -&gt; [Path]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056152"><span class="hs-identifier hs-var">pfx</span></a></span><span>                     </span><span class="hs-comment">-- &quot;a.b.c.&quot;</span><span>
</span><span id="line-300"></span><span>
</span><span id="line-301"></span><span>  </span><span id="local-6989586621679056142"><span class="annot"><span class="annottext">interpret :: Interpolate -&gt; IO Builder
</span><a href="#local-6989586621679056142"><span class="hs-identifier hs-var hs-var">interpret</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Literal"><span class="hs-identifier hs-type">Literal</span></a></span><span> </span><span id="local-6989586621679056132"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056132"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; IO Builder
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Builder
</span><span class="hs-identifier hs-var">fromText</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056132"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-302"></span><span>  </span><span class="annot"><a href="#local-6989586621679056142"><span class="hs-identifier hs-var">interpret</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Interpolate"><span class="hs-identifier hs-type">Interpolate</span></a></span><span> </span><span id="local-6989586621679056130"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056130"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-303"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Maybe Value
</span><a href="#local-6989586621679056141"><span class="hs-identifier hs-var">lookupEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056130"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-304"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span id="local-6989586621679056129"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056129"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; IO Builder
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Builder
</span><span class="hs-identifier hs-var">fromText</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056129"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Number"><span class="hs-identifier hs-type">Number</span></a></span><span> </span><span id="local-6989586621679056127"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679056127"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Integer
forall a. Ratio a -&gt; a
</span><span class="hs-identifier hs-var">denominator</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679056127"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; IO Builder
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Builder
forall a. Integral a =&gt; a -&gt; Builder
</span><span class="hs-identifier hs-var">decimal</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Builder) -&gt; Integer -&gt; Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Integer
forall a. Ratio a -&gt; a
</span><span class="hs-identifier hs-var">numerator</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679056127"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>            </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; IO Builder
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">(Builder -&gt; IO Builder) -&gt; Builder -&gt; IO Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Builder
forall a. RealFloat a =&gt; a -&gt; Builder
</span><span class="hs-identifier hs-var">realFloat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679056127"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>                           </span><span class="hs-comment">-- TODO: Use a dedicated Builder for Rationals instead of</span><span>
</span><span id="line-309"></span><span>                           </span><span class="hs-comment">-- using realFloat on a Double.</span><span>
</span><span id="line-310"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO Builder
forall a. HasCallStack =&gt; FilePath -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;type error&quot;</span></span><span>
</span><span id="line-311"></span><span>        </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-312"></span><span>          </span><span id="local-6989586621679056126"><span class="annot"><span class="annottext">Either SomeException FilePath
</span><a href="#local-6989586621679056126"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO FilePath -&gt; IO (Either SomeException FilePath)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><span class="hs-identifier hs-var">try</span></span><span> </span><span class="annot"><span class="annottext">(IO FilePath -&gt; IO (Either SomeException FilePath))
-&gt; (Path -&gt; IO FilePath)
-&gt; Path
-&gt; IO (Either SomeException FilePath)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO FilePath
</span><span class="hs-identifier hs-var">getEnv</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO FilePath)
-&gt; (Path -&gt; FilePath) -&gt; Path -&gt; IO FilePath
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; FilePath
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; IO (Either SomeException FilePath))
-&gt; Path -&gt; IO (Either SomeException FilePath)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056130"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-313"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either SomeException FilePath
</span><a href="#local-6989586621679056126"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-314"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SomeException
</span><span class="hs-identifier">_</span></span><span class="hs-glyph">::</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-315"></span><span>                </span><span class="annot"><span class="annottext">ConfigError -&gt; IO Builder
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(ConfigError -&gt; IO Builder)
-&gt; (FilePath -&gt; ConfigError) -&gt; FilePath -&gt; IO Builder
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; ConfigError
</span><a href="Data.Configurator.Types.Internal.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO Builder) -&gt; FilePath -&gt; IO Builder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;no such variable &quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056130"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-316"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679056124"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056124"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Builder -&gt; IO Builder
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; Builder
</span><span class="hs-identifier hs-var">fromString</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056124"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-317"></span><span>
</span><span id="line-318"></span><span class="annot"><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-type">importsOf</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Directive"><span class="hs-identifier hs-type">Directive</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-319"></span><span id="importsOf"><span class="annot"><span class="annottext">importsOf :: Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var hs-var">importsOf</span></a></span></span><span> </span><span id="local-6989586621679056123"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056123"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Import"><span class="hs-identifier hs-type">Import</span></a></span><span> </span><span id="local-6989586621679056122"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056122"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679056121"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056121"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Worth Path
forall b. b -&gt; Worth b
</span><a href="Data.Configurator.Types.Internal.html#Required"><span class="hs-identifier hs-var">Required</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><a href="Data.Configurator.html#relativize"><span class="hs-identifier hs-var">relativize</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056123"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056122"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>                                 </span><span class="annot"><span class="annottext">Worth Path -&gt; [Worth Path] -&gt; [Worth Path]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056123"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056121"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-321"></span><span class="annot"><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span id="local-6989586621679056120"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056120"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Group"><span class="hs-identifier hs-type">Group</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679056119"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056119"><span class="hs-identifier hs-var">ys</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679056118"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056118"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056120"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056119"><span class="hs-identifier hs-var">ys</span></a></span><span> </span><span class="annot"><span class="annottext">[Worth Path] -&gt; [Worth Path] -&gt; [Worth Path]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056120"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056118"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-322"></span><span class="annot"><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span id="local-6989586621679056117"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056117"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Directive
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621679056116"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056116"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">)</span><span>          </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; [Directive] -&gt; [Worth Path]
</span><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056117"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056116"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-323"></span><span class="annot"><a href="Data.Configurator.html#importsOf"><span class="hs-identifier hs-var">importsOf</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-identifier">_</span></span><span>    </span><span class="annot"><span class="annottext">[Directive]
</span><span class="hs-identifier">_</span></span><span>                 </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-324"></span><span>
</span><span id="line-325"></span><span class="annot"><a href="Data.Configurator.html#relativize"><span class="hs-identifier hs-type">relativize</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Path"><span class="hs-identifier hs-type">Path</span></a></span><span>
</span><span id="line-326"></span><span id="relativize"><span class="annot"><span class="annottext">relativize :: Path -&gt; Path -&gt; Path
</span><a href="Data.Configurator.html#relativize"><span class="hs-identifier hs-var hs-var">relativize</span></a></span></span><span> </span><span id="local-6989586621679056115"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056115"><span class="hs-identifier hs-var">parent</span></a></span></span><span> </span><span id="local-6989586621679056114"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056114"><span class="hs-identifier hs-var">child</span></a></span></span><span>
</span><span id="line-327"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Char
</span><span class="hs-identifier hs-var">T.head</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056114"><span class="hs-identifier hs-var">child</span></a></span><span> </span><span class="annot"><span class="annottext">Char -&gt; Char -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'/'</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056114"><span class="hs-identifier hs-var">child</span></a></span><span>
</span><span id="line-328"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>           </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Path, Path) -&gt; Path
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; (Path, Path)
</span><span class="hs-identifier hs-var">T.breakOnEnd</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;/&quot;</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056115"><span class="hs-identifier hs-var">parent</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056114"><span class="hs-identifier hs-var">child</span></a></span><span>
</span><span id="line-329"></span><span>
</span><span id="line-330"></span><span class="annot"><a href="Data.Configurator.html#loadOne"><span class="hs-identifier hs-type">loadOne</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Worth"><span class="hs-identifier hs-type">Worth</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Directive"><span class="hs-identifier hs-type">Directive</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-331"></span><span id="loadOne"><span class="annot"><span class="annottext">loadOne :: Worth FilePath -&gt; IO [Directive]
</span><a href="Data.Configurator.html#loadOne"><span class="hs-identifier hs-var hs-var">loadOne</span></a></span></span><span> </span><span id="local-6989586621679056111"><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056111"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-332"></span><span>  </span><span id="local-6989586621679056110"><span class="annot"><span class="annottext">Either SomeException Text
</span><a href="#local-6989586621679056110"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Text -&gt; IO (Either SomeException Text)
forall e a. Exception e =&gt; IO a -&gt; IO (Either e a)
</span><span class="hs-identifier hs-var">try</span></span><span> </span><span class="annot"><span class="annottext">(IO Text -&gt; IO (Either SomeException Text))
-&gt; (Worth FilePath -&gt; IO Text)
-&gt; Worth FilePath
-&gt; IO (Either SomeException Text)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; IO Text
</span><span class="hs-identifier hs-var">L.readFile</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO Text)
-&gt; (Worth FilePath -&gt; FilePath) -&gt; Worth FilePath -&gt; IO Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Worth FilePath -&gt; FilePath
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">(Worth FilePath -&gt; IO (Either SomeException Text))
-&gt; Worth FilePath -&gt; IO (Either SomeException Text)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056111"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-333"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either SomeException Text
</span><a href="#local-6989586621679056110"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679056108"><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679056108"><span class="hs-identifier hs-var">err</span></a></span></span><span class="hs-glyph">::</span><span class="annot"><span class="hs-identifier hs-type">SomeException</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056111"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>                                   </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Required"><span class="hs-identifier hs-type">Required</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO [Directive]
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">SomeException
</span><a href="#local-6989586621679056108"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-336"></span><span>                                   </span><span class="annot"><span class="annottext">Worth FilePath
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Directive] -&gt; IO [Directive]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679056107"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679056107"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-338"></span><span>            </span><span id="local-6989586621679056106"><span class="annot"><span class="annottext">Either FilePath [Directive]
</span><a href="#local-6989586621679056106"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either FilePath [Directive] -&gt; IO (Either FilePath [Directive])
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Result [Directive] -&gt; Either FilePath [Directive]
forall r. Result r -&gt; Either FilePath r
</span><span class="hs-identifier hs-var">L.eitherResult</span></span><span> </span><span class="annot"><span class="annottext">(Result [Directive] -&gt; Either FilePath [Directive])
-&gt; Result [Directive] -&gt; Either FilePath [Directive]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser [Directive] -&gt; Text -&gt; Result [Directive]
forall a. Parser a -&gt; Text -&gt; Result a
</span><span class="hs-identifier hs-var">L.parse</span></span><span> </span><span class="annot"><span class="annottext">Parser [Directive]
</span><a href="Data.Configurator.Parser.html#topLevel"><span class="hs-identifier hs-var">topLevel</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679056107"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-339"></span><span>                 </span><span class="annot"><span class="annottext">IO (Either FilePath [Directive])
-&gt; (ConfigError -&gt; IO (Either FilePath [Directive]))
-&gt; IO (Either FilePath [Directive])
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679056103"><span class="annot"><span class="annottext">ConfigError
</span><a href="#local-6989586621679056103"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-glyph">::</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#ConfigError"><span class="hs-identifier hs-type">ConfigError</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-340"></span><span>                 </span><span class="annot"><span class="annottext">ConfigError -&gt; IO (Either FilePath [Directive])
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="annot"><span class="annottext">(ConfigError -&gt; IO (Either FilePath [Directive]))
-&gt; ConfigError -&gt; IO (Either FilePath [Directive])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ConfigError
</span><a href="#local-6989586621679056103"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-341"></span><span>                             </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#ParseError"><span class="hs-identifier hs-type">ParseError</span></a></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679056102"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056102"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; ConfigError
</span><a href="Data.Configurator.Types.Internal.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Worth FilePath -&gt; FilePath
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056111"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056102"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-342"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either FilePath [Directive]
</span><a href="#local-6989586621679056106"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-343"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679056101"><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056101"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ConfigError -&gt; IO [Directive]
forall e a. Exception e =&gt; e -&gt; IO a
</span><span class="hs-identifier hs-var">throwIO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; ConfigError
</span><a href="Data.Configurator.Types.Internal.html#ParseError"><span class="hs-identifier hs-var">ParseError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Worth FilePath -&gt; FilePath
forall a. Worth a -&gt; a
</span><a href="Data.Configurator.Types.Internal.html#worth"><span class="hs-identifier hs-var hs-var">worth</span></a></span><span> </span><span class="annot"><span class="annottext">Worth FilePath
</span><a href="#local-6989586621679056111"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath
</span><a href="#local-6989586621679056101"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679056100"><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056100"><span class="hs-identifier hs-var">ds</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Directive] -&gt; IO [Directive]
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">[Directive]
</span><a href="#local-6989586621679056100"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- | Subscribe for notifications.  The given action will be invoked</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- when any change occurs to a configuration property matching the</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- supplied pattern.</span><span>
</span><span id="line-349"></span><span class="annot"><a href="Data.Configurator.html#subscribe"><span class="hs-identifier hs-type">subscribe</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#ChangeHandler"><span class="hs-identifier hs-type">ChangeHandler</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-350"></span><span id="subscribe"><span class="annot"><span class="annottext">subscribe :: Config -&gt; Pattern -&gt; ChangeHandler -&gt; IO ()
</span><a href="Data.Configurator.html#subscribe"><span class="hs-identifier hs-var hs-var">subscribe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span> </span><span id="local-6989586621679056099"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056099"><span class="hs-identifier hs-var">root</span></a></span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056095"><span id="local-6989586621679056096"><span id="local-6989586621679056097"><span id="local-6989586621679056098"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056095"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679056094"><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621679056094"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621679056093"><span class="annot"><span class="annottext">ChangeHandler
</span><a href="#local-6989586621679056093"><span class="hs-identifier hs-var">act</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-351"></span><span>  </span><span id="local-6989586621679056092"><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056092"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
-&gt; (HashMap Pattern [ChangeHandler]
    -&gt; (HashMap Pattern [ChangeHandler],
        HashMap Pattern [ChangeHandler]))
-&gt; IO (HashMap Pattern [ChangeHandler])
forall a b. IORef a -&gt; (a -&gt; (a, b)) -&gt; IO b
</span><span class="hs-identifier hs-var">atomicModifyIORef</span></span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056095"><span class="hs-identifier hs-var">cfgSubs</span></a></span><span> </span><span class="annot"><span class="annottext">((HashMap Pattern [ChangeHandler]
  -&gt; (HashMap Pattern [ChangeHandler],
      HashMap Pattern [ChangeHandler]))
 -&gt; IO (HashMap Pattern [ChangeHandler]))
-&gt; (HashMap Pattern [ChangeHandler]
    -&gt; (HashMap Pattern [ChangeHandler],
        HashMap Pattern [ChangeHandler]))
-&gt; IO (HashMap Pattern [ChangeHandler])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679056091"><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056091"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-352"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056090"><span class="annot"><span class="annottext">m' :: HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056090"><span class="hs-identifier hs-var hs-var">m'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([ChangeHandler] -&gt; [ChangeHandler] -&gt; [ChangeHandler])
-&gt; Pattern
-&gt; [ChangeHandler]
-&gt; HashMap Pattern [ChangeHandler]
-&gt; HashMap Pattern [ChangeHandler]
forall k v.
(Eq k, Hashable k) =&gt;
(v -&gt; v -&gt; v) -&gt; k -&gt; v -&gt; HashMap k v -&gt; HashMap k v
</span><span class="hs-identifier hs-var">H.insertWith</span></span><span> </span><span class="annot"><span class="annottext">[ChangeHandler] -&gt; [ChangeHandler] -&gt; [ChangeHandler]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">(++)</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Pattern -&gt; Pattern
</span><a href="Data.Configurator.html#localPattern"><span class="hs-identifier hs-var">localPattern</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056099"><span class="hs-identifier hs-var">root</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621679056094"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">ChangeHandler
</span><a href="#local-6989586621679056093"><span class="hs-identifier hs-var">act</span></a></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056091"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056090"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056090"><span class="hs-identifier hs-var">m'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>  </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
-&gt; IO (HashMap Pattern [ChangeHandler])
forall a. a -&gt; IO a
</span><span class="hs-identifier hs-var">evaluate</span></span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056092"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="annot"><span class="annottext">IO (HashMap Pattern [ChangeHandler]) -&gt; IO () -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; m b -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="annot"><a href="Data.Configurator.html#localPattern"><span class="hs-identifier hs-type">localPattern</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span>
</span><span id="line-356"></span><span id="localPattern"><span class="annot"><span class="annottext">localPattern :: Path -&gt; Pattern -&gt; Pattern
</span><a href="Data.Configurator.html#localPattern"><span class="hs-identifier hs-var hs-var">localPattern</span></a></span></span><span> </span><span id="local-6989586621679056087"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056087"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span>  </span><span id="local-6989586621679056085"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056085"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Pattern
</span><a href="Data.Configurator.Types.Internal.html#Exact"><span class="hs-identifier hs-var">Exact</span></a></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056087"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056085"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span class="annot"><a href="Data.Configurator.html#localPattern"><span class="hs-identifier hs-var">localPattern</span></a></span><span> </span><span id="local-6989586621679056084"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056084"><span class="hs-identifier hs-var">pfx</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span id="local-6989586621679056082"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056082"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; Pattern
</span><a href="Data.Configurator.Types.Internal.html#Prefix"><span class="hs-identifier hs-var">Prefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056084"><span class="hs-identifier hs-var">pfx</span></a></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Path
</span><span class="hs-operator hs-var">`T.append`</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056082"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>
</span><span id="line-359"></span><span class="annot"><a href="Data.Configurator.html#notifySubscribers"><span class="hs-identifier hs-type">notifySubscribers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Name"><span class="hs-identifier hs-type">Name</span></a></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span>
</span><span id="line-360"></span><span>                  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">H.HashMap</span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Pattern"><span class="hs-identifier hs-type">Pattern</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#ChangeHandler"><span class="hs-identifier hs-type">ChangeHandler</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span id="notifySubscribers"><span class="annot"><span class="annottext">notifySubscribers :: BaseConfig
-&gt; HashMap Path Value
-&gt; HashMap Path Value
-&gt; HashMap Pattern [ChangeHandler]
-&gt; IO ()
</span><a href="Data.Configurator.html#notifySubscribers"><span class="hs-identifier hs-var hs-var">notifySubscribers</span></a></span></span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span class="hs-special">{</span><span id="local-6989586621679056078"><span id="local-6989586621679056079"><span id="local-6989586621679056080"><span id="local-6989586621679056081"><span class="annot"><span class="annottext">Maybe AutoConfig
IORef [(Path, Worth Path)]
IORef (HashMap Path Value)
IORef (HashMap Pattern [ChangeHandler])
cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
cfgMap :: IORef (HashMap Path Value)
cfgPaths :: IORef [(Path, Worth Path)]
cfgAuto :: Maybe AutoConfig
cfgSubs :: BaseConfig -&gt; IORef (HashMap Pattern [ChangeHandler])
cfgMap :: BaseConfig -&gt; IORef (HashMap Path Value)
cfgPaths :: BaseConfig -&gt; IORef [(Path, Worth Path)]
cfgAuto :: BaseConfig -&gt; Maybe AutoConfig
</span><a href="#local-6989586621679056078"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679056077"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056077"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621679056076"><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056076"><span class="hs-identifier hs-var">m'</span></a></span></span><span> </span><span id="local-6989586621679056075"><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056075"><span class="hs-identifier hs-var">subs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pattern -&gt; [ChangeHandler] -&gt; IO () -&gt; IO ())
-&gt; IO () -&gt; HashMap Pattern [ChangeHandler] -&gt; IO ()
forall k v a. (k -&gt; v -&gt; a -&gt; a) -&gt; a -&gt; HashMap k v -&gt; a
</span><span class="hs-identifier hs-var">H.foldrWithKey</span></span><span> </span><span class="annot"><span class="annottext">Pattern -&gt; [ChangeHandler] -&gt; IO () -&gt; IO ()
forall (t :: * -&gt; *) b.
Foldable t =&gt;
Pattern -&gt; t ChangeHandler -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679056073"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
</span><a href="#local-6989586621679056075"><span class="hs-identifier hs-var">subs</span></a></span><span>
</span><span id="line-362"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621679056072"><span class="annot"><span class="annottext">changedOrGone :: [(Path, Maybe Value)]
</span><a href="#local-6989586621679056072"><span class="hs-identifier hs-var hs-var">changedOrGone</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Value -&gt; [(Path, Maybe Value)] -&gt; [(Path, Maybe Value)])
-&gt; [(Path, Maybe Value)]
-&gt; HashMap Path Value
-&gt; [(Path, Maybe Value)]
forall k v a. (k -&gt; v -&gt; a -&gt; a) -&gt; a -&gt; HashMap k v -&gt; a
</span><span class="hs-identifier hs-var">H.foldrWithKey</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Value -&gt; [(Path, Maybe Value)] -&gt; [(Path, Maybe Value)]
</span><a href="#local-6989586621679056071"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056077"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-364"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679056071"><span class="annot"><span class="annottext">check :: Path -&gt; Value -&gt; [(Path, Maybe Value)] -&gt; [(Path, Maybe Value)]
</span><a href="#local-6989586621679056071"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621679056070"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056070"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679056069"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056069"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679056068"><span class="annot"><span class="annottext">[(Path, Maybe Value)]
</span><a href="#local-6989586621679056068"><span class="hs-identifier hs-var">nvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056070"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056076"><span class="hs-identifier hs-var">m'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-365"></span><span>                              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679056067"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056067"><span class="hs-identifier hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056069"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056067"><span class="hs-identifier hs-var">v'</span></a></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056070"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056067"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Path, Maybe Value)
-&gt; [(Path, Maybe Value)] -&gt; [(Path, Maybe Value)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(Path, Maybe Value)]
</span><a href="#local-6989586621679056068"><span class="hs-identifier hs-var">nvs</span></a></span><span>
</span><span id="line-366"></span><span>                                      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Path, Maybe Value)]
</span><a href="#local-6989586621679056068"><span class="hs-identifier hs-var">nvs</span></a></span><span>
</span><span id="line-367"></span><span>                              </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier">_</span></span><span>                   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056070"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Path, Maybe Value)
-&gt; [(Path, Maybe Value)] -&gt; [(Path, Maybe Value)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(Path, Maybe Value)]
</span><a href="#local-6989586621679056068"><span class="hs-identifier hs-var">nvs</span></a></span><span>
</span><span id="line-368"></span><span>  </span><span id="local-6989586621679056065"><span class="annot"><span class="annottext">new :: [(Path, Value)]
</span><a href="#local-6989586621679056065"><span class="hs-identifier hs-var hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Value -&gt; [(Path, Value)] -&gt; [(Path, Value)])
-&gt; [(Path, Value)] -&gt; HashMap Path Value -&gt; [(Path, Value)]
forall k v a. (k -&gt; v -&gt; a -&gt; a) -&gt; a -&gt; HashMap k v -&gt; a
</span><span class="hs-identifier hs-var">H.foldrWithKey</span></span><span> </span><span class="annot"><span class="annottext">Path -&gt; Value -&gt; [(Path, Value)] -&gt; [(Path, Value)]
forall b. Path -&gt; b -&gt; [(Path, b)] -&gt; [(Path, b)]
</span><a href="#local-6989586621679056064"><span class="hs-identifier hs-var">check</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056076"><span class="hs-identifier hs-var">m'</span></a></span><span>
</span><span id="line-369"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679056064"><span class="annot"><span class="annottext">check :: Path -&gt; b -&gt; [(Path, b)] -&gt; [(Path, b)]
</span><a href="#local-6989586621679056064"><span class="hs-identifier hs-var hs-var">check</span></a></span></span><span> </span><span id="local-6989586621679056063"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056063"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679056062"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056062"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679056061"><span class="annot"><span class="annottext">[(Path, b)]
</span><a href="#local-6989586621679056061"><span class="hs-identifier hs-var">nvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056063"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056077"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-370"></span><span>                              </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056063"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056062"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(Path, b) -&gt; [(Path, b)] -&gt; [(Path, b)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(Path, b)]
</span><a href="#local-6989586621679056061"><span class="hs-identifier hs-var">nvs</span></a></span><span>
</span><span id="line-371"></span><span>                              </span><span class="annot"><span class="annottext">Maybe Value
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Path, b)]
</span><a href="#local-6989586621679056061"><span class="hs-identifier hs-var">nvs</span></a></span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679056060"><span class="annot"><span class="annottext">notify :: a -&gt; b -&gt; t -&gt; (b -&gt; t -&gt; IO ()) -&gt; IO ()
</span><a href="#local-6989586621679056060"><span class="hs-identifier hs-var hs-var">notify</span></a></span></span><span> </span><span id="local-6989586621679056059"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056059"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679056058"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056058"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621679056057"><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679056057"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621679056056"><span class="annot"><span class="annottext">b -&gt; t -&gt; IO ()
</span><a href="#local-6989586621679056056"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">b -&gt; t -&gt; IO ()
</span><a href="#local-6989586621679056056"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056058"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">t
</span><a href="#local-6989586621679056057"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">IO () -&gt; (SomeException -&gt; IO ()) -&gt; IO ()
forall e a. Exception e =&gt; IO a -&gt; (e -&gt; IO a) -&gt; IO a
</span><span class="hs-operator hs-var">`E.catch`</span></span><span> </span><span class="annot"><span class="annottext">(SomeException -&gt; IO ())
-&gt; (AutoConfig -&gt; SomeException -&gt; IO ())
-&gt; Maybe AutoConfig
-&gt; SomeException
-&gt; IO ()
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">SomeException -&gt; IO ()
forall a. Show a =&gt; a -&gt; IO ()
</span><a href="#local-6989586621679056054"><span class="hs-identifier hs-var">report</span></a></span><span> </span><span class="annot"><span class="annottext">AutoConfig -&gt; SomeException -&gt; IO ()
</span><a href="Data.Configurator.Types.Internal.html#onError"><span class="hs-identifier hs-var hs-var">onError</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig
</span><a href="#local-6989586621679056081"><span class="hs-identifier hs-var">cfgAuto</span></a></span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621679056054"><span class="annot"><span class="annottext">report :: a -&gt; IO ()
</span><a href="#local-6989586621679056054"><span class="hs-identifier hs-var hs-var">report</span></a></span></span><span> </span><span id="local-6989586621679056053"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056053"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Handle -&gt; FilePath -&gt; IO ()
</span><span class="hs-identifier hs-var">hPutStrLn</span></span><span> </span><span class="annot"><span class="annottext">Handle
</span><span class="hs-identifier hs-var">stderr</span></span><span> </span><span class="annot"><span class="annottext">(FilePath -&gt; IO ()) -&gt; FilePath -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-374"></span><span>                     </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;*** a ChangeHandler threw an exception for &quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-375"></span><span>                     </span><span class="annot"><span class="annottext">(a, b) -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056059"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679056058"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FilePath
</span><span class="hs-string">&quot;: &quot;</span></span><span> </span><span class="annot"><span class="annottext">FilePath -&gt; FilePath -&gt; FilePath
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; FilePath
forall a. Show a =&gt; a -&gt; FilePath
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679056053"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621679056073"><span class="annot"><span class="annottext">go :: Pattern -&gt; t ChangeHandler -&gt; IO b -&gt; IO b
</span><a href="#local-6989586621679056073"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621679056052"><span class="annot"><span class="annottext">p :: Pattern
</span><a href="#local-6989586621679056052"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Exact"><span class="hs-identifier hs-type">Exact</span></a></span><span> </span><span id="local-6989586621679056051"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056051"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679056050"><span class="annot"><span class="annottext">t ChangeHandler
</span><a href="#local-6989586621679056050"><span class="hs-identifier hs-var">acts</span></a></span></span><span> </span><span id="local-6989586621679056049"><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679056049"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO b -&gt; () -&gt; IO b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679056049"><span class="hs-identifier hs-var">next</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; IO b) -&gt; IO () -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO b) -&gt; IO () -&gt; IO b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056048"><span class="annot"><span class="annottext">v' :: Maybe Value
</span><a href="#local-6989586621679056048"><span class="hs-identifier hs-var hs-var">v'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056051"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056076"><span class="hs-identifier hs-var">m'</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; HashMap Path Value -&gt; Maybe Value
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><span class="hs-identifier hs-var">H.lookup</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056051"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
</span><a href="#local-6989586621679056077"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; Maybe Value -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679056048"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ())
-&gt; (t ChangeHandler -&gt; IO ()) -&gt; t ChangeHandler -&gt; IO ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(ChangeHandler -&gt; IO ()) -&gt; t ChangeHandler -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern -&gt; Path -&gt; Maybe Value -&gt; ChangeHandler -&gt; IO ()
forall a b t.
(Show a, Show b) =&gt;
a -&gt; b -&gt; t -&gt; (b -&gt; t -&gt; IO ()) -&gt; IO ()
</span><a href="#local-6989586621679056060"><span class="hs-identifier hs-var">notify</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621679056052"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056051"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679056048"><span class="hs-identifier hs-var">v'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(t ChangeHandler -&gt; IO ()) -&gt; t ChangeHandler -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">t ChangeHandler
</span><a href="#local-6989586621679056050"><span class="hs-identifier hs-var">acts</span></a></span><span>
</span><span id="line-379"></span><span>  </span><span class="annot"><a href="#local-6989586621679056073"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621679056046"><span class="annot"><span class="annottext">p :: Pattern
</span><a href="#local-6989586621679056046"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span id="local-6989586621679056045"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056045"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679056044"><span class="annot"><span class="annottext">t ChangeHandler
</span><a href="#local-6989586621679056044"><span class="hs-identifier hs-var">acts</span></a></span></span><span> </span><span id="local-6989586621679056043"><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679056043"><span class="hs-identifier hs-var">next</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">IO b -&gt; () -&gt; IO b
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">IO b
</span><a href="#local-6989586621679056043"><span class="hs-identifier hs-var">next</span></a></span><span> </span><span class="annot"><span class="annottext">(() -&gt; IO b) -&gt; IO () -&gt; IO b
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO b) -&gt; IO () -&gt; IO b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679056042"><span class="annot"><span class="annottext">matching :: [(Path, b)] -&gt; [(Path, b)]
</span><a href="#local-6989586621679056042"><span class="hs-identifier hs-var hs-var">matching</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Path, b) -&gt; Bool) -&gt; [(Path, b)] -&gt; [(Path, b)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Path -&gt; Path -&gt; Bool
</span><span class="hs-identifier hs-var">T.isPrefixOf</span></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056045"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(Path -&gt; Bool) -&gt; ((Path, b) -&gt; Path) -&gt; (Path, b) -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Path, b) -&gt; Path
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>    </span><span class="annot"><span class="annottext">[(Path, Value)] -&gt; ((Path, Value) -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Path, Value)] -&gt; [(Path, Value)]
forall b. [(Path, b)] -&gt; [(Path, b)]
</span><a href="#local-6989586621679056042"><span class="hs-identifier hs-var">matching</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Value)]
</span><a href="#local-6989586621679056065"><span class="hs-identifier hs-var">new</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Path, Value) -&gt; IO ()) -&gt; IO ())
-&gt; ((Path, Value) -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679056040"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056040"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679056039"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056039"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ChangeHandler -&gt; IO ()) -&gt; t ChangeHandler -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern -&gt; Path -&gt; Maybe Value -&gt; ChangeHandler -&gt; IO ()
forall a b t.
(Show a, Show b) =&gt;
a -&gt; b -&gt; t -&gt; (b -&gt; t -&gt; IO ()) -&gt; IO ()
</span><a href="#local-6989586621679056060"><span class="hs-identifier hs-var">notify</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621679056046"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056040"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679056039"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t ChangeHandler
</span><a href="#local-6989586621679056044"><span class="hs-identifier hs-var">acts</span></a></span><span>
</span><span id="line-382"></span><span>    </span><span class="annot"><span class="annottext">[(Path, Maybe Value)] -&gt; ((Path, Maybe Value) -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><span class="hs-identifier hs-var">forM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Path, Maybe Value)] -&gt; [(Path, Maybe Value)]
forall b. [(Path, b)] -&gt; [(Path, b)]
</span><a href="#local-6989586621679056042"><span class="hs-identifier hs-var">matching</span></a></span><span> </span><span class="annot"><span class="annottext">[(Path, Maybe Value)]
</span><a href="#local-6989586621679056072"><span class="hs-identifier hs-var">changedOrGone</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(((Path, Maybe Value) -&gt; IO ()) -&gt; IO ())
-&gt; ((Path, Maybe Value) -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679056038"><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056038"><span class="hs-identifier hs-var">n'</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621679056037"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679056037"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ChangeHandler -&gt; IO ()) -&gt; t ChangeHandler -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern -&gt; Path -&gt; Maybe Value -&gt; ChangeHandler -&gt; IO ()
forall a b t.
(Show a, Show b) =&gt;
a -&gt; b -&gt; t -&gt; (b -&gt; t -&gt; IO ()) -&gt; IO ()
</span><a href="#local-6989586621679056060"><span class="hs-identifier hs-var">notify</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern
</span><a href="#local-6989586621679056046"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><a href="#local-6989586621679056038"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621679056037"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">t ChangeHandler
</span><a href="#local-6989586621679056044"><span class="hs-identifier hs-var">acts</span></a></span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-comment">-- | A completely empty configuration.</span><span>
</span><span id="line-385"></span><span class="annot"><a href="Data.Configurator.html#empty"><span class="hs-identifier hs-type">empty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-type">Config</span></a></span><span>
</span><span id="line-386"></span><span id="empty"><span class="annot"><span class="annottext">empty :: Config
</span><a href="Data.Configurator.html#empty"><span class="hs-identifier hs-var hs-var">empty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Path -&gt; BaseConfig -&gt; Config
</span><a href="Data.Configurator.Types.Internal.html#Config"><span class="hs-identifier hs-var">Config</span></a></span><span> </span><span class="annot"><span class="annottext">Path
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">(BaseConfig -&gt; Config) -&gt; BaseConfig -&gt; Config
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">IO BaseConfig -&gt; BaseConfig
forall a. IO a -&gt; a
</span><span class="hs-identifier hs-var">unsafePerformIO</span></span><span> </span><span class="annot"><span class="annottext">(IO BaseConfig -&gt; BaseConfig) -&gt; IO BaseConfig -&gt; BaseConfig
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-387"></span><span>          </span><span id="local-6989586621679056036"><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056036"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Path, Worth Path)] -&gt; IO (IORef [(Path, Worth Path)])
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-388"></span><span>          </span><span id="local-6989586621679056035"><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056035"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Path Value -&gt; IO (IORef (HashMap Path Value))
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">HashMap Path Value
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span>
</span><span id="line-389"></span><span>          </span><span id="local-6989586621679056034"><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056034"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
-&gt; IO (IORef (HashMap Pattern [ChangeHandler]))
forall a. a -&gt; IO (IORef a)
</span><span class="hs-identifier hs-var">newIORef</span></span><span> </span><span class="annot"><span class="annottext">HashMap Pattern [ChangeHandler]
forall k v. HashMap k v
</span><span class="hs-identifier hs-var">H.empty</span></span><span>
</span><span id="line-390"></span><span>          </span><span class="annot"><span class="annottext">BaseConfig -&gt; IO BaseConfig
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">BaseConfig :: Maybe AutoConfig
-&gt; IORef [(Path, Worth Path)]
-&gt; IORef (HashMap Path Value)
-&gt; IORef (HashMap Pattern [ChangeHandler])
-&gt; BaseConfig
</span><a href="Data.Configurator.Types.Internal.html#BaseConfig"><span class="hs-identifier hs-type">BaseConfig</span></a></span><span> </span><span class="hs-special">{</span><span>
</span><span id="line-391"></span><span>                       </span><span class="annot"><span class="annottext">cfgAuto :: Maybe AutoConfig
</span><a href="Data.Configurator.Types.Internal.html#cfgAuto"><span class="hs-identifier hs-var">cfgAuto</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe AutoConfig
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-392"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgPaths :: IORef [(Path, Worth Path)]
</span><a href="Data.Configurator.Types.Internal.html#cfgPaths"><span class="hs-identifier hs-var">cfgPaths</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef [(Path, Worth Path)]
</span><a href="#local-6989586621679056036"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-393"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgMap :: IORef (HashMap Path Value)
</span><a href="Data.Configurator.Types.Internal.html#cfgMap"><span class="hs-identifier hs-var">cfgMap</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Path Value)
</span><a href="#local-6989586621679056035"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-394"></span><span>                     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">cfgSubs :: IORef (HashMap Pattern [ChangeHandler])
</span><a href="Data.Configurator.Types.Internal.html#cfgSubs"><span class="hs-identifier hs-var">cfgSubs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IORef (HashMap Pattern [ChangeHandler])
</span><a href="#local-6989586621679056034"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-395"></span><span>                     </span><span class="hs-special">}</span><span>
</span><span id="line-396"></span><span class="hs-pragma">{-# NOINLINE</span><span> </span><span class="annot"><a href="Data.Configurator.html#empty"><span class="hs-pragma hs-type">empty</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="hs-comment">-- $format</span><span>
</span><span id="line-399"></span><span class="hs-comment">--</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- A configuration file consists of a series of directives and</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- comments, encoded in UTF-8.  A comment begins with a \&quot;@#@\&quot;</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- character, and continues to the end of a line.</span><span>
</span><span id="line-403"></span><span class="hs-comment">--</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- Files and directives are processed from first to last, top to</span><span>
</span><span id="line-405"></span><span class="hs-comment">-- bottom.</span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span class="hs-comment">-- $binding</span><span>
</span><span id="line-408"></span><span class="hs-comment">--</span><span>
</span><span id="line-409"></span><span class="hs-comment">-- A binding associates a name with a value.</span><span>
</span><span id="line-410"></span><span class="hs-comment">--</span><span>
</span><span id="line-411"></span><span class="hs-comment">-- &gt; my_string = &quot;hi mom! \u2603&quot;</span><span>
</span><span id="line-412"></span><span class="hs-comment">-- &gt; your-int-33 = 33</span><span>
</span><span id="line-413"></span><span class="hs-comment">-- &gt; his_bool = on</span><span>
</span><span id="line-414"></span><span class="hs-comment">-- &gt; HerList = [1, &quot;foo&quot;, off]</span><span>
</span><span id="line-415"></span><span class="hs-comment">--</span><span>
</span><span id="line-416"></span><span class="hs-comment">-- A name must begin with a Unicode letter, which is followed by zero</span><span>
</span><span id="line-417"></span><span class="hs-comment">-- or more of a Unicode alphanumeric code point, hyphen \&quot;@-@\&quot;, or</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- underscore \&quot;@_@\&quot;.</span><span>
</span><span id="line-419"></span><span class="hs-comment">--</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- Bindings are created or overwritten in the order in which they are</span><span>
</span><span id="line-421"></span><span class="hs-comment">-- encountered.  It is legitimate for a name to be bound multiple</span><span>
</span><span id="line-422"></span><span class="hs-comment">-- times, in which case the last value wins.</span><span>
</span><span id="line-423"></span><span class="hs-comment">--</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- &gt; a = 1</span><span>
</span><span id="line-425"></span><span class="hs-comment">-- &gt; a = true</span><span>
</span><span id="line-426"></span><span class="hs-comment">-- &gt; # value of a is now true, not 1</span><span>
</span><span id="line-427"></span><span>
</span><span id="line-428"></span><span class="hs-comment">-- $types</span><span>
</span><span id="line-429"></span><span class="hs-comment">--</span><span>
</span><span id="line-430"></span><span class="hs-comment">-- The configuration file format supports the following data types:</span><span>
</span><span id="line-431"></span><span class="hs-comment">--</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- * Booleans, represented as @on@ or @off@, @true@ or @false@.  These</span><span>
</span><span id="line-433"></span><span class="hs-comment">--   are case sensitive, so do not try to use @True@ instead of</span><span>
</span><span id="line-434"></span><span class="hs-comment">--   @true@!</span><span>
</span><span id="line-435"></span><span class="hs-comment">--</span><span>
</span><span id="line-436"></span><span class="hs-comment">-- * Integers, represented in base 10.</span><span>
</span><span id="line-437"></span><span class="hs-comment">--</span><span>
</span><span id="line-438"></span><span class="hs-comment">-- * Unicode strings, represented as text (possibly containing escape</span><span>
</span><span id="line-439"></span><span class="hs-comment">--   sequences) surrounded by double quotes.</span><span>
</span><span id="line-440"></span><span class="hs-comment">--</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- * Heterogeneous lists of values, represented as an opening square</span><span>
</span><span id="line-442"></span><span class="hs-comment">--   bracket \&quot;@[@\&quot;, followed by a series of comma-separated values,</span><span>
</span><span id="line-443"></span><span class="hs-comment">--   ending with a closing square bracket \&quot;@]@\&quot;.</span><span>
</span><span id="line-444"></span><span class="hs-comment">--</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- The following escape sequences are recognised in a text string:</span><span>
</span><span id="line-446"></span><span class="hs-comment">--</span><span>
</span><span id="line-447"></span><span class="hs-comment">-- * @\\n@ - newline</span><span>
</span><span id="line-448"></span><span class="hs-comment">--</span><span>
</span><span id="line-449"></span><span class="hs-comment">-- * @\\r@ - carriage return</span><span>
</span><span id="line-450"></span><span class="hs-comment">--</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- * @\\t@ - horizontal tab</span><span>
</span><span id="line-452"></span><span class="hs-comment">--</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- * @\\\\@ - backslash</span><span>
</span><span id="line-454"></span><span class="hs-comment">--</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- * @\\\&quot;@ - double quote</span><span>
</span><span id="line-456"></span><span class="hs-comment">--</span><span>
</span><span id="line-457"></span><span class="hs-comment">-- * @\\u@/xxxx/ - Unicode character from the basic multilingual</span><span>
</span><span id="line-458"></span><span class="hs-comment">--   plane, encoded as four hexadecimal digits</span><span>
</span><span id="line-459"></span><span class="hs-comment">--</span><span>
</span><span id="line-460"></span><span class="hs-comment">-- * @\\u@/xxxx/@\\u@/xxxx/ - Unicode character from an astral plane,</span><span>
</span><span id="line-461"></span><span class="hs-comment">--   as two hexadecimal-encoded UTF-16 surrogates</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="hs-comment">-- $interp</span><span>
</span><span id="line-464"></span><span class="hs-comment">--</span><span>
</span><span id="line-465"></span><span class="hs-comment">-- Strings support interpolation, so that you can dynamically</span><span>
</span><span id="line-466"></span><span class="hs-comment">-- construct a string based on data in your configuration or the OS</span><span>
</span><span id="line-467"></span><span class="hs-comment">-- environment.</span><span>
</span><span id="line-468"></span><span class="hs-comment">--</span><span>
</span><span id="line-469"></span><span class="hs-comment">-- If a string value contains the special sequence \&quot;@$(foo)@\&quot; (for</span><span>
</span><span id="line-470"></span><span class="hs-comment">-- any name @foo@), then the name @foo@ will be looked up in the</span><span>
</span><span id="line-471"></span><span class="hs-comment">-- configuration data and its value substituted.  If that name cannot</span><span>
</span><span id="line-472"></span><span class="hs-comment">-- be found, it will be looked up in the OS environment.</span><span>
</span><span id="line-473"></span><span class="hs-comment">--</span><span>
</span><span id="line-474"></span><span class="hs-comment">-- For security reasons, it is an error for a string interpolation</span><span>
</span><span id="line-475"></span><span class="hs-comment">-- fragment to contain a name that cannot be found in either the</span><span>
</span><span id="line-476"></span><span class="hs-comment">-- current configuration or the environment.</span><span>
</span><span id="line-477"></span><span class="hs-comment">--</span><span>
</span><span id="line-478"></span><span class="hs-comment">-- To represent a single literal \&quot;@$@\&quot; character in a string, double</span><span>
</span><span id="line-479"></span><span class="hs-comment">-- it: \&quot;@$$@\&quot;.</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-comment">-- $group</span><span>
</span><span id="line-482"></span><span class="hs-comment">--</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- It is possible to group a number of directives together under a</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- single prefix:</span><span>
</span><span id="line-485"></span><span class="hs-comment">--</span><span>
</span><span id="line-486"></span><span class="hs-comment">-- &gt; my-group</span><span>
</span><span id="line-487"></span><span class="hs-comment">-- &gt; {</span><span>
</span><span id="line-488"></span><span class="hs-comment">-- &gt;   a = 1</span><span>
</span><span id="line-489"></span><span class="hs-comment">-- &gt;</span><span>
</span><span id="line-490"></span><span class="hs-comment">-- &gt;   # groups support nesting</span><span>
</span><span id="line-491"></span><span class="hs-comment">-- &gt;   nested {</span><span>
</span><span id="line-492"></span><span class="hs-comment">-- &gt;     b = &quot;yay!&quot;</span><span>
</span><span id="line-493"></span><span class="hs-comment">-- &gt;   }</span><span>
</span><span id="line-494"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-495"></span><span class="hs-comment">--</span><span>
</span><span id="line-496"></span><span class="hs-comment">-- The name of a group is used as a prefix for the items in the</span><span>
</span><span id="line-497"></span><span class="hs-comment">-- group. For instance, the value of \&quot;@a@\&quot; above can be retrieved</span><span>
</span><span id="line-498"></span><span class="hs-comment">-- using 'lookup' by supplying the name \&quot;@my-group.a@\&quot;, and \&quot;@b@\&quot;</span><span>
</span><span id="line-499"></span><span class="hs-comment">-- will be named \&quot;@my-group.nested.b@\&quot;.</span><span>
</span><span id="line-500"></span><span>
</span><span id="line-501"></span><span class="hs-comment">-- $import</span><span>
</span><span id="line-502"></span><span class="hs-comment">--</span><span>
</span><span id="line-503"></span><span class="hs-comment">-- To import the contents of another configuration file, use the</span><span>
</span><span id="line-504"></span><span class="hs-comment">-- @import@ directive.</span><span>
</span><span id="line-505"></span><span class="hs-comment">--</span><span>
</span><span id="line-506"></span><span class="hs-comment">-- &gt; import &quot;$(HOME)/etc/myapp.cfg&quot;</span><span>
</span><span id="line-507"></span><span class="hs-comment">--</span><span>
</span><span id="line-508"></span><span class="hs-comment">-- Absolute paths are imported as is.  Relative paths are resolved with</span><span>
</span><span id="line-509"></span><span class="hs-comment">-- respect to the file they are imported from.  It is an error for an</span><span>
</span><span id="line-510"></span><span class="hs-comment">-- @import@ directive to name a file that does not exist, cannot be read,</span><span>
</span><span id="line-511"></span><span class="hs-comment">-- or contains errors.</span><span>
</span><span id="line-512"></span><span class="hs-comment">--</span><span>
</span><span id="line-513"></span><span class="hs-comment">-- If an @import@ appears inside a group, the group's naming prefix</span><span>
</span><span id="line-514"></span><span class="hs-comment">-- will be applied to all of the names imported from the given</span><span>
</span><span id="line-515"></span><span class="hs-comment">-- configuration file.</span><span>
</span><span id="line-516"></span><span class="hs-comment">--</span><span>
</span><span id="line-517"></span><span class="hs-comment">-- Supposing we have a file named \&quot;@foo.cfg@\&quot;:</span><span>
</span><span id="line-518"></span><span class="hs-comment">--</span><span>
</span><span id="line-519"></span><span class="hs-comment">-- &gt; bar = 1</span><span>
</span><span id="line-520"></span><span class="hs-comment">--</span><span>
</span><span id="line-521"></span><span class="hs-comment">-- And another file that imports it into a group:</span><span>
</span><span id="line-522"></span><span class="hs-comment">--</span><span>
</span><span id="line-523"></span><span class="hs-comment">-- &gt; hi {</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- &gt;   import &quot;foo.cfg&quot;</span><span>
</span><span id="line-525"></span><span class="hs-comment">-- &gt; }</span><span>
</span><span id="line-526"></span><span class="hs-comment">--</span><span>
</span><span id="line-527"></span><span class="hs-comment">-- This will result in a value named \&quot;@hi.bar@\&quot;.</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="hs-comment">-- $notify</span><span>
</span><span id="line-530"></span><span class="hs-comment">--</span><span>
</span><span id="line-531"></span><span class="hs-comment">-- To more efficiently support an application's need to dynamically</span><span>
</span><span id="line-532"></span><span class="hs-comment">-- reconfigure, a subsystem may ask to be notified when a</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- configuration property is changed as a result of a reload, using</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- the 'subscribe' action.</span><span>
</span><span id="line-535"></span></pre></body></html>