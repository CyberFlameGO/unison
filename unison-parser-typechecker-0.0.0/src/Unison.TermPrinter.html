<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE PatternSynonyms #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.TermPrinter</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">evalState</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.State</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">State</span></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">unpack</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Vector</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Text.Show.Unicode</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">U</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ABT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">annotation</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">reannotateUp</span></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><span class="hs-identifier">AbsN'</span></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ABT</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ABT</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Blank</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Blank</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html"><span class="hs-identifier">Unison.Builtin.Decls</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html#TuplePattern"><span class="hs-identifier">TuplePattern</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-keyword">pattern</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier">TupleTerm'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html"><span class="hs-identifier">Unison.Builtin.Decls</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ConstructorType</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CT</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.HashQualified</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HQ</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.Lexer.html"><span class="hs-identifier">Unison.Lexer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Lexer.html#showEscapeChar"><span class="hs-identifier">showEscapeChar</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.Lexer.html#symbolyId"><span class="hs-identifier">symbolyId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Name</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Name</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.NamePrinter.html"><span class="hs-identifier">Unison.NamePrinter</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier">styleHashQualified''</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.NameSegment</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NameSegment</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Pattern</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Pattern</span></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Pattern</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pattern</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html"><span class="hs-identifier">Unison.PrettyPrintEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier">PrettyPrintEnv</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html"><span class="hs-identifier">Unison.PrettyPrintEnv</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PrettyPrintEnv</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html"><span class="hs-identifier">Unison.PrettyPrintEnv.FQN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier">Imports</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier">elideFQN</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reference</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Reference</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Referent</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Referent</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Type</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Type</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.TypePrinter.html"><span class="hs-identifier">Unison.TypePrinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TypePrinter</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Util.Bytes.html"><span class="hs-identifier">Unison.Util.Bytes</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Bytes</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Util.Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">intercalateMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html"><span class="hs-identifier">Unison.Util.Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier">ColorText</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier">Pretty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Width"><span class="hs-identifier">Width</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html"><span class="hs-identifier">Unison.Util.Pretty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PP</span></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Util.SyntaxText.html"><span class="hs-identifier">Unison.Util.SyntaxText</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Var</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Var</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Var</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Var</span></span><span>
</span><span id="line-50"></span><span>
</span><span id="line-51"></span><span class="hs-keyword">type</span><span> </span><span id="SyntaxText"><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-var">SyntaxText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Util.SyntaxText.html#SyntaxText%27"><span class="hs-identifier hs-type">S.SyntaxText'</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span>
</span><span id="line-52"></span><span>
</span><span id="line-53"></span><span id="local-6989586621681822551"><span id="local-6989586621681822552"><span class="annot"><a href="Unison.TermPrinter.html#pretty"><span class="hs-identifier hs-type">pretty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822552"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681822552"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822551"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier hs-type">ColorText</span></a></span></span></span><span>
</span><span id="line-54"></span><span id="pretty"><span class="annot"><span class="annottext">pretty :: PrettyPrintEnv -&gt; Term v a -&gt; Pretty ColorText
</span><a href="Unison.TermPrinter.html#pretty"><span class="hs-identifier hs-var hs-var">pretty</span></a></span></span><span> </span><span id="local-6989586621681822549"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822549"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty ColorText)
-&gt; (Term v a -&gt; Pretty (SyntaxText' Reference))
-&gt; Term v a
-&gt; Pretty ColorText
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822549"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="Unison.TermPrinter.html#emptyAc"><span class="hs-identifier hs-var">emptyAc</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; (Term v a -&gt; Term3 v PrintAnnotation)
-&gt; Term v a
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822549"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-55"></span><span>
</span><span id="line-56"></span><span id="local-6989586621681822542"><span id="local-6989586621681822543"><span class="annot"><a href="Unison.TermPrinter.html#prettyBlock"><span class="hs-identifier hs-type">prettyBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822543"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681822543"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822542"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier hs-type">ColorText</span></a></span></span></span><span>
</span><span id="line-57"></span><span id="prettyBlock"><span class="annot"><span class="annottext">prettyBlock :: Bool -&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty ColorText
</span><a href="Unison.TermPrinter.html#prettyBlock"><span class="hs-identifier hs-var hs-var">prettyBlock</span></a></span></span><span> </span><span id="local-6989586621681822540"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822540"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span> </span><span id="local-6989586621681822539"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822539"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty ColorText)
-&gt; (Term v a -&gt; Pretty (SyntaxText' Reference))
-&gt; Term v a
-&gt; Pretty ColorText
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty (SyntaxText' Reference)
forall v a.
Var v =&gt;
Bool
-&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBlock%27"><span class="hs-identifier hs-var">prettyBlock'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822540"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822539"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span id="local-6989586621681823161"><span id="local-6989586621681823162"><span class="annot"><a href="Unison.TermPrinter.html#prettyBlock%27"><span class="hs-identifier hs-type">prettyBlock'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823162"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681823162"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823161"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span></span></span><span>
</span><span id="line-60"></span><span id="prettyBlock%27"><span class="annot"><span class="annottext">prettyBlock' :: Bool
-&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBlock%27"><span class="hs-identifier hs-var hs-var">prettyBlock'</span></a></span></span><span> </span><span id="local-6989586621681822537"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822537"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span> </span><span id="local-6989586621681822536"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822536"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-61"></span><span>  </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822536"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AmbientContext
</span><a href="Unison.TermPrinter.html#emptyBlockAc"><span class="hs-identifier hs-var">emptyBlockAc</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">elideUnit :: Bool
</span><a href="Unison.TermPrinter.html#elideUnit"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822537"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; (Term v a -&gt; Term3 v PrintAnnotation)
-&gt; Term v a
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822536"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span id="local-6989586621681822532"><span id="local-6989586621681822533"><span class="annot"><a href="Unison.TermPrinter.html#pretty%27"><span class="hs-identifier hs-type">pretty'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822533"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681822533"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822532"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier hs-type">ColorText</span></a></span></span></span><span>
</span><span id="line-64"></span><span id="pretty%27"><span class="annot"><span class="annottext">pretty' :: Maybe Width -&gt; PrettyPrintEnv -&gt; Term v a -&gt; ColorText
</span><a href="Unison.TermPrinter.html#pretty%27"><span class="hs-identifier hs-var hs-var">pretty'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681822530"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681822530"><span class="hs-identifier hs-var">width</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681822529"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822529"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681822528"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822528"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><span class="annottext">Width -&gt; Pretty ColorText -&gt; ColorText
forall s. (Monoid s, IsString s) =&gt; Width -&gt; Pretty s -&gt; s
</span><a href="Unison.Util.Pretty.html#render"><span class="hs-identifier hs-var">PP.render</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681822530"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty ColorText -&gt; ColorText) -&gt; Pretty ColorText -&gt; ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty ColorText)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822529"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="Unison.TermPrinter.html#emptyAc"><span class="hs-identifier hs-var">emptyAc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822529"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822528"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span class="annot"><a href="Unison.TermPrinter.html#pretty%27"><span class="hs-identifier hs-var">pretty'</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Width
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span id="local-6989586621681822526"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822526"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681822525"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822525"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><span class="annottext">Pretty ColorText -&gt; ColorText
forall s. (Monoid s, IsString s) =&gt; Pretty s -&gt; s
</span><a href="Unison.Util.Pretty.html#renderUnbroken"><span class="hs-identifier hs-var">PP.renderUnbroken</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty ColorText -&gt; ColorText) -&gt; Pretty ColorText -&gt; ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty ColorText)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822526"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="Unison.TermPrinter.html#emptyAc"><span class="hs-identifier hs-var">emptyAc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822526"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822525"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- Information about the context in which a term appears, which affects how the</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- term should be rendered.</span><span>
</span><span id="line-71"></span><span class="hs-keyword">data</span><span> </span><span id="AmbientContext"><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-var">AmbientContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="AmbientContext"><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-var">AmbientContext</span></a></span></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-special">{</span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-comment">-- The operator precedence of the enclosing context (a number from 0 to 11,</span><span>
</span><span id="line-74"></span><span>    </span><span class="hs-comment">-- or -1 to render without outer parentheses unconditionally).</span><span>
</span><span id="line-75"></span><span>    </span><span class="hs-comment">-- Function application has precedence 10.</span><span>
</span><span id="line-76"></span><span>    </span><span id="precedence"><span class="annot"><span class="annottext">AmbientContext -&gt; Int
</span><a href="Unison.TermPrinter.html#precedence"><span class="hs-identifier hs-var hs-var">precedence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-77"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="blockContext"><span class="annot"><span class="annottext">AmbientContext -&gt; BlockContext
</span><a href="Unison.TermPrinter.html#blockContext"><span class="hs-identifier hs-var hs-var">blockContext</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#BlockContext"><span class="hs-identifier hs-type">BlockContext</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="infixContext"><span class="annot"><span class="annottext">AmbientContext -&gt; InfixContext
</span><a href="Unison.TermPrinter.html#infixContext"><span class="hs-identifier hs-var hs-var">infixContext</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#InfixContext"><span class="hs-identifier hs-type">InfixContext</span></a></span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="imports"><span class="annot"><span class="annottext">AmbientContext -&gt; Imports
</span><a href="Unison.TermPrinter.html#imports"><span class="hs-identifier hs-var hs-var">imports</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="docContext"><span class="annot"><span class="annottext">AmbientContext -&gt; DocLiteralContext
</span><a href="Unison.TermPrinter.html#docContext"><span class="hs-identifier hs-var hs-var">docContext</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#DocLiteralContext"><span class="hs-identifier hs-type">DocLiteralContext</span></a></span><span>
</span><span id="line-81"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="elideUnit"><span class="annot"><span class="annottext">AmbientContext -&gt; Bool
</span><a href="Unison.TermPrinter.html#elideUnit"><span class="hs-identifier hs-var hs-var">elideUnit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- `True` if a `()` at the end of a block should be elided</span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-comment">-- Description of the position of this ABT node, when viewed in the</span><span>
</span><span id="line-85"></span><span class="hs-comment">-- surface syntax.</span><span>
</span><span id="line-86"></span><span class="hs-keyword">data</span><span> </span><span id="BlockContext"><span class="annot"><a href="Unison.TermPrinter.html#BlockContext"><span class="hs-identifier hs-var">BlockContext</span></a></span></span><span>
</span><span id="line-87"></span><span>  </span><span class="hs-comment">-- This ABT node is at the top level of a TermParser.block.</span><span>
</span><span id="line-88"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Block"><span class="annot"><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span></span><span>
</span><span id="line-89"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="Normal"><span class="annot"><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822512"><span id="local-6989586621681822514"><span class="annot"><span class="annottext">BlockContext -&gt; BlockContext -&gt; Bool
(BlockContext -&gt; BlockContext -&gt; Bool)
-&gt; (BlockContext -&gt; BlockContext -&gt; Bool) -&gt; Eq BlockContext
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: BlockContext -&gt; BlockContext -&gt; Bool
$c/= :: BlockContext -&gt; BlockContext -&gt; Bool
== :: BlockContext -&gt; BlockContext -&gt; Bool
$c== :: BlockContext -&gt; BlockContext -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822505"><span id="local-6989586621681822507"><span id="local-6989586621681822509"><span class="annot"><span class="annottext">Int -&gt; BlockContext -&gt; ShowS
[BlockContext] -&gt; ShowS
BlockContext -&gt; String
(Int -&gt; BlockContext -&gt; ShowS)
-&gt; (BlockContext -&gt; String)
-&gt; ([BlockContext] -&gt; ShowS)
-&gt; Show BlockContext
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [BlockContext] -&gt; ShowS
$cshowList :: [BlockContext] -&gt; ShowS
show :: BlockContext -&gt; String
$cshow :: BlockContext -&gt; String
showsPrec :: Int -&gt; BlockContext -&gt; ShowS
$cshowsPrec :: Int -&gt; BlockContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">data</span><span> </span><span id="InfixContext"><span class="annot"><a href="Unison.TermPrinter.html#InfixContext"><span class="hs-identifier hs-var">InfixContext</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-comment">-- This ABT node is an infix operator being used in infix position.</span><span>
</span><span id="line-94"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="Infix"><span class="annot"><a href="Unison.TermPrinter.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="NonInfix"><span class="annot"><a href="Unison.TermPrinter.html#NonInfix"><span class="hs-identifier hs-var">NonInfix</span></a></span></span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822498"><span id="local-6989586621681822500"><span class="annot"><span class="annottext">InfixContext -&gt; InfixContext -&gt; Bool
(InfixContext -&gt; InfixContext -&gt; Bool)
-&gt; (InfixContext -&gt; InfixContext -&gt; Bool) -&gt; Eq InfixContext
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: InfixContext -&gt; InfixContext -&gt; Bool
$c/= :: InfixContext -&gt; InfixContext -&gt; Bool
== :: InfixContext -&gt; InfixContext -&gt; Bool
$c== :: InfixContext -&gt; InfixContext -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822492"><span id="local-6989586621681822494"><span id="local-6989586621681822496"><span class="annot"><span class="annottext">Int -&gt; InfixContext -&gt; ShowS
[InfixContext] -&gt; ShowS
InfixContext -&gt; String
(Int -&gt; InfixContext -&gt; ShowS)
-&gt; (InfixContext -&gt; String)
-&gt; ([InfixContext] -&gt; ShowS)
-&gt; Show InfixContext
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [InfixContext] -&gt; ShowS
$cshowList :: [InfixContext] -&gt; ShowS
show :: InfixContext -&gt; String
$cshow :: InfixContext -&gt; String
showsPrec :: Int -&gt; InfixContext -&gt; ShowS
$cshowsPrec :: Int -&gt; InfixContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">data</span><span> </span><span id="DocLiteralContext"><span class="annot"><a href="Unison.TermPrinter.html#DocLiteralContext"><span class="hs-identifier hs-var">DocLiteralContext</span></a></span></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-comment">-- We won't try and render this ABT node or anything under it as a [: @Doc literal :]</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="NoDoc"><span class="annot"><a href="Unison.TermPrinter.html#NoDoc"><span class="hs-identifier hs-var">NoDoc</span></a></span></span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-comment">-- We'll keep checking as we recurse down</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="MaybeDoc"><span class="annot"><a href="Unison.TermPrinter.html#MaybeDoc"><span class="hs-identifier hs-var">MaybeDoc</span></a></span></span><span>
</span><span id="line-103"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822486"><span id="local-6989586621681822488"><span class="annot"><span class="annottext">DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
(DocLiteralContext -&gt; DocLiteralContext -&gt; Bool)
-&gt; (DocLiteralContext -&gt; DocLiteralContext -&gt; Bool)
-&gt; Eq DocLiteralContext
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
$c/= :: DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
== :: DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
$c== :: DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822480"><span id="local-6989586621681822482"><span id="local-6989586621681822484"><span class="annot"><span class="annottext">Int -&gt; DocLiteralContext -&gt; ShowS
[DocLiteralContext] -&gt; ShowS
DocLiteralContext -&gt; String
(Int -&gt; DocLiteralContext -&gt; ShowS)
-&gt; (DocLiteralContext -&gt; String)
-&gt; ([DocLiteralContext] -&gt; ShowS)
-&gt; Show DocLiteralContext
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [DocLiteralContext] -&gt; ShowS
$cshowList :: [DocLiteralContext] -&gt; ShowS
show :: DocLiteralContext -&gt; String
$cshow :: DocLiteralContext -&gt; String
showsPrec :: Int -&gt; DocLiteralContext -&gt; ShowS
$cshowsPrec :: Int -&gt; DocLiteralContext -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span class="hs-comment">{- Explanation of precedence handling

   We illustrate precedence rules as follows.

     &gt;=10
       10f 10x

   This example shows that a function application f x is enclosed in
   parentheses whenever the ambient precedence around it is &gt;= 10, and that
   when printing its two components, an ambient precedence of 10 is used in
   both places.

   The pretty-printer uses the following rules for printing terms.

     &gt;=12
       let x = (-1)y
         1z

     &gt;=11
       ! 11x
       ' 11x
       11x ?

     &gt;=10
       10f 10x 10y ...
       termLink t
       typeLink t

     &gt;=3
       x -&gt; 2y
       3x + 3y + ... 3z

     &gt;=2
       if 0a then 0b else 0c
       handle 0b with 0h
       case 2x of
         a | 2g -&gt; 0b

     &gt;=0
       10a : 0Int


   And the following for patterns.

     &gt;=11
       x@11p

     &gt;=10
       Con 10p 10q ...

     -- never any external parens added around the following
       { p }
       { Eff 10p 10q ... -&gt; 0k }

-}</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="annot"><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-type">pretty0</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681823171"><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-167"></span><span id="pretty0"><span class="annot"><span class="annottext">pretty0 :: PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var hs-var">pretty0</span></a></span></span><span>
</span><span id="line-168"></span><span>  </span><span id="local-6989586621681822479"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span></span><span>
</span><span id="line-169"></span><span>  </span><span id="local-6989586621681822478"><span class="annot"><span class="annottext">a :: AmbientContext
</span><a href="#local-6989586621681822478"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">precedence :: AmbientContext -&gt; Int
</span><a href="Unison.TermPrinter.html#precedence"><span class="hs-identifier hs-var">precedence</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822477"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockContext :: AmbientContext -&gt; BlockContext
</span><a href="Unison.TermPrinter.html#blockContext"><span class="hs-identifier hs-var">blockContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822476"><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822476"><span class="hs-identifier hs-var">bc</span></a></span></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">infixContext :: AmbientContext -&gt; InfixContext
</span><a href="Unison.TermPrinter.html#infixContext"><span class="hs-identifier hs-var">infixContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822475"><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">imports :: AmbientContext -&gt; Imports
</span><a href="Unison.TermPrinter.html#imports"><span class="hs-identifier hs-var">imports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822474"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span></span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">docContext :: AmbientContext -&gt; DocLiteralContext
</span><a href="Unison.TermPrinter.html#docContext"><span class="hs-identifier hs-var">docContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822473"><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span></span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">elideUnit :: AmbientContext -&gt; Bool
</span><a href="Unison.TermPrinter.html#elideUnit"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822472"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822472"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-177"></span><span>  </span><span id="local-6989586621681822471"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822471"><span class="hs-identifier hs-var">term</span></a></span></span><span>
</span><span id="line-178"></span><span>  </span><span class="hs-comment">-- Note: the set of places in this function that call calcImports has to be kept in sync</span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-comment">-- with the definition of immediateChildBlockTerms, otherwise `use` statements get</span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-comment">-- inserted at the wrong scope.</span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822470"><span class="hs-identifier hs-var">specialCases</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822471"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">((Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
 -&gt; Pretty (SyntaxText' Reference))
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Var'</span></span><span> </span><span id="local-6989586621681822468"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822468"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822466"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822466"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-183"></span><span>      </span><span class="hs-comment">-- OK since all term vars are user specified, any freshening was just added during typechecking</span><span>
</span><span id="line-184"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822466"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822466"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashQualified Name
forall v. Var v =&gt; v -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">HQ.unsafeFromVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; v
forall v. Var v =&gt; v -&gt; v
</span><span class="hs-identifier hs-var">Var.reset</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822468"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681822460"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822460"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822459"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822460"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822459"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822459"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822459"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822460"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span id="local-6989586621681822454"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822454"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-188"></span><span>      </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#LinkKeyword"><span class="hs-identifier hs-var">S.LinkKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;termLink &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-189"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822451"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822454"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822451"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822451"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822451"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822454"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span id="local-6989586621681822449"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822449"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-192"></span><span>      </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#LinkKeyword"><span class="hs-identifier hs-var">S.LinkKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;typeLink &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-193"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822448"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Element Reference
forall r. r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TypeReference"><span class="hs-identifier hs-var">S.TypeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822449"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822448"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-194"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822448"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822448"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PrettyPrintEnv.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822449"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ann'</span></span><span> </span><span id="local-6989586621681822444"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822444"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681822443"><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681822443"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>        </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822444"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-identifier hs-var">PP.hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#TypeAscriptionColon"><span class="hs-identifier hs-var">S.TypeAscriptionColon</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; :&quot;</span></span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports -&gt; Int -&gt; Type v () -&gt; Pretty (SyntaxText' Reference)
forall v a.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports -&gt; Int -&gt; Type v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TypePrinter.html#pretty0"><span class="hs-identifier hs-var">TypePrinter.pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681822443"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Int'</span></span><span>     </span><span id="local-6989586621681822437"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822437"><span class="hs-identifier hs-var">i</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822437"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822437"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Nat'</span></span><span>     </span><span id="local-6989586621681822432"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681822432"><span class="hs-identifier hs-var">u</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681822432"><span class="hs-identifier hs-var">u</span></a></span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Float'</span></span><span>   </span><span id="local-6989586621681822430"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681822430"><span class="hs-identifier hs-var">f</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681822430"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-comment">-- TODO How to handle Infinity, -Infinity and NaN?  Parser cannot parse</span><span>
</span><span id="line-203"></span><span>    </span><span class="hs-comment">--      them.  Haskell doesn't have literals for them either.  Is this</span><span>
</span><span id="line-204"></span><span>    </span><span class="hs-comment">--      function only required to operate on terms produced by the parser?</span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-comment">--      In which case the code is fine as it stands.  If it can somehow run</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-comment">--      on values produced by execution (or, one day, on terms produced by</span><span>
</span><span id="line-207"></span><span>    </span><span class="hs-comment">--      metaprograms), then it needs to be able to print them (and then the</span><span>
</span><span id="line-208"></span><span>    </span><span class="hs-comment">--      parser ought to be able to parse them, to maintain symmetry.)</span><span>
</span><span id="line-209"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Boolean'</span></span><span> </span><span id="local-6989586621681822428"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822428"><span class="hs-identifier hs-var">b</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BooleanLiteral"><span class="hs-identifier hs-var">S.BooleanLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822428"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Text'</span></span><span>    </span><span id="local-6989586621681822425"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681822425"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#TextLiteral"><span class="hs-identifier hs-var">S.TextLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">U.ushow</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681822425"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Char'</span></span><span>    </span><span id="local-6989586621681822421"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822421"><span class="hs-identifier hs-var">c</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#CharLiteral"><span class="hs-identifier hs-var">S.CharLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Maybe Char
</span><a href="Unison.Lexer.html#showEscapeChar"><span class="hs-identifier hs-var">showEscapeChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822421"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-212"></span><span>                                            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681822419"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822419"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822419"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-213"></span><span>                                            </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span class="annot"><span class="annottext">Char -&gt; ShowS
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822421"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-214"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Blank'</span></span><span>   </span><span id="local-6989586621681822417"><span class="annot"><span class="annottext">Blank ()
</span><a href="#local-6989586621681822417"><span class="hs-identifier hs-var">id</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Blank"><span class="hs-identifier hs-var">S.Blank</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe String -&gt; String
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Blank () -&gt; Maybe String
forall loc. Blank loc -&gt; Maybe String
</span><span class="hs-identifier hs-var">Blank.nameb</span></span><span> </span><span class="annot"><span class="annottext">Blank ()
</span><a href="#local-6989586621681822417"><span class="hs-identifier hs-var">id</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span id="local-6989586621681822412"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822412"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681822411"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822411"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822410"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822409"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-217"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>        </span><span id="local-6989586621681822409"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822409"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822410"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-219"></span><span>        </span><span id="local-6989586621681822410"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822410"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822412"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822411"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Request'</span></span><span> </span><span id="local-6989586621681822405"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822405"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681822404"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822404"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822403"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822402"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-222"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-223"></span><span>        </span><span id="local-6989586621681822402"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822402"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822403"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-224"></span><span>        </span><span id="local-6989586621681822403"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822403"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822405"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822404"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Handle'</span></span><span> </span><span id="local-6989586621681822399"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822399"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621681822398"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822398"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-226"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Bool
forall s. Pretty s -&gt; Bool
</span><a href="Unison.Util.Pretty.html#isMultiLine"><span class="hs-identifier hs-var">PP.isMultiLine</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822396"><span class="hs-identifier hs-var">pb</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Bool
forall s. Pretty s -&gt; Bool
</span><a href="Unison.Util.Pretty.html#isMultiLine"><span class="hs-identifier hs-var">PP.isMultiLine</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822394"><span class="hs-identifier hs-var">ph</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-227"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;handle&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822396"><span class="hs-identifier hs-var">pb</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;with&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822394"><span class="hs-identifier hs-var">ph</span></a></span><span>
</span><span id="line-229"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-231"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;handle&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822396"><span class="hs-identifier hs-var">pb</span></a></span><span>
</span><span id="line-232"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span>
</span><span id="line-233"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;with&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822394"><span class="hs-identifier hs-var">ph</span></a></span><span>
</span><span id="line-234"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-236"></span><span>        </span><span id="local-6989586621681822396"><span class="annot"><span class="annottext">pb :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822396"><span class="hs-identifier hs-var hs-var">pb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822389"><span class="hs-identifier hs-var">pblock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822398"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-237"></span><span>        </span><span id="local-6989586621681822394"><span class="annot"><span class="annottext">ph :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822394"><span class="hs-identifier hs-var hs-var">ph</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822389"><span class="hs-identifier hs-var">pblock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822399"><span class="hs-identifier hs-var">h</span></a></span><span>
</span><span id="line-238"></span><span>        </span><span id="local-6989586621681822389"><span class="annot"><span class="annottext">pblock :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822389"><span class="hs-identifier hs-var hs-var">pblock</span></a></span></span><span> </span><span id="local-6989586621681822388"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822388"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822387"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822387"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822386"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822386"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822388"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-239"></span><span>                    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822386"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822387"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822388"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span id="local-6989586621681822383"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822383"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#UnitRef"><span class="hs-identifier hs-var">DD.UnitRef</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-241"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var">isBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822383"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span>  </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-242"></span><span>        </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelayForceChar"><span class="hs-identifier hs-var">S.DelayForceChar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;!&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var">isBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822383"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822383"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span id="local-6989586621681822377"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822377"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-245"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var">isBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822377"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-246"></span><span>        </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelayForceChar"><span class="hs-identifier hs-var">S.DelayForceChar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;'&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-247"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var">isBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822377"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822377"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681822375"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681822375"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-249"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822372"><span class="hs-identifier hs-var">optSpace</span></a></span><span>
</span><span id="line-250"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; Seq (Term3 v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822372"><span class="hs-identifier hs-var">optSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822372"><span class="hs-identifier hs-var">optSpace</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>                            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>                            </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681822375"><span class="hs-identifier hs-var">xs</span></a></span><span>
</span><span id="line-253"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822372"><span class="hs-identifier hs-var">optSpace</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;]&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-254"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822372"><span class="annot"><span class="annottext">optSpace :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822372"><span class="hs-identifier hs-var hs-var">optSpace</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#orElse"><span class="hs-identifier hs-var">PP.orElse</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">If'</span></span><span> </span><span id="local-6989586621681822369"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822369"><span class="hs-identifier hs-var">cond</span></a></span></span><span> </span><span id="local-6989586621681822368"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822368"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681822367"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822367"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-256"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Bool
forall s. Pretty s -&gt; Bool
</span><a href="Unison.Util.Pretty.html#isMultiLine"><span class="hs-identifier hs-var">PP.isMultiLine</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822366"><span class="hs-identifier hs-var">pt</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Bool
forall s. Pretty s -&gt; Bool
</span><a href="Unison.Util.Pretty.html#isMultiLine"><span class="hs-identifier hs-var">PP.isMultiLine</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822365"><span class="hs-identifier hs-var">pf</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-257"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;if &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822364"><span class="hs-identifier hs-var">pcond</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; then&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822366"><span class="hs-identifier hs-var">pt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-258"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;else&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822365"><span class="hs-identifier hs-var">pf</span></a></span><span>
</span><span id="line-259"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-260"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-261"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;if&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822364"><span class="hs-identifier hs-var">pcond</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; then&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822366"><span class="hs-identifier hs-var">pt</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-262"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;else&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822365"><span class="hs-identifier hs-var">pf</span></a></span><span>
</span><span id="line-263"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-264"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-265"></span><span>       </span><span id="local-6989586621681822364"><span class="annot"><span class="annottext">pcond :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822364"><span class="hs-identifier hs-var hs-var">pcond</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822369"><span class="hs-identifier hs-var">cond</span></a></span><span>
</span><span id="line-266"></span><span>       </span><span id="local-6989586621681822366"><span class="annot"><span class="annottext">pt :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822366"><span class="hs-identifier hs-var hs-var">pt</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822363"><span class="hs-identifier hs-var">branch</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822368"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-267"></span><span>       </span><span id="local-6989586621681822365"><span class="annot"><span class="annottext">pf :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822365"><span class="hs-identifier hs-var hs-var">pf</span></a></span></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822363"><span class="hs-identifier hs-var">branch</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822367"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-268"></span><span>       </span><span id="local-6989586621681822363"><span class="annot"><span class="annottext">branch :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822363"><span class="hs-identifier hs-var hs-var">branch</span></a></span></span><span> </span><span id="local-6989586621681822362"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822362"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822361"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822361"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822360"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822360"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822362"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-269"></span><span>                   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822360"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822361"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822362"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">And'</span></span><span> </span><span id="local-6989586621681822358"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822358"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681822357"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822357"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-271"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-272"></span><span>        </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822358"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;&amp;&amp;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-274"></span><span>        </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822357"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-275"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Or'</span></span><span> </span><span id="local-6989586621681822355"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822355"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621681822354"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822354"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-277"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-278"></span><span>        </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822355"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;||&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822354"><span class="hs-identifier hs-var">y</span></a></span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><a href="Unison.TermPrinter.html#LetBlock"><span class="hs-identifier hs-type">LetBlock</span></a></span><span> </span><span id="local-6989586621681822352"><span class="annot"><span class="annottext">[(v, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822352"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621681822351"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822351"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822350"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822350"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822349"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822349"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822471"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-284"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; BlockContext
-&gt; [(v, Term3 v PrintAnnotation)]
-&gt; Term3 v PrintAnnotation
-&gt; Imports
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
Var v =&gt;
Bool
-&gt; BlockContext
-&gt; [(v, Term3 v PrintAnnotation)]
-&gt; Term3 v PrintAnnotation
-&gt; Imports
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822348"><span class="hs-identifier hs-var">printLet</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822472"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822476"><span class="hs-identifier hs-var">bc</span></a></span><span> </span><span class="annot"><span class="annottext">[(v, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822352"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822351"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822350"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822349"><span class="hs-identifier hs-var">uses</span></a></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">-- Some matches are rendered as a destructuring bind, like</span><span>
</span><span id="line-286"></span><span>    </span><span class="hs-comment">--   match foo with (a,b) -&gt; blah</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">-- becomes</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">--   (a,b) = foo</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">--   blah</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-comment">-- See `isDestructuringBind` definition.</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span id="local-6989586621681822346"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822346"><span class="hs-identifier hs-var">scrutinee</span></a></span></span><span> </span><span id="local-6989586621681822345"><span class="annot"><span class="annottext">cs :: [MatchCase () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822345"><span class="hs-identifier hs-var">cs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span id="local-6989586621681822343"><span class="annot"><span class="annottext">Pattern ()
</span><a href="#local-6989586621681822343"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681822342"><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681822342"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AbsN'</span></span><span> </span><span id="local-6989586621681822341"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822341"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822340"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822340"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-292"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
-&gt; [MatchCase () (Term3 v PrintAnnotation)] -&gt; Bool
forall v (f :: * -&gt; *) a loc.
Ord v =&gt;
Term f v a -&gt; [MatchCase loc (Term f v a)] -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDestructuringBind"><span class="hs-identifier hs-var">isDestructuringBind</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822346"><span class="hs-identifier hs-var">scrutinee</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822345"><span class="hs-identifier hs-var">cs</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822337"><span class="hs-identifier hs-var">letIntro</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-293"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822336"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822335"><span class="hs-identifier hs-var">eq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822334"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>          </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822340"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-295"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-296"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-297"></span><span>      </span><span id="local-6989586621681822337"><span class="annot"><span class="annottext">letIntro :: Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822337"><span class="hs-identifier hs-var hs-var">letIntro</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822476"><span class="hs-identifier hs-var">bc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-298"></span><span>        </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-299"></span><span>        </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681822332"><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822332"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-300"></span><span>          </span><span class="hs-comment">-- We don't call calcImports here, because we can't easily do the</span><span>
</span><span id="line-301"></span><span>          </span><span class="hs-comment">-- corequisite step in immediateChildBlockTerms (because it doesn't</span><span>
</span><span id="line-302"></span><span>          </span><span class="hs-comment">-- know bc.)  So we'll fail to take advantage of any opportunity</span><span>
</span><span id="line-303"></span><span>          </span><span class="hs-comment">-- this let block provides to add a use statement.  Not so bad.</span><span>
</span><span id="line-304"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot;let&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822332"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-305"></span><span>      </span><span id="local-6989586621681822336"><span class="annot"><span class="annottext">lhs :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822336"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference), [v])
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern ()
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822341"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern ()
</span><a href="#local-6989586621681822343"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-306"></span><span>         </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation) -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822330"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681822342"><span class="hs-identifier hs-var">guard</span></a></span><span>
</span><span id="line-307"></span><span>      </span><span id="local-6989586621681822330"><span class="annot"><span class="annottext">printGuard :: Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822330"><span class="hs-identifier hs-var hs-var">printGuard</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-308"></span><span>      </span><span class="annot"><a href="#local-6989586621681822330"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681822329"><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822329"><span class="hs-identifier hs-var">g'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681822328"><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822328"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
-&gt; ([v], Term (F v () ()) v PrintAnnotation)
forall (f :: * -&gt; *) v a. Term f v a -&gt; ([v], Term f v a)
</span><span class="hs-identifier hs-var">ABT.unabs</span></span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822329"><span class="hs-identifier hs-var">g'</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; |&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term (F v () ()) v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822328"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-310"></span><span>      </span><span id="local-6989586621681822335"><span class="annot"><span class="annottext">eq :: Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822335"><span class="hs-identifier hs-var hs-var">eq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BindingEquals"><span class="hs-identifier hs-var">S.BindingEquals</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot; =&quot;</span></span><span>
</span><span id="line-311"></span><span>      </span><span id="local-6989586621681822334"><span class="annot"><span class="annottext">rhs :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822334"><span class="hs-identifier hs-var hs-var">rhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-312"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822325"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822325"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822324"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822324"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822346"><span class="hs-identifier hs-var">scrutinee</span></a></span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-313"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822324"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822325"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822346"><span class="hs-identifier hs-var">scrutinee</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span id="local-6989586621681822323"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822323"><span class="hs-identifier hs-var">scrutinee</span></a></span></span><span> </span><span id="local-6989586621681822322"><span class="annot"><span class="annottext">[MatchCase () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822322"><span class="hs-identifier hs-var">branches</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-315"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Bool
forall s. Pretty s -&gt; Bool
</span><a href="Unison.Util.Pretty.html#isMultiLine"><span class="hs-identifier hs-var">PP.isMultiLine</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822321"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-316"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;match &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822321"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; with&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822320"><span class="hs-identifier hs-var">pbs</span></a></span><span>
</span><span id="line-318"></span><span>       </span><span class="hs-special">]</span><span>
</span><span id="line-319"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;match &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822321"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; with&quot;</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822320"><span class="hs-identifier hs-var">pbs</span></a></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681822321"><span class="annot"><span class="annottext">ps :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822321"><span class="hs-identifier hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822323"><span class="hs-identifier hs-var">scrutinee</span></a></span><span>
</span><span id="line-321"></span><span>            </span><span id="local-6989586621681822320"><span class="annot"><span class="annottext">pbs :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822320"><span class="hs-identifier hs-var hs-var">pbs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#printCase"><span class="hs-identifier hs-var">printCase</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[MatchCase () (Term3 v PrintAnnotation)]
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
forall ann tm. [MatchCase ann tm] -&gt; [MatchCase' ann tm]
</span><a href="Unison.TermPrinter.html#arity1Branches"><span class="hs-identifier hs-var">arity1Branches</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822322"><span class="hs-identifier hs-var">branches</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- don't print with `cases` syntax</span><span>
</span><span id="line-322"></span><span>
</span><span id="line-323"></span><span>    </span><span id="local-6989586621681822317"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822317"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;error: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822317"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621681822470"><span class="annot"><span class="annottext">specialCases :: Term3 v PrintAnnotation
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822470"><span class="hs-identifier hs-var hs-var">specialCases</span></a></span></span><span> </span><span id="local-6989586621681822316"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822316"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span id="local-6989586621681822315"><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822315"><span class="hs-identifier hs-var">_go</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681822314"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822314"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#prettyDoc2"><span class="hs-identifier hs-var">prettyDoc2</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822478"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822316"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822314"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-326"></span><span>  </span><span class="annot"><a href="#local-6989586621681822470"><span class="hs-identifier hs-var">specialCases</span></a></span><span> </span><span id="local-6989586621681822312"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span id="local-6989586621681822311"><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822311"><span class="hs-identifier hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Var v =&gt; Term3 v PrintAnnotation -&gt; Bool
Term3 v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681822310"><span class="hs-identifier hs-var">binaryOpsPred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="Unison.Builtin.Decls.html#Doc"><span class="hs-identifier hs-var">DD.Doc</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext -&gt; DocLiteralContext -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="Unison.TermPrinter.html#MaybeDoc"><span class="hs-identifier hs-var">MaybeDoc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v. Term3 v PrintAnnotation -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDocLiteral"><span class="hs-identifier hs-var">isDocLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-329"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v a.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports -&gt; Term3 v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyDoc"><span class="hs-identifier hs-var">prettyDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822478"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">docContext :: DocLiteralContext
</span><a href="Unison.TermPrinter.html#docContext"><span class="hs-identifier hs-var">docContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="Unison.TermPrinter.html#NoDoc"><span class="hs-identifier hs-var">NoDoc</span></a></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier hs-type">TupleTerm'</span></a></span><span> </span><span class="hs-special">[</span><span id="local-6989586621681822306"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822306"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-332"></span><span>      </span><span class="hs-keyword">let</span><span>
</span><span id="line-333"></span><span>          </span><span id="local-6989586621681822305"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822305"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="Unison.Builtin.Decls.html#pairCtorRef"><span class="hs-identifier hs-var">DD.pairCtorRef</span></a></span><span>
</span><span id="line-334"></span><span>          </span><span id="local-6989586621681822303"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822303"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822305"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-335"></span><span>          </span><span id="local-6989586621681822302"><span class="annot"><span class="annottext">pair :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822302"><span class="hs-identifier hs-var hs-var">pair</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822303"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681822475"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822305"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822303"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-336"></span><span>      </span><span class="hs-keyword">in</span><span>
</span><span id="line-337"></span><span>      </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822302"><span class="hs-identifier hs-var">pair</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span>
</span><span id="line-338"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822306"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="Unison.Builtin.Decls.html#unitCtorRef"><span class="hs-identifier hs-var">DD.unitCtorRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;()&quot;</span></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier hs-type">TupleTerm'</span></a></span><span> </span><span id="local-6989586621681822300"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681822300"><span class="hs-identifier hs-var">xs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-341"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681822299"><span class="annot"><span class="annottext">tupleLink :: Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822299"><span class="hs-identifier hs-var hs-var">tupleLink</span></a></span></span><span> </span><span id="local-6989586621681822298"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822298"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Element Reference
forall r. r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TypeReference"><span class="hs-identifier hs-var">S.TypeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#unitRef"><span class="hs-identifier hs-var">DD.unitRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822298"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-342"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822299"><span class="hs-identifier hs-var">tupleLink</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;(&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822296"><span class="hs-identifier hs-var">commaList</span></a></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681822300"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822299"><span class="hs-identifier hs-var">tupleLink</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;)&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#Bytes%27"><span class="hs-identifier hs-type">Bytes'</span></a></span><span> </span><span id="local-6989586621681822294"><span class="annot"><span class="annottext">[Word64]
</span><a href="#local-6989586621681822294"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-345"></span><span>      </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BytesLiteral"><span class="hs-identifier hs-var">S.BytesLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;0xs&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bytes -&gt; Pretty (SyntaxText' Reference)
forall a s. (Show a, IsString s) =&gt; a -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#shown"><span class="hs-identifier hs-var">PP.shown</span></a></span><span> </span><span class="annot"><span class="annottext">(Bytes -&gt; Pretty (SyntaxText' Reference))
-&gt; Bytes -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Word8] -&gt; Bytes
</span><a href="Unison.Util.Bytes.html#fromWord8s"><span class="hs-identifier hs-var">Bytes.fromWord8s</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word64 -&gt; Word8) -&gt; [Word64] -&gt; [Word8]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word8
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">[Word64]
</span><a href="#local-6989586621681822294"><span class="hs-identifier hs-var">bs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">BinaryAppsPred'</span></span><span> </span><span id="local-6989586621681822289"><span class="annot"><a href="#local-6989586621681822289"><span class="hs-identifier hs-var">apps</span></a></span></span><span> </span><span id="local-6989586621681822288"><span class="annot"><a href="#local-6989586621681822288"><span class="hs-identifier hs-var">lastArg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-347"></span><span>      </span><span class="annot"><span class="annottext">[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
Var v =&gt;
[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822287"><span class="hs-identifier hs-var">binaryApps</span></a></span><span> </span><span class="annot"><span class="annottext">[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822289"><span class="hs-identifier hs-var">apps</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822288"><span class="hs-identifier hs-var">lastArg</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-348"></span><span>    </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, Term3 v PrintAnnotation -&gt; Bool)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681822286"><span class="hs-identifier hs-var">nonForcePred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-349"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">AppsPred'</span></span><span> </span><span id="local-6989586621681822284"><span class="annot"><a href="#local-6989586621681822284"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681822283"><span class="annot"><a href="#local-6989586621681822283"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-350"></span><span>        </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822284"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span>
</span><span id="line-351"></span><span>          </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s a.
(Foldable f, IsString s) =&gt;
(a -&gt; Pretty s) -&gt; f a -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spacedMap"><span class="hs-identifier hs-var">PP.spacedMap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681822283"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-352"></span><span>      </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, Term3 v PrintAnnotation -&gt; Bool)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v -&gt; Bool
Var v =&gt; v -&gt; Bool
</span><a href="#local-6989586621681822281"><span class="hs-identifier hs-var">nonUnitArgPred</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-353"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#LamsNamedMatch%27"><span class="hs-identifier hs-type">LamsNamedMatch'</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621681822279"><span class="annot"><span class="annottext">[MatchCase' () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822279"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">v -&gt; Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-354"></span><span>          </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-355"></span><span>            </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;cases&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#printCase"><span class="hs-identifier hs-var">printCase</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase' () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822279"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-356"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">LamsNamedPred'</span></span><span> </span><span id="local-6989586621681822277"><span class="annot"><a href="#local-6989586621681822277"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822276"><span class="annot"><a href="#local-6989586621681822276"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-357"></span><span>          </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-358"></span><span>            </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822275"><span class="hs-identifier hs-var">varList</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822277"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; -&gt;&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822276"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-359"></span><span>        </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, v -&gt; Bool)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822311"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822312"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-360"></span><span>
</span><span id="line-361"></span><span>  </span><span id="local-6989586621681822274"><span class="annot"><span class="annottext">sepList :: Pretty (SyntaxText' Reference)
-&gt; [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822274"><span class="hs-identifier hs-var hs-var">sepList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
-&gt; [Term3 v PrintAnnotation]
-&gt; Pretty (SyntaxText' Reference)
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; m -&gt; [a] -&gt; m
</span><a href="#local-6989586621681822273"><span class="hs-identifier hs-var">sepList'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>  </span><span id="local-6989586621681822273"><span class="annot"><span class="annottext">sepList' :: (a -&gt; m) -&gt; m -&gt; [a] -&gt; m
</span><a href="#local-6989586621681822273"><span class="hs-identifier hs-var hs-var">sepList'</span></a></span></span><span> </span><span id="local-6989586621681822272"><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621681822272"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681822271"><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621681822271"><span class="hs-identifier hs-var">sep</span></a></span></span><span> </span><span id="local-6989586621681822270"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681822270"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[m] -&gt; m
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">([m] -&gt; m) -&gt; [m] -&gt; m
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">m -&gt; [m] -&gt; [m]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="annot"><span class="annottext">m
</span><a href="#local-6989586621681822271"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; m) -&gt; [a] -&gt; [m]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; m
</span><a href="#local-6989586621681822272"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681822270"><span class="hs-identifier hs-var">xs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>  </span><span id="local-6989586621681822275"><span class="annot"><span class="annottext">varList :: [v] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822275"><span class="hs-identifier hs-var hs-var">varList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; Pretty (SyntaxText' Reference)
forall m a. Monoid m =&gt; (a -&gt; m) -&gt; m -&gt; [a] -&gt; m
</span><a href="#local-6989586621681822273"><span class="hs-identifier hs-var">sepList'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Pretty (SyntaxText' Reference))
-&gt; (v -&gt; Text) -&gt; v -&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Text
forall v. Var v =&gt; v -&gt; Text
</span><span class="hs-identifier hs-var">Var.name</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span>
</span><span id="line-364"></span><span>  </span><span id="local-6989586621681822296"><span class="annot"><span class="annottext">commaList :: [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822296"><span class="hs-identifier hs-var hs-var">commaList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822274"><span class="hs-identifier hs-var">sepList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;,&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span>  </span><span class="annot"><a href="#local-6989586621681822348"><span class="hs-identifier hs-type">printLet</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-367"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-comment">-- elideUnit</span><span>
</span><span id="line-368"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#BlockContext"><span class="hs-identifier hs-type">BlockContext</span></a></span><span>
</span><span id="line-369"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-370"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-371"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span>
</span><span id="line-372"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-374"></span><span>  </span><span id="local-6989586621681822348"><span class="annot"><span class="annottext">printLet :: Bool
-&gt; BlockContext
-&gt; [(v, Term3 v PrintAnnotation)]
-&gt; Term3 v PrintAnnotation
-&gt; Imports
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822348"><span class="hs-identifier hs-var hs-var">printLet</span></a></span></span><span> </span><span id="local-6989586621681822265"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822265"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span> </span><span id="local-6989586621681822264"><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822264"><span class="hs-identifier hs-var">sc</span></a></span></span><span> </span><span id="local-6989586621681822263"><span class="annot"><span class="annottext">[(v, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822263"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span id="local-6989586621681822262"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822262"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621681822261"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822261"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span id="local-6989586621681822260"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822260"><span class="hs-identifier hs-var">uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-375"></span><span>    </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822264"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="annot"><span class="annottext">BlockContext -&gt; BlockContext -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822477"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">12</span></span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>      </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822258"><span class="hs-identifier hs-var">letIntro</span></a></span><span>
</span><span id="line-377"></span><span>      </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822260"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((v, Term3 v PrintAnnotation) -&gt; Pretty (SyntaxText' Reference))
-&gt; [(v, Term3 v PrintAnnotation)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(v, Term3 v PrintAnnotation) -&gt; Pretty (SyntaxText' Reference)
forall v v.
(Var v, Var v) =&gt;
(v, Term3 v PrintAnnotation) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822257"><span class="hs-identifier hs-var">printBinding</span></a></span><span> </span><span class="annot"><span class="annottext">[(v, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822263"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; [Pretty (SyntaxText' Reference)]
forall v.
Var v =&gt;
Term (F v () ()) v PrintAnnotation
-&gt; [Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822256"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822262"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-378"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-379"></span><span>    </span><span id="local-6989586621681822256"><span class="annot"><span class="annottext">body :: Term (F v () ()) v PrintAnnotation
-&gt; [Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822256"><span class="hs-identifier hs-var hs-var">body</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#UnitRef"><span class="hs-identifier hs-var">DD.UnitRef</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822265"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-380"></span><span>    </span><span class="annot"><a href="#local-6989586621681822256"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span id="local-6989586621681822255"><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822255"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term (F v () ()) v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822261"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822255"><span class="hs-identifier hs-var">e</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-381"></span><span>    </span><span id="local-6989586621681822257"><span class="annot"><span class="annottext">printBinding :: (v, Term3 v PrintAnnotation) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822257"><span class="hs-identifier hs-var hs-var">printBinding</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822254"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822254"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822253"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822253"><span class="hs-identifier hs-var">binding</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlank"><span class="hs-identifier hs-var">isBlank</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; String -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; String
forall v. Var v =&gt; v -&gt; String
</span><span class="hs-identifier hs-var">Var.nameStr</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822254"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-382"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822261"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822253"><span class="hs-identifier hs-var">binding</span></a></span><span>
</span><span id="line-383"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding0"><span class="hs-identifier hs-var">prettyBinding0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822261"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; HashQualified Name
forall v. Var v =&gt; v -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">HQ.unsafeFromVar</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822254"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822253"><span class="hs-identifier hs-var">binding</span></a></span><span>
</span><span id="line-384"></span><span>    </span><span id="local-6989586621681822258"><span class="annot"><span class="annottext">letIntro :: Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822258"><span class="hs-identifier hs-var hs-var">letIntro</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681822264"><span class="hs-identifier hs-var">sc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-385"></span><span>      </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-386"></span><span>      </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681822249"><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822249"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot;let&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822249"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span>  </span><span class="hs-comment">-- This predicate controls which binary functions we render as infix</span><span>
</span><span id="line-389"></span><span>  </span><span class="hs-comment">-- operators.  At the moment the policy is just to render symbolic</span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-comment">-- operators as infix - not 'wordy' function names.  So we produce</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-comment">-- &quot;x + y&quot; and &quot;foo x y&quot; but not &quot;x `foo` y&quot;.</span><span>
</span><span id="line-392"></span><span>  </span><span class="annot"><a href="#local-6989586621681822310"><span class="hs-identifier hs-type">binaryOpsPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-393"></span><span>  </span><span id="local-6989586621681822310"><span class="annot"><span class="annottext">binaryOpsPred :: Term3 v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681822310"><span class="hs-identifier hs-var hs-var">binaryOpsPred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681822248"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822248"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822248"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-395"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Var'</span></span><span> </span><span id="local-6989586621681822246"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822246"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; HashQualified Name
forall v. Var v =&gt; v -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">HQ.unsafeFromVar</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822246"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-396"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span>  </span><span class="annot"><a href="#local-6989586621681822286"><span class="hs-identifier hs-type">nonForcePred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-399"></span><span>  </span><span id="local-6989586621681822286"><span class="annot"><span class="annottext">nonForcePred :: Term3 v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681822286"><span class="hs-identifier hs-var hs-var">nonForcePred</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#UnitRef"><span class="hs-identifier hs-var">DD.UnitRef</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-401"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#DocRef"><span class="hs-identifier hs-var">DD.DocRef</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-402"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span>                         </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span>  </span><span class="annot"><a href="#local-6989586621681822281"><span class="hs-identifier hs-type">nonUnitArgPred</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-405"></span><span>  </span><span id="local-6989586621681822281"><span class="annot"><span class="annottext">nonUnitArgPred :: v -&gt; Bool
</span><a href="#local-6989586621681822281"><span class="hs-identifier hs-var hs-var">nonUnitArgPred</span></a></span></span><span> </span><span id="local-6989586621681822244"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822244"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; Text
forall v. Var v =&gt; v -&gt; Text
</span><span class="hs-identifier hs-var">Var.name</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822244"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;()&quot;</span></span><span>
</span><span id="line-406"></span><span>
</span><span id="line-407"></span><span>  </span><span class="hs-comment">-- Render a binary infix operator sequence, like [(a2, f2), (a1, f1)],</span><span>
</span><span id="line-408"></span><span>  </span><span class="hs-comment">-- meaning (a1 `f1` a2) `f2` (a3 rendered by the caller), producing</span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-comment">-- &quot;a1 `f1` a2 `f2`&quot;.  Except the operators are all symbolic, so we won't</span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-comment">-- produce any backticks.  We build the result out from the right,</span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-comment">-- starting at `f2`.</span><span>
</span><span id="line-412"></span><span>  </span><span class="annot"><a href="#local-6989586621681822287"><span class="hs-identifier hs-type">binaryApps</span></a></span><span>
</span><span id="line-413"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-414"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823171"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-415"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-416"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-417"></span><span>  </span><span id="local-6989586621681822287"><span class="annot"><span class="annottext">binaryApps :: [(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822287"><span class="hs-identifier hs-var hs-var">binaryApps</span></a></span></span><span> </span><span id="local-6989586621681822243"><span class="annot"><span class="annottext">[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822243"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span id="local-6989586621681822242"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822242"><span class="hs-identifier hs-var">last</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822241"><span class="hs-identifier hs-var">unbroken</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#orElse"><span class="hs-operator hs-var">`PP.orElse`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822240"><span class="hs-identifier hs-var">broken</span></a></span><span>
</span><span id="line-418"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>    </span><span id="local-6989586621681822241"><span class="annot"><span class="annottext">unbroken :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822241"><span class="hs-identifier hs-var hs-var">unbroken</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822239"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822242"><span class="hs-identifier hs-var">last</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-420"></span><span>    </span><span id="local-6989586621681822240"><span class="annot"><span class="annottext">broken :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822240"><span class="hs-identifier hs-var hs-var">broken</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-identifier hs-var">PP.hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822239"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
-&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
[(Pretty s, Pretty s)] -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#column2"><span class="hs-identifier hs-var">PP.column2</span></a></span><span> </span><span class="annot"><span class="annottext">([(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; [(Pretty (SyntaxText' Reference),
         Pretty (SyntaxText' Reference))])
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference))]
forall a. IsString a =&gt; [a] -&gt; [(a, a)]
</span><a href="#local-6989586621681822236"><span class="hs-identifier hs-var">psCols</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">tail</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822239"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822242"><span class="hs-identifier hs-var">last</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-421"></span><span>    </span><span id="local-6989586621681822236"><span class="annot"><span class="annottext">psCols :: [a] -&gt; [(a, a)]
</span><a href="#local-6989586621681822236"><span class="hs-identifier hs-var hs-var">psCols</span></a></span></span><span> </span><span id="local-6989586621681822234"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681822234"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; [a]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681822234"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-422"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621681822232"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822232"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822231"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822231"><span class="hs-identifier hs-var">y</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822232"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822231"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a, a) -&gt; [(a, a)] -&gt; [(a, a)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [(a, a)]
</span><a href="#local-6989586621681822236"><span class="hs-identifier hs-var">psCols</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [a] -&gt; [a]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681822234"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-423"></span><span>      </span><span class="hs-special">[</span><span id="local-6989586621681822229"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822229"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">]</span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822229"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-424"></span><span>      </span><span class="hs-special">[</span><span class="hs-special">]</span><span>     </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-425"></span><span>      </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span>      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(a, a)]
forall a. HasCallStack =&gt; a
</span><span class="hs-identifier hs-var">undefined</span></span><span>
</span><span id="line-426"></span><span>    </span><span id="local-6989586621681822239"><span class="annot"><span class="annottext">ps :: [Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822239"><span class="hs-identifier hs-var hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Pretty (SyntaxText' Reference)]]
-&gt; [Pretty (SyntaxText' Reference)]
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span> </span><span class="annot"><span class="annottext">([[Pretty (SyntaxText' Reference)]]
 -&gt; [Pretty (SyntaxText' Reference)])
-&gt; [[Pretty (SyntaxText' Reference)]]
-&gt; [Pretty (SyntaxText' Reference)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
-&gt; Term3 v PrintAnnotation -&gt; [Pretty (SyntaxText' Reference)]
forall v v.
(Var v, Var v) =&gt;
Term2 v () () v PrintAnnotation
-&gt; Term3 v PrintAnnotation -&gt; [Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822227"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822226"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822225"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822226"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822226"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822225"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822225"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
-&gt; [(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(Term3 v PrintAnnotation, Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822243"><span class="hs-identifier hs-var">xs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-427"></span><span>    </span><span id="local-6989586621681822227"><span class="annot"><span class="annottext">r :: Term2 v () () v PrintAnnotation
-&gt; Term3 v PrintAnnotation -&gt; [Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822227"><span class="hs-identifier hs-var hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681822223"><span class="annot"><span class="annottext">Term2 v () () v PrintAnnotation
</span><a href="#local-6989586621681822223"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621681822222"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822222"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-428"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term2 v () () v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Term2 v () () v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var">isBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 v () () v PrintAnnotation
</span><a href="#local-6989586621681822223"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">12</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term2 v () () v PrintAnnotation
</span><a href="#local-6989586621681822223"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-429"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822479"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext
-&gt; InfixContext
-&gt; Imports
-&gt; DocLiteralContext
-&gt; Bool
-&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-var">AmbientContext</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="Unison.TermPrinter.html#Infix"><span class="hs-identifier hs-var">Infix</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822474"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822473"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822222"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-430"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span class="annot"><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-type">prettyPattern</span></a></span><span>
</span><span id="line-433"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681823087"><span class="annot"><a href="#local-6989586621681823087"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621681823086"><span class="annot"><a href="#local-6989586621681823086"><span class="hs-identifier hs-type">loc</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823087"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-434"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681823087"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pattern</span></span><span> </span><span class="annot"><a href="#local-6989586621681823086"><span class="hs-identifier hs-type">loc</span></a></span><span>
</span><span id="line-439"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681823087"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- vs is the list of pattern variables used by the pattern, plus possibly a</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- tail of variables it doesn't use.  This tail is the second component of</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- the return value.</span><span>
</span><span id="line-443"></span><span id="prettyPattern"><span class="annot"><span class="annottext">prettyPattern :: PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var hs-var">prettyPattern</span></a></span></span><span> </span><span id="local-6989586621681822221"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681822220"><span class="annot"><span class="annottext">c :: AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">imports :: AmbientContext -&gt; Imports
</span><a href="Unison.TermPrinter.html#imports"><span class="hs-identifier hs-var">imports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822219"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822219"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span id="local-6989586621681822218"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681822217"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822216"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822216"><span class="hs-identifier hs-var">patt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822216"><span class="hs-identifier hs-var">patt</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-444"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Char</span></span><span>    </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822214"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822214"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#CharLiteral"><span class="hs-identifier hs-var">S.CharLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Maybe Char
</span><a href="Unison.Lexer.html#showEscapeChar"><span class="hs-identifier hs-var">showEscapeChar</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822214"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-445"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681822212"><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822212"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;?\\&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822212"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-446"></span><span>    </span><span class="annot"><span class="annottext">Maybe Char
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'?'</span></span><span class="annot"><span class="annottext">Char -&gt; ShowS
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Char
</span><a href="#local-6989586621681822214"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Unbound</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;_&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Var</span></span><span>     </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822209"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822209"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681822208"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822208"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; String
forall v. Var v =&gt; v -&gt; String
</span><span class="hs-identifier hs-var">Var.nameStr</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822209"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822208"><span class="hs-identifier hs-var">tail_vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-449"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Boolean</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822206"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822206"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BooleanLiteral"><span class="hs-identifier hs-var">S.BooleanLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822206"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;true&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;false&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Int</span></span><span>     </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822204"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822204"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822204"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Int64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;+&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621681822204"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Nat</span></span><span>     </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822202"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681822202"><span class="hs-identifier hs-var">u</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681822202"><span class="hs-identifier hs-var">u</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Float</span></span><span>   </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822200"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681822200"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#NumericLiteral"><span class="hs-identifier hs-var">S.NumericLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Double -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621681822200"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-453"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Text</span></span><span>    </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822198"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681822198"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#TextLiteral"><span class="hs-identifier hs-var">S.TextLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681822198"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#TuplePattern"><span class="hs-identifier hs-type">TuplePattern</span></a></span><span> </span><span id="local-6989586621681822197"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822197"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Pattern loc] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822197"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-455"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822195"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822195"><span class="hs-identifier hs-var">pats_printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822194"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822194"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
forall v loc.
Var v =&gt;
Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
</span><a href="#local-6989586621681822193"><span class="hs-identifier hs-var">patterns</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822197"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-456"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#parenthesizeCommas"><span class="hs-identifier hs-var">PP.parenthesizeCommas</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822195"><span class="hs-identifier hs-var">pats_printed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822194"><span class="hs-identifier hs-var">tail_vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Constructor</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822190"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822190"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681822189"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822189"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-458"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822188"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822187"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-459"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>      </span><span id="local-6989586621681822187"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822187"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822219"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822188"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-461"></span><span>      </span><span id="local-6989586621681822188"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822188"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822190"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822189"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span>
</span><span id="line-462"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Constructor</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822186"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822186"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681822185"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822185"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span id="local-6989586621681822184"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822184"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-463"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822183"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822183"><span class="hs-identifier hs-var">pats_printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822182"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822182"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822181"><span class="hs-identifier hs-var">patternsSep</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822184"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-464"></span><span>        </span><span id="local-6989586621681822180"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822180"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822219"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822179"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-465"></span><span>        </span><span id="local-6989586621681822179"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822179"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822186"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822185"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span>
</span><span id="line-466"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>          </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822179"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822180"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-468"></span><span>            </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822183"><span class="hs-identifier hs-var">pats_printed</span></a></span><span>
</span><span id="line-469"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822182"><span class="hs-identifier hs-var">tail_vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.As</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822177"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822177"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-471"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822176"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822176"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681822175"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822175"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span>            </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-472"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681822174"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822174"><span class="hs-identifier hs-var">printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822173"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822173"><span class="hs-identifier hs-var">eventual_tail</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822175"><span class="hs-identifier hs-var">tail_vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822177"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">11</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; String
forall v. Var v =&gt; v -&gt; String
</span><span class="hs-identifier hs-var">Var.nameStr</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681822176"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822174"><span class="hs-identifier hs-var">printed</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822173"><span class="hs-identifier hs-var">eventual_tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectPure</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822171"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822171"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-475"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822170"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822170"><span class="hs-identifier hs-var">printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822169"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822169"><span class="hs-identifier hs-var">eventual_tail</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822171"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-476"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">PP.sep</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;{&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822170"><span class="hs-identifier hs-var">printed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822169"><span class="hs-identifier hs-var">eventual_tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectBind</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822166"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822166"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681822165"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822165"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span id="local-6989586621681822164"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822164"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span id="local-6989586621681822163"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822163"><span class="hs-identifier hs-var">k_pat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-478"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822162"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822162"><span class="hs-identifier hs-var">pats_printed</span></a></span></span><span> </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822161"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822161"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822181"><span class="hs-identifier hs-var">patternsSep</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">10</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822164"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681822160"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822160"><span class="hs-identifier hs-var">k_pat_printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822159"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822159"><span class="hs-identifier hs-var">eventual_tail</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822161"><span class="hs-identifier hs-var">tail_vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822163"><span class="hs-identifier hs-var">k_pat</span></a></span><span>
</span><span id="line-480"></span><span>        </span><span id="local-6989586621681822158"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681822158"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822219"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name -&gt; HashQualified Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822157"><span class="hs-identifier hs-var">conRef</span></a></span><span>
</span><span id="line-481"></span><span>        </span><span id="local-6989586621681822157"><span class="annot"><span class="annottext">conRef :: Referent' Reference
</span><a href="#local-6989586621681822157"><span class="hs-identifier hs-var hs-var">conRef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681822166"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822165"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-483"></span><span>            </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;{&quot;</span></span><span>  </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-484"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">PP.sep</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; [Pretty (SyntaxText' Reference)])
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; [Pretty s]
</span><a href="Unison.Util.Pretty.html#nonEmpty"><span class="hs-identifier hs-var">PP.nonEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-485"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681822157"><span class="hs-identifier hs-var">conRef</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822158"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-486"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822162"><span class="hs-identifier hs-var">pats_printed</span></a></span><span>
</span><span id="line-487"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span>
</span><span id="line-488"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822160"><span class="hs-identifier hs-var">k_pat_printed</span></a></span><span>
</span><span id="line-489"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-490"></span><span>            </span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-491"></span><span>            </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-492"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-493"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822159"><span class="hs-identifier hs-var">eventual_tail</span></a></span><span>
</span><span id="line-494"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-495"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceLiteral</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822154"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822154"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-496"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822153"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822153"><span class="hs-identifier hs-var">pats_printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822152"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822152"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822181"><span class="hs-identifier hs-var">patternsSep</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;, &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822154"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;[&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822153"><span class="hs-identifier hs-var">pats_printed</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;]&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822152"><span class="hs-identifier hs-var">tail_vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceOp</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822150"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822150"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621681822149"><span class="annot"><span class="annottext">SeqOp
</span><a href="#local-6989586621681822149"><span class="hs-identifier hs-var">op</span></a></span></span><span> </span><span id="local-6989586621681822148"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822148"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-499"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822147"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822147"><span class="hs-identifier hs-var">pl</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822146"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822146"><span class="hs-identifier hs-var">lvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822217"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822150"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-500"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681822145"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822145"><span class="hs-identifier hs-var">pr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822144"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822144"><span class="hs-identifier hs-var">rvs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822146"><span class="hs-identifier hs-var">lvs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822148"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-501"></span><span>        </span><span id="local-6989586621681822142"><span class="annot"><span class="annottext">f :: Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822142"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681822141"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822141"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621681822140"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822140"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822218"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822141"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822147"><span class="hs-identifier hs-var">pl</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SeqOp -&gt; Element Reference
forall r. SeqOp -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#Op"><span class="hs-identifier hs-var">S.Op</span></a></span><span> </span><span class="annot"><span class="annottext">SeqOp
</span><a href="#local-6989586621681822149"><span class="hs-identifier hs-var">op</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822140"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822145"><span class="hs-identifier hs-var">pr</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822144"><span class="hs-identifier hs-var">rvs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SeqOp
</span><a href="#local-6989586621681822149"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-503"></span><span>      </span><span class="annot"><span class="annottext">SeqOp
</span><span class="hs-identifier hs-var">Pattern.Cons</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822142"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;+:&quot;</span></span><span>
</span><span id="line-504"></span><span>      </span><span class="annot"><span class="annottext">SeqOp
</span><span class="hs-identifier hs-var">Pattern.Snoc</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822142"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;:+&quot;</span></span><span>
</span><span id="line-505"></span><span>      </span><span class="annot"><span class="annottext">SeqOp
</span><span class="hs-identifier hs-var">Pattern.Concat</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822142"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;++&quot;</span></span><span>
</span><span id="line-506"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-507"></span><span>  </span><span id="local-6989586621681823033"><span class="annot"><a href="#local-6989586621681822213"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="#local-6989586621681823033"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681823033"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-508"></span><span>  </span><span id="local-6989586621681822213"><span class="annot"><span class="annottext">l :: String -&gt; s
</span><a href="#local-6989586621681822213"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; s
forall s. IsString s =&gt; String -&gt; s
</span><span class="hs-identifier hs-var">fromString</span></span><span>
</span><span id="line-509"></span><span>  </span><span id="local-6989586621681822193"><span class="annot"><span class="annottext">patterns :: Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
</span><a href="#local-6989586621681822193"><span class="hs-identifier hs-var hs-var">patterns</span></a></span></span><span> </span><span id="local-6989586621681822135"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822135"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681822134"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822134"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822133"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822133"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681822132"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822132"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822131"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822131"><span class="hs-identifier hs-var">printed</span></a></span></span><span>     </span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822130"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822130"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span>      </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-511"></span><span>          </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822221"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822220"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822135"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822134"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822133"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621681822129"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822129"><span class="hs-identifier hs-var">rest_printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822128"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822128"><span class="hs-identifier hs-var">eventual_tail</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
</span><a href="#local-6989586621681822193"><span class="hs-identifier hs-var">patterns</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822135"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822130"><span class="hs-identifier hs-var">tail_vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822132"><span class="hs-identifier hs-var">pats</span></a></span><span>
</span><span id="line-513"></span><span>    </span><span class="hs-keyword">in</span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822131"><span class="hs-identifier hs-var">printed</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822129"><span class="hs-identifier hs-var">rest_printed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822128"><span class="hs-identifier hs-var">eventual_tail</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><a href="#local-6989586621681822193"><span class="hs-identifier hs-var">patterns</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822127"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822127"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822127"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>  </span><span id="local-6989586621681822181"><span class="annot"><span class="annottext">patternsSep :: Int
-&gt; Pretty (SyntaxText' Reference)
-&gt; [v]
-&gt; [Pattern loc]
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="#local-6989586621681822181"><span class="hs-identifier hs-var hs-var">patternsSep</span></a></span></span><span> </span><span id="local-6989586621681822126"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822126"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681822125"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822125"><span class="hs-identifier hs-var">sep</span></a></span></span><span> </span><span id="local-6989586621681822124"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822124"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822123"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822123"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
forall v loc.
Var v =&gt;
Int
-&gt; [v] -&gt; [Pattern loc] -&gt; ([Pretty (SyntaxText' Reference)], [v])
</span><a href="#local-6989586621681822193"><span class="hs-identifier hs-var">patterns</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681822126"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822124"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822123"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-516"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681822122"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822122"><span class="hs-identifier hs-var">printed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822121"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822121"><span class="hs-identifier hs-var">tail_vs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">PP.sep</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822125"><span class="hs-identifier hs-var">sep</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681822122"><span class="hs-identifier hs-var">printed</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822121"><span class="hs-identifier hs-var">tail_vs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-517"></span><span>
</span><span id="line-518"></span><span class="hs-keyword">type</span><span> </span><span id="MatchCase%27"><span class="annot"><a href="Unison.TermPrinter.html#MatchCase%27"><span class="hs-identifier hs-var">MatchCase'</span></a></span></span><span> </span><span id="local-6989586621681822120"><span class="annot"><a href="#local-6989586621681822120"><span class="hs-identifier hs-type">ann</span></a></span></span><span> </span><span id="local-6989586621681822119"><span class="annot"><a href="#local-6989586621681822119"><span class="hs-identifier hs-type">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pattern</span></span><span> </span><span class="annot"><a href="#local-6989586621681822120"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621681822119"><span class="hs-identifier hs-type">tm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681822119"><span class="hs-identifier hs-type">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span id="local-6989586621681823077"><span id="local-6989586621681823078"><span class="annot"><a href="Unison.TermPrinter.html#arity1Branches"><span class="hs-identifier hs-type">arity1Branches</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="annot"><a href="#local-6989586621681823078"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823077"><span class="hs-identifier hs-type">tm</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.TermPrinter.html#MatchCase%27"><span class="hs-identifier hs-type">MatchCase'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823078"><span class="hs-identifier hs-type">ann</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823077"><span class="hs-identifier hs-type">tm</span></a></span><span class="hs-special">]</span></span></span><span>
</span><span id="line-521"></span><span id="arity1Branches"><span class="annot"><span class="annottext">arity1Branches :: [MatchCase ann tm] -&gt; [MatchCase' ann tm]
</span><a href="Unison.TermPrinter.html#arity1Branches"><span class="hs-identifier hs-var hs-var">arity1Branches</span></a></span></span><span> </span><span id="local-6989586621681822118"><span class="annot"><span class="annottext">[MatchCase ann tm]
</span><a href="#local-6989586621681822118"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pattern ann
</span><a href="#local-6989586621681822117"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe tm
</span><a href="#local-6989586621681822116"><span class="hs-identifier hs-var">guard</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tm
</span><a href="#local-6989586621681822115"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span id="local-6989586621681822117"><span class="annot"><span class="annottext">Pattern ann
</span><a href="#local-6989586621681822117"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span id="local-6989586621681822116"><span class="annot"><span class="annottext">Maybe tm
</span><a href="#local-6989586621681822116"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621681822115"><span class="annot"><span class="annottext">tm
</span><a href="#local-6989586621681822115"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[MatchCase ann tm]
</span><a href="#local-6989586621681822118"><span class="hs-identifier hs-var">bs</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="hs-comment">-- Groups adjacent cases with the same pattern together,</span><span>
</span><span id="line-524"></span><span class="hs-comment">-- for easier pretty-printing, for instance:</span><span>
</span><span id="line-525"></span><span class="hs-comment">--</span><span>
</span><span id="line-526"></span><span class="hs-comment">--   Foo x y | blah1 x -&gt; body1</span><span>
</span><span id="line-527"></span><span class="hs-comment">--   Foo x y | blah2 y -&gt; body2</span><span>
</span><span id="line-528"></span><span class="hs-comment">--</span><span>
</span><span id="line-529"></span><span class="hs-comment">-- becomes</span><span>
</span><span id="line-530"></span><span class="hs-comment">--</span><span>
</span><span id="line-531"></span><span class="hs-comment">--   Foo x y, [x,y], [(blah1 x, body1), (blah2 y, body2)]</span><span>
</span><span id="line-532"></span><span id="local-6989586621681823008"><span id="local-6989586621681823009"><span class="annot"><a href="Unison.TermPrinter.html#groupCases"><span class="hs-identifier hs-type">groupCases</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681823009"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.TermPrinter.html#MatchCase%27"><span class="hs-identifier hs-type">MatchCase'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823009"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823008"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-533"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pattern</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681823009"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823009"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823008"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823009"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823008"><span class="hs-identifier hs-type">ann</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span></span></span><span>
</span><span id="line-534"></span><span id="groupCases"><span class="annot"><span class="annottext">groupCases :: [MatchCase' () (Term3 v ann)]
-&gt; [([Pattern ()], [v], [(Maybe (Term3 v ann), Term3 v ann)])]
</span><a href="Unison.TermPrinter.html#groupCases"><span class="hs-identifier hs-var hs-var">groupCases</span></a></span></span><span> </span><span id="local-6989586621681822113"><span class="annot"><span class="annottext">[MatchCase' () (Term3 v ann)]
</span><a href="#local-6989586621681822113"><span class="hs-identifier hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MatchCase' () (Term3 v ann)]
-&gt; [([Pattern ()], [v], [(Maybe (Term3 v ann), Term3 v ann)])]
forall a v a (f :: * -&gt; *) a.
(Eq a, Eq v) =&gt;
[(a, a, Term f v a)] -&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822112"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase' () (Term3 v ann)]
</span><a href="#local-6989586621681822113"><span class="hs-identifier hs-var">ms</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-535"></span><span>  </span><span id="local-6989586621681822112"><span class="annot"><span class="annottext">go0 :: [(a, a, Term f v a)] -&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822112"><span class="hs-identifier hs-var hs-var">go0</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-536"></span><span>  </span><span class="annot"><a href="#local-6989586621681822112"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span id="local-6989586621681822111"><span class="annot"><span class="annottext">ms :: [(a, a, Term f v a)]
</span><a href="#local-6989586621681822111"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681822110"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822110"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AbsN'</span></span><span> </span><span id="local-6989586621681822109"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822109"><span class="hs-identifier hs-var">vs1</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term f v a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[(a, a, Term f v a)]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, [v])
-&gt; [(a, Term f v a)]
-&gt; [(a, a, Term f v a)]
-&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822108"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822110"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822109"><span class="hs-identifier hs-var">vs1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[(a, a, Term f v a)]
</span><a href="#local-6989586621681822111"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-537"></span><span>  </span><span id="local-6989586621681822108"><span class="annot"><span class="annottext">go2 :: (a, [v])
-&gt; [(a, Term f v a)]
-&gt; [(a, a, Term f v a)]
-&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822108"><span class="hs-identifier hs-var hs-var">go2</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822107"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822107"><span class="hs-identifier hs-var">p0</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681822106"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822106"><span class="hs-identifier hs-var">vs0</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681822105"><span class="annot"><span class="annottext">[(a, Term f v a)]
</span><a href="#local-6989586621681822105"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822107"><span class="hs-identifier hs-var">p0</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822106"><span class="hs-identifier hs-var">vs0</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(a, Term f v a)] -&gt; [(a, Term f v a)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(a, Term f v a)]
</span><a href="#local-6989586621681822105"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-538"></span><span>  </span><span class="annot"><a href="#local-6989586621681822108"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822104"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822104"><span class="hs-identifier hs-var">p0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822103"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822103"><span class="hs-identifier hs-var">vs0</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681822102"><span class="annot"><span class="annottext">[(a, Term f v a)]
</span><a href="#local-6989586621681822102"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span id="local-6989586621681822101"><span class="annot"><span class="annottext">ms :: [(a, a, Term f v a)]
</span><a href="#local-6989586621681822101"><span class="hs-identifier hs-var">ms</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681822100"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822100"><span class="hs-identifier hs-var">p1</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822099"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822099"><span class="hs-identifier hs-var">g1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AbsN'</span></span><span> </span><span id="local-6989586621681822098"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822098"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822097"><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681822097"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681822096"><span class="annot"><span class="annottext">[(a, a, Term f v a)]
</span><a href="#local-6989586621681822096"><span class="hs-identifier hs-var">tl</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822104"><span class="hs-identifier hs-var">p0</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822100"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822098"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; [v] -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822103"><span class="hs-identifier hs-var">vs0</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, [v])
-&gt; [(a, Term f v a)]
-&gt; [(a, a, Term f v a)]
-&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822108"><span class="hs-identifier hs-var">go2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822104"><span class="hs-identifier hs-var">p0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822103"><span class="hs-identifier hs-var">vs0</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822099"><span class="hs-identifier hs-var">g1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681822097"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span class="annot"><span class="annottext">(a, Term f v a) -&gt; [(a, Term f v a)] -&gt; [(a, Term f v a)]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span class="annot"><span class="annottext">[(a, Term f v a)]
</span><a href="#local-6989586621681822102"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(a, a, Term f v a)]
</span><a href="#local-6989586621681822096"><span class="hs-identifier hs-var">tl</span></a></span><span>
</span><span id="line-540"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span>             </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822104"><span class="hs-identifier hs-var">p0</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822103"><span class="hs-identifier hs-var">vs0</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">[(a, Term f v a)] -&gt; [(a, Term f v a)]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[(a, Term f v a)]
</span><a href="#local-6989586621681822102"><span class="hs-identifier hs-var">acc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(a, [v], [(a, Term f v a)])
-&gt; [(a, [v], [(a, Term f v a)])] -&gt; [(a, [v], [(a, Term f v a)])]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[(a, a, Term f v a)] -&gt; [(a, [v], [(a, Term f v a)])]
</span><a href="#local-6989586621681822112"><span class="hs-identifier hs-var">go0</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, a, Term f v a)]
</span><a href="#local-6989586621681822101"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-541"></span><span>
</span><span id="line-542"></span><span id="local-6989586621681823079"><span class="annot"><a href="Unison.TermPrinter.html#printCase"><span class="hs-identifier hs-type">printCase</span></a></span><span>
</span><span id="line-543"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823079"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-544"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-545"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span>
</span><span id="line-546"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#DocLiteralContext"><span class="hs-identifier hs-type">DocLiteralContext</span></a></span><span>
</span><span id="line-547"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.TermPrinter.html#MatchCase%27"><span class="hs-identifier hs-type">MatchCase'</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823079"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span></span><span>
</span><span id="line-549"></span><span id="printCase"><span class="annot"><span class="annottext">printCase :: PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#printCase"><span class="hs-identifier hs-var hs-var">printCase</span></a></span></span><span> </span><span id="local-6989586621681822095"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681822094"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span id="local-6989586621681822093"><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span id="local-6989586621681822092"><span class="annot"><span class="annottext">[MatchCase' () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822092"><span class="hs-identifier hs-var">ms0</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
  Pretty (SyntaxText' Reference))
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
-&gt; [Pretty (SyntaxText' Reference)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
 Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
(Pretty s, Pretty s, Pretty s) -&gt; Pretty s
</span><a href="#local-6989586621681822091"><span class="hs-identifier hs-var">each</span></a></span><span> </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
  Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822090"><span class="hs-identifier hs-var">gridArrowsAligned</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-550"></span><span>  </span><span id="local-6989586621681822089"><span class="annot"><span class="annottext">ms :: [([Pattern ()], [v],
  [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])]
</span><a href="#local-6989586621681822089"><span class="hs-identifier hs-var hs-var">ms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[MatchCase' () (Term3 v PrintAnnotation)]
-&gt; [([Pattern ()], [v],
     [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])]
forall v ann.
Ord v =&gt;
[MatchCase' () (Term3 v ann)]
-&gt; [([Pattern ()], [v], [(Maybe (Term3 v ann), Term3 v ann)])]
</span><a href="Unison.TermPrinter.html#groupCases"><span class="hs-identifier hs-var">groupCases</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase' () (Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822092"><span class="hs-identifier hs-var">ms0</span></a></span><span>
</span><span id="line-551"></span><span>  </span><span id="local-6989586621681822091"><span class="annot"><span class="annottext">each :: (Pretty s, Pretty s, Pretty s) -&gt; Pretty s
</span><a href="#local-6989586621681822091"><span class="hs-identifier hs-var hs-var">each</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822088"><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822088"><span class="hs-identifier hs-var">lhs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822087"><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822087"><span class="hs-identifier hs-var">arrow</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822086"><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822086"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty s -&gt; Pretty s
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty s -&gt; Pretty s) -&gt; Pretty s -&gt; Pretty s
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822088"><span class="hs-identifier hs-var">lhs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty s -&gt; Pretty s -&gt; Pretty s
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822087"><span class="hs-identifier hs-var">arrow</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty s -&gt; Pretty s -&gt; Pretty s
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty s
</span><a href="#local-6989586621681822086"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-552"></span><span>  </span><span id="local-6989586621681822085"><span class="annot"><span class="annottext">grid :: [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
  Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822085"><span class="hs-identifier hs-var hs-var">grid</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Pattern ()], [v],
 [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
forall v v v loc r.
(Var v, Var v, Var v) =&gt;
([Pattern loc], [v],
 [(Maybe (Term (F v () ()) v PrintAnnotation),
   Term3 v PrintAnnotation)])
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(([Pattern ()], [v],
  [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])
 -&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
      Pretty (SyntaxText' Reference))])
-&gt; [([Pattern ()], [v],
     [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])]
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">[([Pattern ()], [v],
  [(Maybe (Term3 v PrintAnnotation), Term3 v PrintAnnotation)])]
</span><a href="#local-6989586621681822089"><span class="hs-identifier hs-var">ms</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span id="local-6989586621681822090"><span class="annot"><span class="annottext">gridArrowsAligned :: [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
  Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822090"><span class="hs-identifier hs-var hs-var">gridArrowsAligned</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference)),
 (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
  Pretty (SyntaxText' Reference)))
-&gt; (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
    Pretty (SyntaxText' Reference))
forall a b a b c. ((a, b), (a, b, c)) -&gt; (a, b, c)
</span><a href="#local-6989586621681822082"><span class="hs-identifier hs-var">tidy</span></a></span><span> </span><span class="annot"><span class="annottext">(((Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference)),
  (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
   Pretty (SyntaxText' Reference)))
 -&gt; (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference)))
-&gt; [((Pretty (SyntaxText' Reference),
      Pretty (SyntaxText' Reference)),
     (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
      Pretty (SyntaxText' Reference)))]
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
     Pretty (SyntaxText' Reference))]
-&gt; [((Pretty (SyntaxText' Reference),
      Pretty (SyntaxText' Reference)),
     (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
      Pretty (SyntaxText' Reference)))]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference),
  Maybe (Pretty (SyntaxText' Reference)))]
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference))]
forall s.
(ListLike s Char, IsString s) =&gt;
[(Pretty s, Maybe (Pretty s))] -&gt; [(Pretty s, Pretty s)]
</span><a href="Unison.Util.Pretty.html#align%27"><span class="hs-identifier hs-var">PP.align'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
 Pretty (SyntaxText' Reference))
-&gt; (Pretty (SyntaxText' Reference),
    Maybe (Pretty (SyntaxText' Reference)))
forall a a c. (a, a, c) -&gt; (a, Maybe a)
</span><a href="#local-6989586621681822079"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">((Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
  Pretty (SyntaxText' Reference))
 -&gt; (Pretty (SyntaxText' Reference),
     Maybe (Pretty (SyntaxText' Reference))))
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
-&gt; [(Pretty (SyntaxText' Reference),
     Maybe (Pretty (SyntaxText' Reference)))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference),
  Pretty (SyntaxText' Reference))]
forall r.
[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
  Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822085"><span class="hs-identifier hs-var">grid</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Any),
  Pretty (SyntaxText' Reference))]
forall r.
[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
  Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822085"><span class="hs-identifier hs-var">grid</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-554"></span><span>    </span><span id="local-6989586621681822079"><span class="annot"><span class="annottext">f :: (a, a, c) -&gt; (a, Maybe a)
</span><a href="#local-6989586621681822079"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822078"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822078"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822077"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822077"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822078"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822077"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-555"></span><span>    </span><span id="local-6989586621681822082"><span class="annot"><span class="annottext">tidy :: ((a, b), (a, b, c)) -&gt; (a, b, c)
</span><a href="#local-6989586621681822082"><span class="hs-identifier hs-var hs-var">tidy</span></a></span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621681822076"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822076"><span class="hs-identifier hs-var">a'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822075"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681822075"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822074"><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621681822074"><span class="hs-identifier hs-var">c</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681822076"><span class="hs-identifier hs-var">a'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681822075"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">c
</span><a href="#local-6989586621681822074"><span class="hs-identifier hs-var">c</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-556"></span><span>
</span><span id="line-557"></span><span>  </span><span id="local-6989586621681822073"><span class="annot"><span class="annottext">patLhs :: [v] -&gt; [Pattern loc] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822073"><span class="hs-identifier hs-var hs-var">patLhs</span></a></span></span><span> </span><span id="local-6989586621681822072"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822072"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822071"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822071"><span class="hs-identifier hs-var">pats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822071"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-558"></span><span>    </span><span class="hs-special">[</span><span id="local-6989586621681822070"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822070"><span class="hs-identifier hs-var">pat</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference), [v])
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822072"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822070"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-559"></span><span>    </span><span id="local-6989586621681822069"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822069"><span class="hs-identifier hs-var">pats</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; ((Pattern loc
     -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
    -&gt; Pretty (SyntaxText' Reference))
-&gt; (Pattern loc
    -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">PP.sep</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;,&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; ((Pattern loc
     -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
    -&gt; [Pretty (SyntaxText' Reference)])
-&gt; (Pattern loc
    -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">State [v] [Pretty (SyntaxText' Reference)]
-&gt; [v] -&gt; [Pretty (SyntaxText' Reference)]
forall s a. State s a -&gt; s -&gt; a
</span><span class="hs-operator hs-var">`evalState`</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822072"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(State [v] [Pretty (SyntaxText' Reference)]
 -&gt; [Pretty (SyntaxText' Reference)])
-&gt; ((Pattern loc
     -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
    -&gt; State [v] [Pretty (SyntaxText' Reference)])
-&gt; (Pattern loc
    -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
-&gt; [Pretty (SyntaxText' Reference)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
-&gt; (Pattern loc
    -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
-&gt; State [v] [Pretty (SyntaxText' Reference)]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f (t b)
</span><span class="hs-identifier hs-var">for</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822069"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">((Pattern loc
  -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
 -&gt; Pretty (SyntaxText' Reference))
-&gt; (Pattern loc
    -&gt; StateT [v] Identity (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681822067"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822067"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-560"></span><span>      </span><span id="local-6989586621681822066"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822066"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">StateT [v] Identity [v]
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">State.get</span></span><span>
</span><span id="line-561"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822064"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822064"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822063"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822063"><span class="hs-identifier hs-var">rem</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
forall v loc.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Int
-&gt; [v]
-&gt; Pattern loc
-&gt; (Pretty (SyntaxText' Reference), [v])
</span><a href="Unison.TermPrinter.html#prettyPattern"><span class="hs-identifier hs-var">prettyPattern</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822066"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681822067"><span class="hs-identifier hs-var">pat</span></a></span><span>
</span><span id="line-562"></span><span>      </span><span class="annot"><span class="annottext">[v] -&gt; StateT [v] Identity ()
forall s (m :: * -&gt; *). MonadState s m =&gt; s -&gt; m ()
</span><span class="hs-identifier hs-var">State.put</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822063"><span class="hs-identifier hs-var">rem</span></a></span><span>
</span><span id="line-563"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822064"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span>  </span><span id="local-6989586621681822061"><span class="annot"><span class="annottext">arrow :: Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822061"><span class="hs-identifier hs-var hs-var">arrow</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot;-&gt;&quot;</span></span><span>
</span><span id="line-566"></span><span>  </span><span id="local-6989586621681822060"><span class="annot"><span class="annottext">goBody :: Imports
-&gt; ([Pretty (SyntaxText' Reference)] -&gt; t)
-&gt; Term3 v PrintAnnotation
-&gt; t
</span><a href="#local-6989586621681822060"><span class="hs-identifier hs-var hs-var">goBody</span></a></span></span><span> </span><span id="local-6989586621681822059"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822059"><span class="hs-identifier hs-var">im'</span></a></span></span><span> </span><span id="local-6989586621681822058"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; t
</span><a href="#local-6989586621681822058"><span class="hs-identifier hs-var">uses</span></a></span></span><span> </span><span id="local-6989586621681822057"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822057"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; t
</span><a href="#local-6989586621681822058"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822059"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822057"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-567"></span><span>  </span><span id="local-6989586621681822056"><span class="annot"><span class="annottext">printGuard :: Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822056"><span class="hs-identifier hs-var hs-var">printGuard</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ABT.AbsN'</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822055"><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822055"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-568"></span><span>    </span><span class="hs-comment">-- strip off any Abs-chain around the guard, guard variables are rendered</span><span>
</span><span id="line-569"></span><span>    </span><span class="hs-comment">-- like any other variable, ex: case Foo x y | x &lt; y -&gt; ...</span><span>
</span><span id="line-570"></span><span>    </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; |&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term (F v () ()) v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822055"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-571"></span><span>  </span><span class="annot"><a href="#local-6989586621681822056"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
</span><span class="hs-identifier hs-var">Nothing</span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621681822084"><span class="annot"><span class="annottext">go :: ([Pattern loc], [v],
 [(Maybe (Term (F v () ()) v PrintAnnotation),
   Term3 v PrintAnnotation)])
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
</span><a href="#local-6989586621681822084"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822054"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822054"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822053"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822053"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span id="local-6989586621681822052"><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
</span><a href="#local-6989586621681822052"><span class="hs-identifier hs-var">guard</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822051"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822051"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-574"></span><span>    </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822050"><span class="hs-identifier hs-var">lhs</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
forall r. Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822061"><span class="hs-identifier hs-var">arrow</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v t.
Var v =&gt;
Imports
-&gt; ([Pretty (SyntaxText' Reference)] -&gt; t)
-&gt; Term3 v PrintAnnotation
-&gt; t
</span><a href="#local-6989586621681822060"><span class="hs-identifier hs-var">goBody</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822049"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822048"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822051"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-575"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-576"></span><span>    </span><span id="local-6989586621681822050"><span class="annot"><span class="annottext">lhs :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822050"><span class="hs-identifier hs-var hs-var">lhs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; [Pattern loc] -&gt; Pretty (SyntaxText' Reference)
forall v loc.
Var v =&gt;
[v] -&gt; [Pattern loc] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822073"><span class="hs-identifier hs-var">patLhs</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822053"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822054"><span class="hs-identifier hs-var">pats</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822056"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
</span><a href="#local-6989586621681822052"><span class="hs-identifier hs-var">guard</span></a></span><span>
</span><span id="line-577"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621681822049"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822049"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822048"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822048"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822051"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-578"></span><span>  </span><span class="hs-comment">-- If there's multiple guarded cases for this pattern, prints as:</span><span>
</span><span id="line-579"></span><span>  </span><span class="hs-comment">-- MyPattern x y</span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-comment">--   | guard 1        -&gt; 1</span><span>
</span><span id="line-581"></span><span>  </span><span class="hs-comment">--   | otherguard x y -&gt; 2</span><span>
</span><span id="line-582"></span><span>  </span><span class="hs-comment">--   | otherwise      -&gt; 3</span><span>
</span><span id="line-583"></span><span>  </span><span class="annot"><a href="#local-6989586621681822084"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822047"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822047"><span class="hs-identifier hs-var">pats</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822046"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822046"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[(Maybe (Term (F v () ()) v PrintAnnotation),
  Term3 v PrintAnnotation)]
-&gt; ([Maybe (Term (F v () ()) v PrintAnnotation)],
    [Term3 v PrintAnnotation])
forall a b. [(a, b)] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">unzip</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822044"><span class="annot"><span class="annottext">[Maybe (Term (F v () ()) v PrintAnnotation)]
</span><a href="#local-6989586621681822044"><span class="hs-identifier hs-var">guards</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822043"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681822043"><span class="hs-identifier hs-var">bodies</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-584"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; [Pattern loc] -&gt; Pretty (SyntaxText' Reference)
forall v loc.
Var v =&gt;
[v] -&gt; [Pattern loc] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822073"><span class="hs-identifier hs-var">patLhs</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822046"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681822047"><span class="hs-identifier hs-var">pats</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>      </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
 Pretty (SyntaxText' Reference))
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' r)]
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [(Pretty (SyntaxText' Reference), Pretty (SyntaxText' r),
     Pretty (SyntaxText' Reference))]
forall a b c. [a] -&gt; [b] -&gt; [c] -&gt; [(a, b, c)]
</span><span class="hs-identifier hs-var">zip3</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">PP.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; (Maybe (Term (F v () ()) v PrintAnnotation)
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822040"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Term (F v () ()) v PrintAnnotation)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; [Maybe (Term (F v () ()) v PrintAnnotation)]
-&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Maybe (Term (F v () ()) v PrintAnnotation)]
</span><a href="#local-6989586621681822044"><span class="hs-identifier hs-var">guards</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' r) -&gt; [Pretty (SyntaxText' r)]
forall a. a -&gt; [a]
</span><span class="hs-identifier hs-var">repeat</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
forall r. Pretty (SyntaxText' r)
</span><a href="#local-6989586621681822061"><span class="hs-identifier hs-var">arrow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822038"><span class="hs-identifier hs-var">printBody</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681822043"><span class="hs-identifier hs-var">bodies</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-589"></span><span>    </span><span id="local-6989586621681822040"><span class="annot"><span class="annottext">printGuard :: Maybe (Term (F v () ()) v PrintAnnotation)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822040"><span class="hs-identifier hs-var hs-var">printGuard</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term (F v () ()) v PrintAnnotation)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;|&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; otherwise&quot;</span></span><span>
</span><span id="line-590"></span><span>    </span><span class="annot"><a href="#local-6989586621681822040"><span class="hs-identifier hs-var">printGuard</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ABT.AbsN'</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681822037"><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822037"><span class="hs-identifier hs-var">g</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-591"></span><span>      </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spaced"><span class="hs-identifier hs-var">PP.spaced</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DelimiterChar"><span class="hs-identifier hs-var">S.DelimiterChar</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;|&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term (F v () ()) v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822095"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822093"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term (F v () ()) v PrintAnnotation
</span><a href="#local-6989586621681822037"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-592"></span><span>    </span><span id="local-6989586621681822038"><span class="annot"><span class="annottext">printBody :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822038"><span class="hs-identifier hs-var hs-var">printBody</span></a></span></span><span> </span><span id="local-6989586621681822036"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822036"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822035"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822035"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822034"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822034"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822094"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822036"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-593"></span><span>                  </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; ([Pretty (SyntaxText' Reference)]
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v t.
Var v =&gt;
Imports
-&gt; ([Pretty (SyntaxText' Reference)] -&gt; t)
-&gt; Term3 v PrintAnnotation
-&gt; t
</span><a href="#local-6989586621681822060"><span class="hs-identifier hs-var">goBody</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822035"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822034"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822036"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span class="hs-comment">{- Render a binding, producing output of the form

foo : t -&gt; u
foo a = ...

The first line is only output if the term has a type annotation as the
outermost constructor.

Binary functions with symbolic names are output infix, as follows:

(+) : t -&gt; t -&gt; t
a + b = ...

-}</span><span>
</span><span id="line-609"></span><span id="local-6989586621681822945"><span id="local-6989586621681822946"><span id="local-6989586621681822947"><span id="local-6989586621681822948"><span class="annot"><a href="Unison.TermPrinter.html#prettyBinding"><span class="hs-identifier hs-type">prettyBinding</span></a></span><span>
</span><span id="line-610"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822948"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-611"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-612"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-613"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822948"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822947"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822946"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822948"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822945"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-614"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span></span></span></span></span><span>
</span><span id="line-615"></span><span id="prettyBinding"><span class="annot"><span class="annottext">prettyBinding :: PrettyPrintEnv
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding"><span class="hs-identifier hs-var hs-var">prettyBinding</span></a></span></span><span> </span><span id="local-6989586621681822032"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822032"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding0"><span class="hs-identifier hs-var">prettyBinding0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822032"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">(AmbientContext
 -&gt; HashQualified Name
 -&gt; Term2 v at ap v a
 -&gt; Pretty (SyntaxText' Reference))
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="Unison.TermPrinter.html#MaybeDoc"><span class="hs-identifier hs-var">MaybeDoc</span></a></span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span id="local-6989586621681822029"><span id="local-6989586621681822030"><span class="annot"><a href="Unison.TermPrinter.html#prettyBinding%27"><span class="hs-identifier hs-type">prettyBinding'</span></a></span><span>
</span><span id="line-618"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822030"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-619"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span>
</span><span id="line-620"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-622"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681822030"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822029"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-623"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier hs-type">ColorText</span></a></span></span></span><span>
</span><span id="line-624"></span><span id="prettyBinding%27"><span class="annot"><span class="annottext">prettyBinding' :: Width
-&gt; PrettyPrintEnv -&gt; HashQualified Name -&gt; Term v a -&gt; ColorText
</span><a href="Unison.TermPrinter.html#prettyBinding%27"><span class="hs-identifier hs-var hs-var">prettyBinding'</span></a></span></span><span> </span><span id="local-6989586621681822027"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681822027"><span class="hs-identifier hs-var">width</span></a></span></span><span> </span><span id="local-6989586621681822026"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822026"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681822025"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822025"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681822024"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822024"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-625"></span><span>  </span><span class="annot"><span class="annottext">Width -&gt; Pretty ColorText -&gt; ColorText
forall s. (Monoid s, IsString s) =&gt; Width -&gt; Pretty s -&gt; s
</span><a href="Unison.Util.Pretty.html#render"><span class="hs-identifier hs-var">PP.render</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681822027"><span class="hs-identifier hs-var">width</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty ColorText -&gt; ColorText) -&gt; Pretty ColorText -&gt; ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty ColorText)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty ColorText
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; HashQualified Name -&gt; Term v a -&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding"><span class="hs-identifier hs-var">prettyBinding</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822026"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822025"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681822024"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span id="local-6989586621681823049"><span id="local-6989586621681823050"><span id="local-6989586621681823051"><span id="local-6989586621681823052"><span class="annot"><a href="Unison.TermPrinter.html#prettyBinding0"><span class="hs-identifier hs-type">prettyBinding0</span></a></span><span>
</span><span id="line-628"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823052"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span>
</span><span id="line-630"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-632"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681823052"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823051"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823050"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823052"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823049"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-633"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span></span></span></span></span><span>
</span><span id="line-634"></span><span id="prettyBinding0"><span class="annot"><span class="annottext">prettyBinding0 :: PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding0"><span class="hs-identifier hs-var hs-var">prettyBinding0</span></a></span></span><span> </span><span id="local-6989586621681822023"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621681822022"><span class="annot"><span class="annottext">a :: AmbientContext
</span><a href="#local-6989586621681822022"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">imports :: AmbientContext -&gt; Imports
</span><a href="Unison.TermPrinter.html#imports"><span class="hs-identifier hs-var">imports</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822021"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">docContext :: AmbientContext -&gt; DocLiteralContext
</span><a href="Unison.TermPrinter.html#docContext"><span class="hs-identifier hs-var">docContext</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681822020"><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822020"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span id="local-6989586621681822019"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681822018"><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681822018"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Term2 v at ap v a -&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
Bool -&gt; Term (F v at ap) v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822017"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-635"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822016"><span class="hs-identifier hs-var">symbolic</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a -&gt; Bool
forall vt at ap a. Term (F vt at ap) v a -&gt; Bool
</span><a href="#local-6989586621681822015"><span class="hs-identifier hs-var">isBinary</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681822018"><span class="hs-identifier hs-var">term</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>  </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681822018"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-637"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-638"></span><span>  </span><span id="local-6989586621681822017"><span class="annot"><span class="annottext">go :: Bool -&gt; Term (F v at ap) v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822017"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681822014"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822014"><span class="hs-identifier hs-var">infix'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-639"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ann'</span></span><span> </span><span id="local-6989586621681822013"><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681822013"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681822012"><span class="annot"><span class="annottext">Type v at
</span><a href="#local-6989586621681822012"><span class="hs-identifier hs-var">tp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span>
</span><span id="line-640"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span>
</span><span id="line-641"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822011"><span class="hs-identifier hs-var">renderName</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-identifier hs-var">PP.hang</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#TypeAscriptionColon"><span class="hs-identifier hs-var">S.TypeAscriptionColon</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; :&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-642"></span><span>                                 </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports -&gt; Int -&gt; Type v at -&gt; Pretty (SyntaxText' Reference)
forall v a.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports -&gt; Int -&gt; Type v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TypePrinter.html#pretty0"><span class="hs-identifier hs-var">TypePrinter.pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type v at
</span><a href="#local-6989586621681822012"><span class="hs-identifier hs-var">tp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-643"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-644"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term (F v at ap) v a
-&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding0"><span class="hs-identifier hs-var">prettyBinding0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681822022"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681822013"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-645"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-646"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term (F v at ap) v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#LamsNamedMatch%27"><span class="hs-identifier hs-type">LamsNamedMatch'</span></a></span><span> </span><span id="local-6989586621681822010"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822010"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822009"><span class="annot"><span class="annottext">[([Pattern ()], Maybe (Term3 v PrintAnnotation),
  Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822009"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-647"></span><span>      </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span>
</span><span id="line-648"></span><span>        </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>         </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span>
</span><span id="line-649"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name -&gt; [v] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822008"><span class="hs-identifier hs-var">defnLhs</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822010"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BindingEquals"><span class="hs-identifier hs-var">S.BindingEquals</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; =&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span>
</span><span id="line-650"></span><span>                      </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#ControlKeyword"><span class="hs-identifier hs-var">S.ControlKeyword</span></a></span><span>
</span><span id="line-651"></span><span>                      </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;cases&quot;</span></span><span>
</span><span id="line-652"></span><span>                    </span><span class="hs-special">)</span><span>
</span><span id="line-653"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [([Pattern ()], Maybe (Term3 v PrintAnnotation),
     Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; Imports
-&gt; DocLiteralContext
-&gt; [MatchCase' () (Term3 v PrintAnnotation)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#printCase"><span class="hs-identifier hs-var">printCase</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822020"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">[([Pattern ()], Maybe (Term3 v PrintAnnotation),
  Term3 v PrintAnnotation)]
</span><a href="#local-6989586621681822009"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-654"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">LamsNamedOrDelay'</span></span><span> </span><span id="local-6989586621681822006"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822006"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681822005"><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681822005"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-655"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681822004"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822004"><span class="hs-identifier hs-var">im'</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681822003"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822003"><span class="hs-identifier hs-var">uses</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
forall v.
(Var v, Ord v) =&gt;
Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var">calcImports</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822002"><span class="hs-identifier hs-var">body'</span></a></span><span>
</span><span id="line-656"></span><span>          </span><span class="hs-comment">-- In the case where we're being called from inside `pretty0`, this</span><span>
</span><span id="line-657"></span><span>          </span><span class="hs-comment">-- call to printAnnotate is unfortunately repeating work we've already</span><span>
</span><span id="line-658"></span><span>          </span><span class="hs-comment">-- done.</span><span>
</span><span id="line-659"></span><span>          </span><span id="local-6989586621681822002"><span class="annot"><span class="annottext">body' :: Term3 v PrintAnnotation
</span><a href="#local-6989586621681822002"><span class="hs-identifier hs-var hs-var">body'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term (F v at ap) v a -&gt; Term3 v PrintAnnotation
forall v at ap a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var">printAnnotate</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681822005"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-660"></span><span>          </span><span class="hs-comment">-- Special case for 'let being on the same line</span><span>
</span><span id="line-661"></span><span>          </span><span id="local-6989586621681822001"><span class="annot"><span class="annottext">hang :: Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822001"><span class="hs-identifier hs-var hs-var">hang</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822002"><span class="hs-identifier hs-var">body'</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-662"></span><span>                   </span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Lets'</span></span><span> </span><span class="annot"><span class="annottext">[(Bool, v, Term3 v PrintAnnotation)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softHang"><span class="hs-identifier hs-var">PP.softHang</span></a></span><span>
</span><span id="line-663"></span><span>                   </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-identifier hs-var">PP.hang</span></a></span><span>
</span><span id="line-664"></span><span>      </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span>
</span><span id="line-665"></span><span>            </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name -&gt; [v] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822008"><span class="hs-identifier hs-var">defnLhs</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681822006"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#BindingEquals"><span class="hs-identifier hs-var">S.BindingEquals</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; =&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-666"></span><span>              </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822001"><span class="hs-operator hs-var">`hang`</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822003"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681822023"><span class="hs-identifier hs-var">env</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822004"><span class="hs-identifier hs-var">im'</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681822020"><span class="hs-identifier hs-var">doc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681822002"><span class="hs-identifier hs-var">body'</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-667"></span><span>    </span><span id="local-6989586621681821998"><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681821998"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;error: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term (F v at ap) v a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term (F v at ap) v a
</span><a href="#local-6989586621681821998"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-668"></span><span>   </span><span class="hs-keyword">where</span><span>
</span><span id="line-669"></span><span>    </span><span id="local-6989586621681822008"><span class="annot"><span class="annottext">defnLhs :: HashQualified Name -&gt; [v] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822008"><span class="hs-identifier hs-var hs-var">defnLhs</span></a></span></span><span> </span><span id="local-6989586621681821997"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821997"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span id="local-6989586621681821996"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821996"><span class="hs-identifier hs-var">vs</span></a></span></span><span>
</span><span id="line-670"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681822014"><span class="hs-identifier hs-var">infix'</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821996"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-671"></span><span>        </span><span id="local-6989586621681821995"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821995"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681821994"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821994"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">PP.sep</span></a></span><span>
</span><span id="line-672"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span>
</span><span id="line-673"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; Text
forall v. Var v =&gt; v -&gt; Text
</span><span class="hs-identifier hs-var">Var.name</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821995"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Element Reference
forall r. HashQualified Name -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#HashQualifier"><span class="hs-identifier hs-var">S.HashQualifier</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821997"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821997"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-675"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; Text
forall v. Var v =&gt; v -&gt; Text
</span><span class="hs-identifier hs-var">Var.name</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821994"><span class="hs-identifier hs-var">y</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-677"></span><span>        </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;error&quot;</span></span><span>
</span><span id="line-678"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821996"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822011"><span class="hs-identifier hs-var">renderName</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821997"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-679"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822011"><span class="hs-identifier hs-var">renderName</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821997"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#hang"><span class="hs-operator hs-var">`PP.hang`</span></a></span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Pretty (SyntaxText' Reference)
forall r. [v] -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821991"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821996"><span class="hs-identifier hs-var">vs</span></a></span><span>
</span><span id="line-680"></span><span>    </span><span id="local-6989586621681821991"><span class="annot"><span class="annottext">args :: [v] -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821991"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v -&gt; Pretty (SyntaxText' r)) -&gt; [v] -&gt; Pretty (SyntaxText' r)
forall (f :: * -&gt; *) s a.
(Foldable f, IsString s) =&gt;
(a -&gt; Pretty s) -&gt; f a -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#spacedMap"><span class="hs-identifier hs-var">PP.spacedMap</span></a></span><span> </span><span class="annot"><span class="annottext">((v -&gt; Pretty (SyntaxText' r)) -&gt; [v] -&gt; Pretty (SyntaxText' r))
-&gt; (v -&gt; Pretty (SyntaxText' r)) -&gt; [v] -&gt; Pretty (SyntaxText' r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Var"><span class="hs-identifier hs-var">S.Var</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r))
-&gt; (v -&gt; Pretty (SyntaxText' r)) -&gt; v -&gt; Pretty (SyntaxText' r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Pretty (SyntaxText' r))
-&gt; (v -&gt; Text) -&gt; v -&gt; Pretty (SyntaxText' r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Text
forall v. Var v =&gt; v -&gt; Text
</span><span class="hs-identifier hs-var">Var.name</span></span><span>
</span><span id="line-681"></span><span>    </span><span id="local-6989586621681822011"><span class="annot"><span class="annottext">renderName :: HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681822011"><span class="hs-identifier hs-var hs-var">renderName</span></a></span></span><span> </span><span id="local-6989586621681821990"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821990"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-682"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821989"><span class="annot"><span class="annottext">n' :: HashQualified Name
</span><a href="#local-6989586621681821989"><span class="hs-identifier hs-var hs-var">n'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681822021"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821990"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-683"></span><span>      </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var">parenIfInfix</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821989"><span class="hs-identifier hs-var">n'</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="Unison.TermPrinter.html#NonInfix"><span class="hs-identifier hs-var">NonInfix</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Element Reference
forall r. HashQualified Name -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#HashQualifier"><span class="hs-identifier hs-var">S.HashQualifier</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821989"><span class="hs-identifier hs-var">n'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821989"><span class="hs-identifier hs-var">n'</span></a></span><span>
</span><span id="line-684"></span><span>  </span><span id="local-6989586621681822016"><span class="annot"><span class="annottext">symbolic :: Bool
</span><a href="#local-6989586621681822016"><span class="hs-identifier hs-var hs-var">symbolic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681822019"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-685"></span><span>  </span><span id="local-6989586621681822015"><span class="annot"><span class="annottext">isBinary :: Term (F vt at ap) v a -&gt; Bool
</span><a href="#local-6989586621681822015"><span class="hs-identifier hs-var hs-var">isBinary</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-686"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ann'</span></span><span>              </span><span id="local-6989586621681821988"><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821988"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type vt at
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v a -&gt; Bool
</span><a href="#local-6989586621681822015"><span class="hs-identifier hs-var">isBinary</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821988"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><a href="Unison.TermPrinter.html#LamsNamedMatch%27"><span class="hs-identifier hs-type">LamsNamedMatch'</span></a></span><span>   </span><span id="local-6989586621681821987"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821987"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="annot"><span class="annottext">[([Pattern ap], Maybe (Term (F vt at ap) v a),
  Term (F vt at ap) v a)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821987"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-688"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">LamsNamedOrDelay'</span></span><span> </span><span id="local-6989586621681821986"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821986"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[v] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821986"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-689"></span><span>    </span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><span class="hs-identifier">_</span></span><span>                      </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-comment">-- unhittable</span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span id="local-6989586621681823075"><span class="annot"><a href="Unison.TermPrinter.html#isDocLiteral"><span class="hs-identifier hs-type">isDocLiteral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823075"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-692"></span><span id="isDocLiteral"><span class="annot"><span class="annottext">isDocLiteral :: Term3 v PrintAnnotation -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDocLiteral"><span class="hs-identifier hs-var hs-var">isDocLiteral</span></a></span></span><span> </span><span id="local-6989586621681821985"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821985"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821985"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-693"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocJoin"><span class="hs-identifier hs-type">DD.DocJoin</span></a></span><span> </span><span id="local-6989586621681821983"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821983"><span class="hs-identifier hs-var">segs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Bool)
-&gt; Seq (Term3 v PrintAnnotation) -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v. Term3 v PrintAnnotation -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDocLiteral"><span class="hs-identifier hs-var">isDocLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821983"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-694"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocBlob"><span class="hs-identifier hs-type">DD.DocBlob</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-695"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-696"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-697"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-698"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-699"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSignature"><span class="hs-identifier hs-type">DD.DocSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-700"></span><span>  </span><span class="annot"><a href="Unison.Builtin.Decls.html#DocEvaluate"><span class="hs-identifier hs-type">DD.DocEvaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-701"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span class="hs-comment">-- @[include]</span><span>
</span><span id="line-702"></span><span>  </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-703"></span><span>
</span><span id="line-704"></span><span class="hs-comment">-- Similar to DisplayValues.displayDoc, but does not follow and expand references.</span><span>
</span><span id="line-705"></span><span id="local-6989586621681823073"><span id="local-6989586621681823074"><span class="annot"><a href="Unison.TermPrinter.html#prettyDoc"><span class="hs-identifier hs-type">prettyDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823074"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823074"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823073"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span></span></span><span>
</span><span id="line-706"></span><span id="prettyDoc"><span class="annot"><span class="annottext">prettyDoc :: PrettyPrintEnv
-&gt; Imports -&gt; Term3 v a -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyDoc"><span class="hs-identifier hs-var hs-var">prettyDoc</span></a></span></span><span> </span><span id="local-6989586621681821974"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821974"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681821973"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821973"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span id="local-6989586621681821972"><span class="annot"><span class="annottext">Term3 v a
</span><a href="#local-6989586621681821972"><span class="hs-identifier hs-var">term</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;[: &quot;</span></span><span>
</span><span id="line-707"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v a -&gt; Pretty (SyntaxText' Reference)
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v a
</span><a href="#local-6989586621681821972"><span class="hs-identifier hs-var">term</span></a></span><span>
</span><span id="line-708"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821969"><span class="hs-identifier hs-var">spaceUnlessBroken</span></a></span><span>
</span><span id="line-709"></span><span>                              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;:]&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-710"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-711"></span><span>  </span><span id="local-6989586621681821970"><span class="annot"><span class="annottext">go :: Term (F typeVar typeAnn patternAnn) v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821970"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocJoin"><span class="hs-identifier hs-type">DD.DocJoin</span></a></span><span> </span><span id="local-6989586621681821968"><span class="annot"><span class="annottext">Seq (Term (F typeVar typeAnn patternAnn) v a)
</span><a href="#local-6989586621681821968"><span class="hs-identifier hs-var">segs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term (F typeVar typeAnn patternAnn) v a
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Seq (Term (F typeVar typeAnn patternAnn) v a)
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term (F typeVar typeAnn patternAnn) v a)
</span><a href="#local-6989586621681821968"><span class="hs-identifier hs-var">segs</span></a></span><span>
</span><span id="line-712"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocBlob"><span class="hs-identifier hs-type">DD.DocBlob</span></a></span><span> </span><span id="local-6989586621681821966"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821966"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. (ListLike s Char, IsString s) =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#paragraphyText"><span class="hs-identifier hs-var">PP.paragraphyText</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Text
</span><a href="#local-6989586621681821964"><span class="hs-identifier hs-var">escaped</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821966"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span id="local-6989586621681821963"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821963"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821963"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var">fmtTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821963"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span id="local-6989586621681821961"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821961"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-716"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Element Reference
forall r. r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TypeReference"><span class="hs-identifier hs-var">S.TypeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821961"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821960"><span class="hs-identifier hs-var">fmtType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821961"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-717"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span id="local-6989586621681821959"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821959"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-718"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall r. String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var">atKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;source&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var">fmtTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821959"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-719"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span id="local-6989586621681821957"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821957"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-720"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall r. String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var">atKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;source&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821960"><span class="hs-identifier hs-var">fmtType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821957"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-721"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSignature"><span class="hs-identifier hs-type">DD.DocSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span id="local-6989586621681821956"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821956"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall r. String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var">atKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;signature&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var">fmtTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821956"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-723"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocEvaluate"><span class="hs-identifier hs-type">DD.DocEvaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TermLink'</span></span><span> </span><span id="local-6989586621681821955"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821955"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-724"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall r. String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var">atKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;evaluate&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var">fmtTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821955"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-725"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821954"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821954"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall r. String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var">atKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;include&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var">fmtTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821954"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><a href="#local-6989586621681821970"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' Reference))
-&gt; String -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(invalid doc literal: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Term3 v a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term3 v a
</span><a href="#local-6989586621681821972"><span class="hs-identifier hs-var">term</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-727"></span><span>  </span><span id="local-6989586621681821953"><span class="annot"><span class="annottext">fmtName :: HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821953"><span class="hs-identifier hs-var hs-var">fmtName</span></a></span></span><span> </span><span id="local-6989586621681821952"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821952"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Element Reference
forall r. HashQualified Name -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#HashQualifier"><span class="hs-identifier hs-var">S.HashQualifier</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821952"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821973"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821952"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-728"></span><span>  </span><span id="local-6989586621681821962"><span class="annot"><span class="annottext">fmtTerm :: Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821962"><span class="hs-identifier hs-var hs-var">fmtTerm</span></a></span></span><span> </span><span id="local-6989586621681821951"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821951"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821953"><span class="hs-identifier hs-var">fmtName</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821974"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821951"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-729"></span><span>  </span><span id="local-6989586621681821960"><span class="annot"><span class="annottext">fmtType :: Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821960"><span class="hs-identifier hs-var hs-var">fmtType</span></a></span></span><span> </span><span id="local-6989586621681821950"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821950"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821953"><span class="hs-identifier hs-var">fmtName</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PrettyPrintEnv.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821974"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821950"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-730"></span><span>  </span><span id="local-6989586621681821958"><span class="annot"><span class="annottext">atKeyword :: String -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821958"><span class="hs-identifier hs-var hs-var">atKeyword</span></a></span></span><span> </span><span id="local-6989586621681821949"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821949"><span class="hs-identifier hs-var">w</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-731"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r))
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;@[&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-732"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocKeyword"><span class="hs-identifier hs-var">S.DocKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r))
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821949"><span class="hs-identifier hs-var">w</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-733"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r))
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;] &quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span>  </span><span id="local-6989586621681821964"><span class="annot"><span class="annottext">escaped :: Text -&gt; Text
</span><a href="#local-6989586621681821964"><span class="hs-identifier hs-var hs-var">escaped</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.replace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;@&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\\@&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Text) -&gt; (Text -&gt; Text) -&gt; Text -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.replace</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;:]&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\\:]&quot;</span></span><span>
</span><span id="line-735"></span><span>  </span><span id="local-6989586621681821969"><span class="annot"><span class="annottext">spaceUnlessBroken :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821969"><span class="hs-identifier hs-var hs-var">spaceUnlessBroken</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#orElse"><span class="hs-identifier hs-var">PP.orElse</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span class="annot"><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-type">paren</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-738"></span><span id="paren"><span class="annot"><span class="annottext">paren :: Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var hs-var">paren</span></a></span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>  </span><span id="local-6989586621681821946"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821946"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Parenthesis"><span class="hs-identifier hs-var">S.Parenthesis</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;(&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821946"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element Reference
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#Parenthesis"><span class="hs-identifier hs-var">S.Parenthesis</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-739"></span><span class="annot"><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span id="local-6989586621681821944"><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821944"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821944"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-740"></span><span>
</span><span id="line-741"></span><span class="annot"><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-type">parenIfInfix</span></a></span><span>
</span><span id="line-742"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-743"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#InfixContext"><span class="hs-identifier hs-type">InfixContext</span></a></span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span id="parenIfInfix"><span class="annot"><span class="annottext">parenIfInfix :: HashQualified Name
-&gt; InfixContext
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#parenIfInfix"><span class="hs-identifier hs-var hs-var">parenIfInfix</span></a></span></span><span> </span><span id="local-6989586621681821943"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821943"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621681821942"><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681821942"><span class="hs-identifier hs-var">ic</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-746"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821943"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="#local-6989586621681821942"><span class="hs-identifier hs-var">ic</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext -&gt; InfixContext -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="Unison.TermPrinter.html#NonInfix"><span class="hs-identifier hs-var">NonInfix</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Bool
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#paren"><span class="hs-identifier hs-var">paren</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span id="local-6989586621681823126"><span class="annot"><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-type">l</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IsString</span></span><span> </span><span class="annot"><a href="#local-6989586621681823126"><span class="hs-identifier hs-type">s</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823126"><span class="hs-identifier hs-type">s</span></a></span></span><span>
</span><span id="line-749"></span><span id="l"><span class="annot"><span class="annottext">l :: String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty s
forall s. IsString s =&gt; String -&gt; s
</span><span class="hs-identifier hs-var">fromString</span></span><span>
</span><span id="line-750"></span><span>
</span><span id="line-751"></span><span class="annot"><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-type">isSymbolic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-752"></span><span id="isSymbolic"><span class="annot"><span class="annottext">isSymbolic :: HashQualified Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var hs-var">isSymbolic</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HQ.NameOnly</span></span><span> </span><span id="local-6989586621681821940"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821940"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic%27"><span class="hs-identifier hs-var">isSymbolic'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821940"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-753"></span><span class="annot"><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span id="local-6989586621681821937"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821937"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">ShortHash
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic%27"><span class="hs-identifier hs-var">isSymbolic'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821937"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-754"></span><span class="annot"><a href="Unison.TermPrinter.html#isSymbolic"><span class="hs-identifier hs-var">isSymbolic</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HQ.HashOnly</span></span><span> </span><span class="annot"><span class="annottext">ShortHash
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="annot"><a href="Unison.TermPrinter.html#isSymbolic%27"><span class="hs-identifier hs-type">isSymbolic'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-757"></span><span id="isSymbolic%27"><span class="annot"><span class="annottext">isSymbolic' :: Name -&gt; Bool
</span><a href="Unison.TermPrinter.html#isSymbolic%27"><span class="hs-identifier hs-var hs-var">isSymbolic'</span></a></span></span><span> </span><span id="local-6989586621681821935"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821935"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">String -&gt; Either Err (String, String)
</span><a href="Unison.Lexer.html#symbolyId"><span class="hs-identifier hs-var">symbolyId</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Either Err (String, String))
-&gt; (Name -&gt; String) -&gt; Name -&gt; Either Err (String, String)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; String
</span><span class="hs-identifier hs-var">Name.toString</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Either Err (String, String))
-&gt; Name -&gt; Either Err (String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821935"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-758"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">(String, String)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-759"></span><span>  </span><span class="annot"><span class="annottext">Either Err (String, String)
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-760"></span><span>
</span><span id="line-761"></span><span class="annot"><a href="Unison.TermPrinter.html#isBlank"><span class="hs-identifier hs-type">isBlank</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-762"></span><span id="isBlank"><span class="annot"><span class="annottext">isBlank :: String -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlank"><span class="hs-identifier hs-var hs-var">isBlank</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span> </span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span> </span><span id="local-6989586621681821933"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821933"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Int -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Maybe Int
forall a. Read a =&gt; String -&gt; Maybe a
</span><span class="hs-identifier hs-var">readMaybe</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821933"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-763"></span><span class="annot"><a href="Unison.TermPrinter.html#isBlank"><span class="hs-identifier hs-var">isBlank</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="annot"><a href="Unison.TermPrinter.html#emptyAc"><span class="hs-identifier hs-type">emptyAc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-766"></span><span id="emptyAc"><span class="annot"><span class="annottext">emptyAc :: AmbientContext
</span><a href="Unison.TermPrinter.html#emptyAc"><span class="hs-identifier hs-var hs-var">emptyAc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Normal"><span class="hs-identifier hs-var">Normal</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="Unison.TermPrinter.html#MaybeDoc"><span class="hs-identifier hs-var">MaybeDoc</span></a></span><span>
</span><span id="line-767"></span><span>
</span><span id="line-768"></span><span class="annot"><a href="Unison.TermPrinter.html#emptyBlockAc"><span class="hs-identifier hs-type">emptyBlockAc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-769"></span><span id="emptyBlockAc"><span class="annot"><span class="annottext">emptyBlockAc :: AmbientContext
</span><a href="Unison.TermPrinter.html#emptyBlockAc"><span class="hs-identifier hs-var hs-var">emptyBlockAc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">-</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="Unison.TermPrinter.html#Block"><span class="hs-identifier hs-var">Block</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="Unison.TermPrinter.html#MaybeDoc"><span class="hs-identifier hs-var">MaybeDoc</span></a></span><span>
</span><span id="line-770"></span><span>
</span><span id="line-771"></span><span class="annot"><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-type">ac</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#BlockContext"><span class="hs-identifier hs-type">BlockContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#DocLiteralContext"><span class="hs-identifier hs-type">DocLiteralContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span>
</span><span id="line-772"></span><span id="ac"><span class="annot"><span class="annottext">ac :: Int
-&gt; BlockContext -&gt; Imports -&gt; DocLiteralContext -&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#ac"><span class="hs-identifier hs-var hs-var">ac</span></a></span></span><span> </span><span id="local-6989586621681821930"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821930"><span class="hs-identifier hs-var">prec</span></a></span></span><span> </span><span id="local-6989586621681821929"><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681821929"><span class="hs-identifier hs-var">bc</span></a></span></span><span> </span><span id="local-6989586621681821928"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821928"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span id="local-6989586621681821927"><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681821927"><span class="hs-identifier hs-var">doc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
-&gt; BlockContext
-&gt; InfixContext
-&gt; Imports
-&gt; DocLiteralContext
-&gt; Bool
-&gt; AmbientContext
</span><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-var">AmbientContext</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821930"><span class="hs-identifier hs-var">prec</span></a></span><span> </span><span class="annot"><span class="annottext">BlockContext
</span><a href="#local-6989586621681821929"><span class="hs-identifier hs-var">bc</span></a></span><span> </span><span class="annot"><span class="annottext">InfixContext
</span><a href="Unison.TermPrinter.html#NonInfix"><span class="hs-identifier hs-var">NonInfix</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821928"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">DocLiteralContext
</span><a href="#local-6989586621681821927"><span class="hs-identifier hs-var">doc</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-773"></span><span>
</span><span id="line-774"></span><span id="local-6989586621681823138"><span class="annot"><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-type">fmt</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.SyntaxText.html#Element"><span class="hs-identifier hs-type">S.Element</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823138"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.SyntaxText.html#SyntaxText%27"><span class="hs-identifier hs-type">S.SyntaxText'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823138"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.SyntaxText.html#SyntaxText%27"><span class="hs-identifier hs-type">S.SyntaxText'</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823138"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-775"></span><span id="fmt"><span class="annot"><span class="annottext">fmt :: Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var hs-var">fmt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.Util.Pretty.html#withSyntax"><span class="hs-identifier hs-var">PP.withSyntax</span></a></span><span>
</span><span id="line-776"></span><span>
</span><span id="line-777"></span><span class="hs-comment">{-
   # FQN elision

   The term pretty-printer inserts `use` statements in some circumstances, to
   avoid the need for using fully-qualified names (FQNs) everywhere.  The
   following is an explanation and specification, as developed in issue #285.

   As an example, instead of

     foo p q r =
       if p then Util.bar q else Util.bar r

   we actually output the following.

     foo p q r =
       use Util bar
       if p then bar q else bar r

   Here, the `use` statement `use Util bar` has been inserted at the start of
   the block statement containing the `if`.  Within that scope, `Util.bar` can
   be referred to just with `bar`.  We say `Util` is the prefix, and `bar` is
   the suffix.

   When choosing where to place `use` statements, the pretty-printer tries to
   - float them down, deeper into the syntax tree, to keep them visually close
     to the use sites ('usages') of the names involved, but also tries to
   - minimize the number of repetitions of `use` statements for the same names
     by floating them up, towards the top of the syntax tree, so that one
     `use` statement takes effect over more name usages.

   It avoids producing output like the following.

     foo p q r =
       use My bar
       if p then bar q else Your.bar r

   Here `My.bar` is imported with a `use` statement, but `Your.bar` is not.
   We avoid this because it would be easy to misread `bar` as meaning
   `Your.bar`.  Instead both names are output fully qualified.

   This means that a `use` statement is only emitted for a name
   when the suffix is unique, across all the names referenced in the scope of
   the `use` statement.

   We don't emit a `use` statement for a name if it only occurs once within
   the scope (unless it's an infix operator, since they look nicer without
   a namespace qualifier.)

   The emitted code does not depend on Type-Driven Name Resolution (TDNR).
   For example, we emit
     foo =
       use Nat +
       1 + 2
   even though TDNR means that `foo = 1 + 2` would have had the same
   meaning.  That avoids the reader having to run typechecker logic in their
   head in order to know what functions are being called.

   Multi-level name qualification is allowed - like `Foo.Bar.baz`.  The
   pretty-printer tries to strip off as many sections of the prefix as
   possible, without causing a clash with other names.  If more sections
   can be stripped off, further down the tree, then it does this too.

   ## Specification

   We output a `use` statement for prefix P and suffix S at a given scope if
     - the scope is a block statement (so the `use` is syntactically valid)
     - the number of usages of the thing referred to by P.S within the scope
       - is &gt; 1, or
       - is 1, and S is an infix operator
     - [uniqueness] there is no other Q with Q.S used in that scope
     - there is no longer prefix PP (and suffix s, with PP.s == P.S) which
       satisfies uniqueness
     - [narrowness] there is no block statement further down inside this one
       which contains all of the usages.

   Use statements in a block statement are sorted alphabetically by prefix.
   Suffixes covered by a single use statement are sorted alphabetically.
   Note that each `use` line cannot be line-broken.  Ideally they would
   fit the available space by splitting into multiple separate `use` lines.

   ## Algorithm

   Bubbling up from the leaves of the syntax tree, we calculate for each
   node, a `Map Suffix (Map Prefix Int)` (the 'usages map'), where the `Int`
   is the number of usages of Prefix.Suffix at/under that node.  (Note that
   a usage of `A.B.c` corresponds to two entries in the outer map.)  See
   `printAnnotate`.

   Once we have this decoration on all the terms, we start pretty-printing.
   As we recurse back down through the tree, we keep a `Map Name Suffix` (the
   'imports map'), to record the effect of all the `use` statements we've added
   in the nodes above.  When outputting names, we check this map to work out
   how to render them, using any suffix we find, or else falling back to the
   FQN.  At each block statement, each suffix in that term's usages map is a
   candidate to be imported with a use statement, subject to the various
   rules in the specification.

   # Debugging

   Start by enabling the tracing in elideFQN in PrettyPrintEnv.hs.

   There's also tracing in allInSubBlock to help when the narrowness check
   is playing up.

   # Semantics of imports

   Here is some background on how imports work.

   `use XYZ blah` brings `XYZ.blah` into scope, bound to the name `blah`. More
   generally, `use` is followed by a FQN prefix, then the local suffix.
   Concatenate the FQN prefix with the local suffix, with a dot between them,
   and you get the FQN, which is bound to the name equal to the local suffix.

   `use XYZ blah qux` is equivalent to the two statements (and this
   generalizes for any N symbols):
     use XYZ blah
     use XYZ qux

   This syntax works the same even if XYZ or blah have dots in them, so:
   `use Util.External My.Foo` brings `Util.External.My.Foo` into scope, bound
   to the name `My.Foo`.

   That's it. No wildcard imports, imports that do renaming, etc. We can
   consider adding some features like this later.
-}</span><span>
</span><span id="line-902"></span><span>
</span><span id="line-903"></span><span class="hs-keyword">data</span><span> </span><span id="PrintAnnotation"><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-var">PrintAnnotation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PrintAnnotation"><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-var">PrintAnnotation</span></a></span></span><span>
</span><span id="line-904"></span><span>  </span><span class="hs-special">{</span><span>
</span><span id="line-905"></span><span>    </span><span class="hs-comment">-- For each suffix that appears in/under this term, the set of prefixes</span><span>
</span><span id="line-906"></span><span>    </span><span class="hs-comment">-- used with that suffix, and how many times each occurs.</span><span>
</span><span id="line-907"></span><span>    </span><span id="usages"><span class="annot"><span class="annottext">PrintAnnotation -&gt; Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var hs-var">usages</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>  </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821918"><span id="local-6989586621681821920"><span id="local-6989586621681821922"><span class="annot"><span class="annottext">Int -&gt; PrintAnnotation -&gt; ShowS
[PrintAnnotation] -&gt; ShowS
PrintAnnotation -&gt; String
(Int -&gt; PrintAnnotation -&gt; ShowS)
-&gt; (PrintAnnotation -&gt; String)
-&gt; ([PrintAnnotation] -&gt; ShowS)
-&gt; Show PrintAnnotation
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [PrintAnnotation] -&gt; ShowS
$cshowList :: [PrintAnnotation] -&gt; ShowS
show :: PrintAnnotation -&gt; String
$cshow :: PrintAnnotation -&gt; String
showsPrec :: Int -&gt; PrintAnnotation -&gt; ShowS
$cshowsPrec :: Int -&gt; PrintAnnotation -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-909"></span><span>
</span><span id="line-910"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681821913"><span id="local-6989586621681821915"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usages :: PrintAnnotation -&gt; Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var">usages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681821911"><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821911"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821910"><span class="annot"><span class="annottext">&lt;&gt; :: PrintAnnotation -&gt; PrintAnnotation -&gt; PrintAnnotation
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usages :: PrintAnnotation -&gt; Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var">usages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621681821909"><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821909"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-912"></span><span>    </span><span class="annot"><span class="annottext">PrintAnnotation :: Map Text (Map Prefix Int) -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usages :: Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var">usages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Map Prefix Int -&gt; Map Prefix Int -&gt; Map Prefix Int)
-&gt; Map Text (Map Prefix Int)
-&gt; Map Text (Map Prefix Int)
-&gt; Map Text (Map Prefix Int)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.unionWith</span></span><span> </span><span class="annot"><span class="annottext">Map Prefix Int -&gt; Map Prefix Int -&gt; Map Prefix Int
forall k a. (Ord k, Num a) =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621681821907"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821911"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821909"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-913"></span><span>      </span><span id="local-6989586621681821907"><span class="annot"><span class="annottext">f :: Map k a -&gt; Map k a -&gt; Map k a
</span><a href="#local-6989586621681821907"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span id="local-6989586621681821906"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821906"><span class="hs-identifier hs-var">a'</span></a></span></span><span> </span><span id="local-6989586621681821905"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821905"><span class="hs-identifier hs-var">b'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.unionWith</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">(+)</span></span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821906"><span class="hs-identifier hs-var">a'</span></a></span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821905"><span class="hs-identifier hs-var">b'</span></a></span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621681821899"><span id="local-6989586621681821901"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-916"></span><span>  </span><span id="local-6989586621681821897"><span class="annot"><span class="annottext">mempty :: PrintAnnotation
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation :: Map Text (Map Prefix Int) -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usages :: Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var">usages</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-917"></span><span>
</span><span id="line-918"></span><span id="local-6989586621681822871"><span id="local-6989586621681822872"><span id="local-6989586621681822873"><span id="local-6989586621681822874"><span class="annot"><a href="Unison.TermPrinter.html#suffixCounterTerm"><span class="hs-identifier hs-type">suffixCounterTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822874"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822874"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822873"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822872"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822874"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span></span></span><span>
</span><span id="line-919"></span><span id="suffixCounterTerm"><span class="annot"><span class="annottext">suffixCounterTerm :: PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#suffixCounterTerm"><span class="hs-identifier hs-var hs-var">suffixCounterTerm</span></a></span></span><span> </span><span id="local-6989586621681821895"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-920"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Var'</span></span><span> </span><span id="local-6989586621681821894"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821894"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashQualified Name
forall v. Var v =&gt; v -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">HQ.unsafeFromVar</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821894"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-921"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821892"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821892"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821892"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-922"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span id="local-6989586621681821891"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821891"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#noImportRefs"><span class="hs-identifier hs-var">noImportRefs</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821891"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-923"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Constructor'</span></span><span> </span><span id="local-6989586621681821889"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821889"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681821888"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821888"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821889"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821888"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-924"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Request'</span></span><span> </span><span id="local-6989586621681821887"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821887"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681821886"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821886"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Int -&gt; ConstructorType -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821887"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821886"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span class="hs-special">)</span><span>
</span><span id="line-925"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ann'</span></span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821885"><span class="annot"><span class="annottext">Type v at
</span><a href="#local-6989586621681821885"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Type v at -&gt; PrintAnnotation
forall v a.
(Var v, Ord v) =&gt;
PrettyPrintEnv -&gt; Type v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countTypeUsages"><span class="hs-identifier hs-var">countTypeUsages</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Type v at
</span><a href="#local-6989586621681821885"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-926"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821883"><span class="annot"><span class="annottext">[MatchCase ap (Term2 v at ap v a)]
</span><a href="#local-6989586621681821883"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821882"><span class="annot"><span class="annottext">pat :: MatchCase loc a -&gt; Pattern loc
</span><a href="#local-6989586621681821882"><span class="hs-identifier hs-var hs-var">pat</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span id="local-6989586621681821881"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821881"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821881"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-927"></span><span>                   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(MatchCase ap (Term2 v at ap v a) -&gt; PrintAnnotation)
-&gt; [MatchCase ap (Term2 v at ap v a)] -&gt; PrintAnnotation
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Pattern ap -&gt; PrintAnnotation
forall loc. PrettyPrintEnv -&gt; Pattern loc -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countPatternUsages"><span class="hs-identifier hs-var">countPatternUsages</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821895"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pattern ap -&gt; PrintAnnotation)
-&gt; (MatchCase ap (Term2 v at ap v a) -&gt; Pattern ap)
-&gt; MatchCase ap (Term2 v at ap v a)
-&gt; PrintAnnotation
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MatchCase ap (Term2 v at ap v a) -&gt; Pattern ap
forall loc a. MatchCase loc a -&gt; Pattern loc
</span><a href="#local-6989586621681821882"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 v at ap v a)]
</span><a href="#local-6989586621681821883"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-928"></span><span>    </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-929"></span><span>
</span><span id="line-930"></span><span id="local-6989586621681822849"><span id="local-6989586621681822850"><span class="annot"><a href="Unison.TermPrinter.html#suffixCounterType"><span class="hs-identifier hs-type">suffixCounterType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822850"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681822850"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822849"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span><span>
</span><span id="line-931"></span><span id="suffixCounterType"><span class="annot"><span class="annottext">suffixCounterType :: PrettyPrintEnv -&gt; Type v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#suffixCounterType"><span class="hs-identifier hs-var hs-var">suffixCounterType</span></a></span></span><span> </span><span id="local-6989586621681821878"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821878"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-932"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Type.Var'</span></span><span> </span><span id="local-6989586621681821876"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821876"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; HashQualified Name
forall v. Var v =&gt; v -&gt; HashQualified Name
</span><span class="hs-identifier hs-var">HQ.unsafeFromVar</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821876"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-933"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Type.Ref'</span></span><span> </span><span id="local-6989586621681821874"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821874"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#noImportRefs"><span class="hs-identifier hs-var">noImportRefs</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821874"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821874"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier hs-var">Type.listRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-934"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Type.Ref'</span></span><span> </span><span id="local-6989586621681821872"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821872"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PrettyPrintEnv.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821878"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821872"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-935"></span><span>    </span><span class="annot"><span class="annottext">Type v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span id="local-6989586621681823166"><span id="local-6989586621681823167"><span id="local-6989586621681823168"><span id="local-6989586621681823169"><span class="annot"><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-type">printAnnotate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823169"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681823169"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681823169"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823168"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823167"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823169"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823166"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823169"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span></span></span><span>
</span><span id="line-938"></span><span id="printAnnotate"><span class="annot"><span class="annottext">printAnnotate :: PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; Term3 v PrintAnnotation
</span><a href="Unison.TermPrinter.html#printAnnotate"><span class="hs-identifier hs-var hs-var">printAnnotate</span></a></span></span><span> </span><span id="local-6989586621681821871"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821871"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681821870"><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681821870"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((a, PrintAnnotation) -&gt; PrintAnnotation)
-&gt; Term (F v () ()) v (a, PrintAnnotation)
-&gt; Term3 v PrintAnnotation
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(a, PrintAnnotation) -&gt; PrintAnnotation
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term2 v at ap v (a, PrintAnnotation)
-&gt; Term (F v () ()) v (a, PrintAnnotation)
forall v at ap b. Ord v =&gt; Term2 v at ap v b -&gt; Term2 v () () v b
</span><a href="#local-6989586621681821869"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term2 v at ap v a -&gt; PrintAnnotation)
-&gt; Term2 v at ap v a -&gt; Term2 v at ap v (a, PrintAnnotation)
forall v (f :: * -&gt; *) b a.
(Ord v, Foldable f, Functor f, Monoid b) =&gt;
(Term f v a -&gt; b) -&gt; Term f v a -&gt; Term f v (a, b)
</span><span class="hs-identifier hs-var">reannotateUp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; PrintAnnotation
forall v at ap a.
Var v =&gt;
PrettyPrintEnv -&gt; Term2 v at ap v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#suffixCounterTerm"><span class="hs-identifier hs-var">suffixCounterTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821871"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681821870"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-939"></span><span>  </span><span id="local-6989586621681822879"><span id="local-6989586621681822880"><span id="local-6989586621681822881"><span id="local-6989586621681822882"><span class="annot"><a href="#local-6989586621681821869"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822881"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822880"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822879"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681822882"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822879"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-940"></span><span>  </span><span id="local-6989586621681821869"><span class="annot"><span class="annottext">go :: Term2 v at ap v b -&gt; Term2 v () () v b
</span><a href="#local-6989586621681821869"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v -&gt; v)
-&gt; (at -&gt; ())
-&gt; (ap -&gt; ())
-&gt; Term2 v at ap v b
-&gt; Term2 v () () v b
forall vt vt' at at' ap ap' v a.
(Ord vt, Ord vt') =&gt;
(vt -&gt; vt')
-&gt; (at -&gt; at')
-&gt; (ap -&gt; ap')
-&gt; Term2 vt at ap v a
-&gt; Term2 vt' at' ap' v a
</span><span class="hs-identifier hs-var">extraMap'</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; v
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; at -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; ap -&gt; ()
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-941"></span><span>
</span><span id="line-942"></span><span id="local-6989586621681822897"><span id="local-6989586621681822898"><span class="annot"><a href="Unison.TermPrinter.html#countTypeUsages"><span class="hs-identifier hs-type">countTypeUsages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822898"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822898"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681822898"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822897"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span></span><span>
</span><span id="line-943"></span><span id="countTypeUsages"><span class="annot"><span class="annottext">countTypeUsages :: PrettyPrintEnv -&gt; Type v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countTypeUsages"><span class="hs-identifier hs-var hs-var">countTypeUsages</span></a></span></span><span> </span><span id="local-6989586621681821866"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821866"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681821865"><span class="annot"><span class="annottext">Type v a
</span><a href="#local-6989586621681821865"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a, PrintAnnotation) -&gt; PrintAnnotation
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((a, PrintAnnotation) -&gt; PrintAnnotation)
-&gt; (a, PrintAnnotation) -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term F v (a, PrintAnnotation) -&gt; (a, PrintAnnotation)
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">annotation</span></span><span> </span><span class="annot"><span class="annottext">(Term F v (a, PrintAnnotation) -&gt; (a, PrintAnnotation))
-&gt; Term F v (a, PrintAnnotation) -&gt; (a, PrintAnnotation)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Type v a -&gt; PrintAnnotation)
-&gt; Type v a -&gt; Term F v (a, PrintAnnotation)
forall v (f :: * -&gt; *) b a.
(Ord v, Foldable f, Functor f, Monoid b) =&gt;
(Term f v a -&gt; b) -&gt; Term f v a -&gt; Term f v (a, b)
</span><span class="hs-identifier hs-var">reannotateUp</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Type v a -&gt; PrintAnnotation
forall v a. Var v =&gt; PrettyPrintEnv -&gt; Type v a -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#suffixCounterType"><span class="hs-identifier hs-var">suffixCounterType</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821866"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Type v a
</span><a href="#local-6989586621681821865"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-944"></span><span>
</span><span id="line-945"></span><span id="local-6989586621681822894"><span class="annot"><a href="Unison.TermPrinter.html#countPatternUsages"><span class="hs-identifier hs-type">countPatternUsages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pattern</span></span><span> </span><span class="annot"><a href="#local-6989586621681822894"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span></span><span>
</span><span id="line-946"></span><span id="countPatternUsages"><span class="annot"><span class="annottext">countPatternUsages :: PrettyPrintEnv -&gt; Pattern loc -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countPatternUsages"><span class="hs-identifier hs-var hs-var">countPatternUsages</span></a></span></span><span> </span><span id="local-6989586621681821864"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821864"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span id="local-6989586621681821863"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821863"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pattern loc -&gt; PrintAnnotation) -&gt; Pattern loc -&gt; PrintAnnotation
forall m loc. Monoid m =&gt; (Pattern loc -&gt; m) -&gt; Pattern loc -&gt; m
</span><span class="hs-identifier hs-var">Pattern.foldMap'</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; PrintAnnotation
forall loc. Pattern loc -&gt; PrintAnnotation
</span><a href="#local-6989586621681821861"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821863"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-947"></span><span>  </span><span id="local-6989586621681821861"><span class="annot"><span class="annottext">f :: Pattern loc -&gt; PrintAnnotation
</span><a href="#local-6989586621681821861"><span class="hs-identifier hs-var hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-948"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Unbound</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-949"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Var</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span>                </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-950"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Boolean</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span>          </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-951"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Int</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-952"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Nat</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-953"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Float</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-identifier">_</span></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-954"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Text</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-955"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Char</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-956"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.As</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span>               </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-957"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceLiteral</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-958"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceOp</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SeqOp
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-959"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectPure</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span>       </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-960"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectBind</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821860"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821860"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681821859"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821859"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Int -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#patternName"><span class="hs-identifier hs-var">PrettyPrintEnv.patternName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821864"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821860"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821859"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-961"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Constructor</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821857"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821857"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681821856"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821856"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-962"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#noImportRefs"><span class="hs-identifier hs-var">noImportRefs</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821857"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-963"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var">countHQ</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; PrintAnnotation)
-&gt; HashQualified Name -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Int -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#patternName"><span class="hs-identifier hs-var">PrettyPrintEnv.patternName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821864"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821857"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821856"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-964"></span><span>
</span><span id="line-965"></span><span class="annot"><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-type">countHQ</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HQ.HashQualified</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-966"></span><span id="countHQ"><span class="annot"><span class="annottext">countHQ :: HashQualified Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countHQ"><span class="hs-identifier hs-var hs-var">countHQ</span></a></span></span><span> </span><span id="local-6989586621681821855"><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821855"><span class="hs-identifier hs-var">hq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe PrintAnnotation -&gt; PrintAnnotation
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">(Maybe PrintAnnotation -&gt; PrintAnnotation)
-&gt; Maybe PrintAnnotation -&gt; PrintAnnotation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; PrintAnnotation) -&gt; Maybe Name -&gt; Maybe PrintAnnotation
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countName"><span class="hs-identifier hs-var">countName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashQualified Name -&gt; Maybe Name
forall n. HashQualified n -&gt; Maybe n
</span><span class="hs-identifier hs-var">HQ.toName</span></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Maybe Name)
-&gt; HashQualified Name -&gt; Maybe Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681821855"><span class="hs-identifier hs-var">hq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-967"></span><span>
</span><span id="line-968"></span><span class="annot"><a href="Unison.TermPrinter.html#countName"><span class="hs-identifier hs-type">countName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-969"></span><span id="countName"><span class="annot"><span class="annottext">countName :: Name -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#countName"><span class="hs-identifier hs-var hs-var">countName</span></a></span></span><span> </span><span id="local-6989586621681821852"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821852"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-970"></span><span>  </span><span class="annot"><span class="annottext">PrintAnnotation :: Map Text (Map Prefix Int) -&gt; PrintAnnotation
</span><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-971"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">usages :: Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var">usages</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-972"></span><span>        </span><span class="annot"><span class="annottext">[(Text, Map Prefix Int)] -&gt; Map Text (Map Prefix Int)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-973"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621681821850"><span class="annot"><span class="annottext">[NameSegment]
</span><a href="#local-6989586621681821850"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821849"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821849"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Name -&gt; [([NameSegment], Name)]
Name -&gt; [([NameSegment], Name)]
</span><span class="hs-identifier hs-var">Name.splits</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821852"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-974"></span><span>          </span><span class="annot"><span class="annottext">(Text, Map Prefix Int) -&gt; [(Text, Map Prefix Int)]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var">Name.toText</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821849"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Int -&gt; Map Prefix Int
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(NameSegment -&gt; Text) -&gt; [NameSegment] -&gt; Prefix
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">NameSegment -&gt; Text
</span><span class="hs-identifier hs-var hs-var">NameSegment.toText</span></span><span> </span><span class="annot"><span class="annottext">[NameSegment]
</span><a href="#local-6989586621681821850"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-975"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-976"></span><span>
</span><span id="line-977"></span><span class="annot"><a href="Unison.TermPrinter.html#joinName"><span class="hs-identifier hs-type">joinName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span>
</span><span id="line-978"></span><span id="joinName"><span class="annot"><span class="annottext">joinName :: Prefix -&gt; Text -&gt; Name
</span><a href="Unison.TermPrinter.html#joinName"><span class="hs-identifier hs-var hs-var">joinName</span></a></span></span><span> </span><span id="local-6989586621681821843"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821843"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681821842"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821842"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HasCallStack =&gt; Text -&gt; Name
Text -&gt; Name
</span><span class="hs-identifier hs-var">Name.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Name) -&gt; Text -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Text
</span><a href="Unison.TermPrinter.html#dotConcat"><span class="hs-identifier hs-var">dotConcat</span></a></span><span> </span><span class="annot"><span class="annottext">(Prefix -&gt; Text) -&gt; Prefix -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821843"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Prefix -&gt; Prefix
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821842"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-979"></span><span>
</span><span id="line-980"></span><span class="annot"><a href="Unison.TermPrinter.html#dotConcat"><span class="hs-identifier hs-type">dotConcat</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-981"></span><span id="dotConcat"><span class="annot"><span class="annottext">dotConcat :: Prefix -&gt; Text
</span><a href="Unison.TermPrinter.html#dotConcat"><span class="hs-identifier hs-var hs-var">dotConcat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Text
</span><span class="hs-identifier hs-var">Text.concat</span></span><span> </span><span class="annot"><span class="annottext">(Prefix -&gt; Text) -&gt; (Prefix -&gt; Prefix) -&gt; Prefix -&gt; Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Prefix -&gt; Prefix
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">intersperse</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>
</span><span id="line-983"></span><span class="hs-comment">-- This predicate is used to keep certain refs out of the FQN elision annotations,</span><span>
</span><span id="line-984"></span><span class="hs-comment">-- so that we don't get `use` statements for them.</span><span>
</span><span id="line-985"></span><span class="hs-comment">--</span><span>
</span><span id="line-986"></span><span class="hs-comment">-- Don't do `use () ()` or `use Pair Pair`.  Tuple syntax generates ().() and Pair.Pair</span><span>
</span><span id="line-987"></span><span class="hs-comment">-- under the covers anyway.  This does mean that if someone is using Pair.Pair directly,</span><span>
</span><span id="line-988"></span><span class="hs-comment">-- then they'll miss out on FQN elision for that.</span><span>
</span><span id="line-989"></span><span class="hs-comment">--</span><span>
</span><span id="line-990"></span><span class="hs-comment">-- Don't do `use builtin.Doc Blob`, `use builtin.Link Term`, or similar.  That avoids</span><span>
</span><span id="line-991"></span><span class="hs-comment">-- unnecessary use statements above Doc literals and termLink/typeLink.</span><span>
</span><span id="line-992"></span><span class="annot"><a href="Unison.TermPrinter.html#noImportRefs"><span class="hs-identifier hs-type">noImportRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-993"></span><span id="noImportRefs"><span class="annot"><span class="annottext">noImportRefs :: Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#noImportRefs"><span class="hs-identifier hs-var hs-var">noImportRefs</span></a></span></span><span> </span><span id="local-6989586621681821838"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821838"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-994"></span><span>  </span><span class="annot"><span class="annottext">Reference -&gt; [Reference] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">elem</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821838"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-995"></span><span>    </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#pairRef"><span class="hs-identifier hs-var">DD.pairRef</span></a></span><span>
</span><span id="line-996"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#unitRef"><span class="hs-identifier hs-var">DD.unitRef</span></a></span><span>
</span><span id="line-997"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#docRef"><span class="hs-identifier hs-var">DD.docRef</span></a></span><span>
</span><span id="line-998"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#linkRef"><span class="hs-identifier hs-var">DD.linkRef</span></a></span><span>
</span><span id="line-999"></span><span>    </span><span class="hs-special">]</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span class="hs-keyword">infixl</span><span> </span><span class="hs-number">0</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-type">|&gt;</span></a></span><span>
</span><span id="line-1002"></span><span id="local-6989586621681822830"><span id="local-6989586621681822831"><span class="annot"><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-type">(|&gt;)</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621681822831"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681822831"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681822830"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681822830"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1003"></span><span id="local-6989586621681821832"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821832"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="%7C%3E"><span class="annot"><span class="annottext">|&gt; :: a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var hs-var">|&gt;</span></a></span></span><span> </span><span id="local-6989586621681821831"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681821831"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621681821831"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821832"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1004"></span><span>
</span><span id="line-1005"></span><span class="hs-comment">-- This function gets used each time we start printing a new block statement.</span><span>
</span><span id="line-1006"></span><span class="hs-comment">-- It decides what extra imports to introduce (returning the full new set), and</span><span>
</span><span id="line-1007"></span><span class="hs-comment">-- determines some pretty-printed lines that looks like</span><span>
</span><span id="line-1008"></span><span class="hs-comment">--    use A x</span><span>
</span><span id="line-1009"></span><span class="hs-comment">--    use B y</span><span>
</span><span id="line-1010"></span><span class="hs-comment">-- providing a `[Pretty SyntaxText] -&gt; Pretty SyntaxText` that prepends those</span><span>
</span><span id="line-1011"></span><span class="hs-comment">-- lines to the list of lines provided, and then concatenates them.</span><span>
</span><span id="line-1012"></span><span id="local-6989586621681823112"><span class="annot"><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-type">calcImports</span></a></span><span>
</span><span id="line-1013"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823112"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681823112"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1014"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span>
</span><span id="line-1015"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823112"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span>
</span><span id="line-1016"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Imports"><span class="hs-identifier hs-type">Imports</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1017"></span><span id="calcImports"><span class="annot"><span class="annottext">calcImports :: Imports
-&gt; Term3 v PrintAnnotation
-&gt; (Imports,
    [Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#calcImports"><span class="hs-identifier hs-var hs-var">calcImports</span></a></span></span><span> </span><span id="local-6989586621681821830"><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821830"><span class="hs-identifier hs-var">im</span></a></span></span><span> </span><span id="local-6989586621681821829"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821829"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821828"><span class="hs-identifier hs-var">im'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map Prefix (Set Text)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821827"><span class="hs-identifier hs-var">render</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Prefix (Set Text)
 -&gt; [Pretty (SyntaxText' Reference)]
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Map Prefix (Set Text)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int) -&gt; Map Prefix (Set Text)
</span><a href="#local-6989586621681821826"><span class="hs-identifier hs-var">getUses</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821825"><span class="hs-identifier hs-var">result</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1018"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1019"></span><span>    </span><span class="hs-comment">-- The guts of this function is a pipeline of transformations and filters, starting from the</span><span>
</span><span id="line-1020"></span><span>    </span><span class="hs-comment">-- PrintAnnotation we built up in printAnnotate.</span><span>
</span><span id="line-1021"></span><span>    </span><span class="hs-comment">-- In `result`, the Name matches Prefix ++ Suffix; and the Int is the number of usages in this scope.</span><span>
</span><span id="line-1022"></span><span>    </span><span class="hs-comment">-- `result` lists all the names we're going to import, and what Prefix we'll use for each.</span><span>
</span><span id="line-1023"></span><span>    </span><span class="annot"><a href="#local-6989586621681821825"><span class="hs-identifier hs-type">result</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1024"></span><span>    </span><span id="local-6989586621681821825"><span class="annot"><span class="annottext">result :: Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821825"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>    </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821824"><span class="hs-identifier hs-var">usages'</span></a></span><span>
</span><span id="line-1025"></span><span>             </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
-&gt; (Map Text (Map Prefix Int) -&gt; Map Text (Prefix, Int))
-&gt; Map Text (Prefix, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int) -&gt; Map Text (Prefix, Int)
</span><a href="#local-6989586621681821823"><span class="hs-identifier hs-var">uniqueness</span></a></span><span>
</span><span id="line-1026"></span><span>             </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
-&gt; (Map Text (Prefix, Int) -&gt; Map Text (Prefix, Int))
-&gt; Map Text (Prefix, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int) -&gt; Map Text (Prefix, Int)
</span><a href="#local-6989586621681821822"><span class="hs-identifier hs-var">enoughUsages</span></a></span><span>
</span><span id="line-1027"></span><span>             </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
-&gt; (Map Text (Prefix, Int) -&gt; Map (Name, Int) (Prefix, Text, Int))
-&gt; Map (Name, Int) (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int) -&gt; Map (Name, Int) (Prefix, Text, Int)
</span><a href="#local-6989586621681821821"><span class="hs-identifier hs-var">groupAndCountLength</span></a></span><span>
</span><span id="line-1028"></span><span>             </span><span class="annot"><span class="annottext">Map (Name, Int) (Prefix, Text, Int)
-&gt; (Map (Name, Int) (Prefix, Text, Int)
    -&gt; Map Name (Prefix, Text, Int))
-&gt; Map Name (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map (Name, Int) (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
forall k1 k2 v.
(Show k1, Show k2, Ord k1, Ord k2) =&gt;
Map (k1, k2) v -&gt; Map k1 v
</span><a href="#local-6989586621681821820"><span class="hs-identifier hs-var">longestPrefix</span></a></span><span>
</span><span id="line-1029"></span><span>             </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
-&gt; (Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int))
-&gt; Map Name (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821819"><span class="hs-identifier hs-var">avoidRepeatsAndClashes</span></a></span><span>
</span><span id="line-1030"></span><span>             </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
-&gt; (Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int))
-&gt; Map Name (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821818"><span class="hs-identifier hs-var">narrowestPossible</span></a></span><span>
</span><span id="line-1031"></span><span>    </span><span class="annot"><a href="#local-6989586621681821824"><span class="hs-identifier hs-type">usages'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1032"></span><span>    </span><span id="local-6989586621681821824"><span class="annot"><span class="annottext">usages' :: Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821824"><span class="hs-identifier hs-var hs-var">usages'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrintAnnotation -&gt; Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var hs-var">usages</span></a></span><span> </span><span class="annot"><span class="annottext">(PrintAnnotation -&gt; Map Text (Map Prefix Int))
-&gt; PrintAnnotation -&gt; Map Text (Map Prefix Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; PrintAnnotation
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">annotation</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821829"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1033"></span><span>    </span><span class="hs-comment">-- Keep only names P.S where there is no other Q with Q.S also used in this scope.</span><span>
</span><span id="line-1034"></span><span>    </span><span class="annot"><a href="#local-6989586621681821823"><span class="hs-identifier hs-type">uniqueness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1035"></span><span>    </span><span id="local-6989586621681821823"><span class="annot"><span class="annottext">uniqueness :: Map Text (Map Prefix Int) -&gt; Map Text (Prefix, Int)
</span><a href="#local-6989586621681821823"><span class="hs-identifier hs-var hs-var">uniqueness</span></a></span></span><span> </span><span id="local-6989586621681821817"><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821817"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
</span><a href="#local-6989586621681821817"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
-&gt; (Map Text (Map Prefix Int) -&gt; Map Text (Map Prefix Int))
-&gt; Map Text (Map Prefix Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Prefix Int -&gt; Bool)
-&gt; Map Text (Map Prefix Int) -&gt; Map Text (Map Prefix Int)
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821815"><span class="annot"><span class="annottext">Map Prefix Int
</span><a href="#local-6989586621681821815"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Prefix Int -&gt; Int
forall k a. Map k a -&gt; Int
</span><span class="hs-identifier hs-var">Map.size</span></span><span> </span><span class="annot"><span class="annottext">Map Prefix Int
</span><a href="#local-6989586621681821815"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-1036"></span><span>                     </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
-&gt; (Map Text (Map Prefix Int) -&gt; Map Text (Prefix, Int))
-&gt; Map Text (Prefix, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Prefix Int -&gt; (Prefix, Int))
-&gt; Map Text (Map Prefix Int) -&gt; Map Text (Prefix, Int)
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821812"><span class="annot"><span class="annottext">Map Prefix Int
</span><a href="#local-6989586621681821812"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Prefix, Int)] -&gt; (Prefix, Int)
forall a. [a] -&gt; a
</span><span class="hs-identifier hs-var">head</span></span><span> </span><span class="annot"><span class="annottext">([(Prefix, Int)] -&gt; (Prefix, Int))
-&gt; [(Prefix, Int)] -&gt; (Prefix, Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map Prefix Int -&gt; [(Prefix, Int)]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Prefix Int
</span><a href="#local-6989586621681821812"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1037"></span><span>    </span><span class="hs-comment">-- Keep only names where the number of usages in this scope</span><span>
</span><span id="line-1038"></span><span>    </span><span class="hs-comment">--   - is &gt; 1, or</span><span>
</span><span id="line-1039"></span><span>    </span><span class="hs-comment">--   - is 1, and S is an infix operator.</span><span>
</span><span id="line-1040"></span><span>    </span><span class="hs-comment">-- Also drop names with an empty prefix.</span><span>
</span><span id="line-1041"></span><span>    </span><span id="local-6989586621681821810"><span class="annot"><span class="annottext">lookupOrDie :: k -&gt; Map k a -&gt; a
</span><a href="#local-6989586621681821810"><span class="hs-identifier hs-var hs-var">lookupOrDie</span></a></span></span><span> </span><span id="local-6989586621681821809"><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621681821809"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681821808"><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821808"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; Maybe a -&gt; a
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">a
forall a. a
</span><a href="#local-6989586621681821807"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k -&gt; Map k a -&gt; Maybe a
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621681821809"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821808"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1042"></span><span>      </span><span id="local-6989586621681821807"><span class="annot"><span class="annottext">msg :: a
</span><a href="#local-6989586621681821807"><span class="hs-identifier hs-var hs-var">msg</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermPrinter.enoughUsages &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(k, Map k a) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k
</span><a href="#local-6989586621681821809"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Map k a
</span><a href="#local-6989586621681821808"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1043"></span><span>
</span><span id="line-1044"></span><span>    </span><span class="annot"><a href="#local-6989586621681821822"><span class="hs-identifier hs-type">enoughUsages</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1045"></span><span>    </span><span id="local-6989586621681821822"><span class="annot"><span class="annottext">enoughUsages :: Map Text (Prefix, Int) -&gt; Map Text (Prefix, Int)
</span><a href="#local-6989586621681821822"><span class="hs-identifier hs-var hs-var">enoughUsages</span></a></span></span><span> </span><span id="local-6989586621681821804"><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821804"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map Text (Prefix, Int) -&gt; Prefix
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821804"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; (Prefix -&gt; Prefix) -&gt; Prefix
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Bool) -&gt; Prefix -&gt; Prefix
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821802"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821802"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821801"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821801"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821800"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821800"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text (Prefix, Int) -&gt; (Prefix, Int)
forall k a. (Ord k, Show k, Show a) =&gt; k -&gt; Map k a -&gt; a
</span><a href="#local-6989586621681821810"><span class="hs-identifier hs-var">lookupOrDie</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821802"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821804"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1046"></span><span>                                                   </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821800"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Either Err (String, String) -&gt; Bool
forall a b. Either a b -&gt; Bool
</span><span class="hs-identifier hs-var">isRight</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Either Err (String, String)
</span><a href="Unison.Lexer.html#symbolyId"><span class="hs-identifier hs-var">symbolyId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821802"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1047"></span><span>                                                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821801"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1048"></span><span>                                  </span><span class="annot"><span class="annottext">Prefix
-&gt; (Prefix -&gt; [(Text, (Prefix, Int))]) -&gt; [(Text, (Prefix, Int))]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; (Text, (Prefix, Int)))
-&gt; Prefix -&gt; [(Text, (Prefix, Int))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821797"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821797"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821797"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text (Prefix, Int) -&gt; (Prefix, Int)
forall k a. (Ord k, Show k, Show a) =&gt; k -&gt; Map k a -&gt; a
</span><a href="#local-6989586621681821810"><span class="hs-identifier hs-var">lookupOrDie</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821797"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821804"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1049"></span><span>                                  </span><span class="annot"><span class="annottext">[(Text, (Prefix, Int))]
-&gt; ([(Text, (Prefix, Int))] -&gt; Map Text (Prefix, Int))
-&gt; Map Text (Prefix, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, (Prefix, Int))] -&gt; Map Text (Prefix, Int)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-1050"></span><span>    </span><span class="hs-comment">-- Group by `Prefix ++ Suffix`, and then by `length Prefix`</span><span>
</span><span id="line-1051"></span><span>    </span><span class="annot"><a href="#local-6989586621681821821"><span class="hs-identifier hs-type">groupAndCountLength</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1052"></span><span>    </span><span id="local-6989586621681821821"><span class="annot"><span class="annottext">groupAndCountLength :: Map Text (Prefix, Int) -&gt; Map (Name, Int) (Prefix, Text, Int)
</span><a href="#local-6989586621681821821"><span class="hs-identifier hs-var hs-var">groupAndCountLength</span></a></span></span><span> </span><span id="local-6989586621681821796"><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821796"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int) -&gt; [(Text, (Prefix, Int))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">Map Text (Prefix, Int)
</span><a href="#local-6989586621681821796"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[(Text, (Prefix, Int))]
-&gt; ([(Text, (Prefix, Int))]
    -&gt; [((Name, Int), (Prefix, Text, Int))])
-&gt; [((Name, Int), (Prefix, Text, Int))]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((Text, (Prefix, Int)) -&gt; ((Name, Int), (Prefix, Text, Int)))
-&gt; [(Text, (Prefix, Int))] -&gt; [((Name, Int), (Prefix, Text, Int))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681821795"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821795"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821794"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821794"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821793"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821793"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821792"><span class="annot"><span class="annottext">n :: Name
</span><a href="#local-6989586621681821792"><span class="hs-identifier hs-var hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Text -&gt; Name
</span><a href="Unison.TermPrinter.html#joinName"><span class="hs-identifier hs-var">joinName</span></a></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821794"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821795"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1053"></span><span>                                                                     </span><span id="local-6989586621681821791"><span class="annot"><span class="annottext">l :: Int
</span><a href="#local-6989586621681821791"><span class="hs-identifier hs-var hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821794"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1054"></span><span>                                                                 </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821792"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821791"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821794"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821795"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821793"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1055"></span><span>                                         </span><span class="annot"><span class="annottext">[((Name, Int), (Prefix, Text, Int))]
-&gt; ([((Name, Int), (Prefix, Text, Int))]
    -&gt; Map (Name, Int) (Prefix, Text, Int))
-&gt; Map (Name, Int) (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">[((Name, Int), (Prefix, Text, Int))]
-&gt; Map (Name, Int) (Prefix, Text, Int)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-1056"></span><span>    </span><span class="hs-comment">-- For each k1, choose the v with the largest k2.</span><span>
</span><span id="line-1057"></span><span>    </span><span id="local-6989586621681822827"><span id="local-6989586621681822828"><span id="local-6989586621681822829"><span class="annot"><a href="#local-6989586621681821820"><span class="hs-identifier hs-type">longestPrefix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621681822829"><span class="hs-identifier hs-type">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621681822828"><span class="hs-identifier hs-type">k2</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822829"><span class="hs-identifier hs-type">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822828"><span class="hs-identifier hs-type">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681822829"><span class="hs-identifier hs-type">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621681822828"><span class="hs-identifier hs-type">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621681822827"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="#local-6989586621681822829"><span class="hs-identifier hs-type">k1</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822827"><span class="hs-identifier hs-type">v</span></a></span></span></span></span><span>
</span><span id="line-1058"></span><span>    </span><span id="local-6989586621681821820"><span class="annot"><span class="annottext">longestPrefix :: Map (k1, k2) v -&gt; Map k1 v
</span><a href="#local-6989586621681821820"><span class="hs-identifier hs-var hs-var">longestPrefix</span></a></span></span><span> </span><span id="local-6989586621681821790"><span class="annot"><span class="annottext">Map (k1, k2) v
</span><a href="#local-6989586621681821790"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821789"><span class="annot"><span class="annottext">k1s :: Set k1
</span><a href="#local-6989586621681821789"><span class="hs-identifier hs-var hs-var">k1s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((k1, k2) -&gt; k1) -&gt; Set (k1, k2) -&gt; Set k1
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="annot"><span class="annottext">(k1, k2) -&gt; k1
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(Set (k1, k2) -&gt; Set k1) -&gt; Set (k1, k2) -&gt; Set k1
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Map (k1, k2) v -&gt; Set (k1, k2)
forall k a. Map k a -&gt; Set k
</span><span class="hs-identifier hs-var">Map.keysSet</span></span><span> </span><span class="annot"><span class="annottext">Map (k1, k2) v
</span><a href="#local-6989586621681821790"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1059"></span><span>                          </span><span id="local-6989586621681821786"><span class="annot"><span class="annottext">k2s :: Map k1 (Set k2)
</span><a href="#local-6989586621681821786"><span class="hs-identifier hs-var hs-var">k2s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set k1
</span><a href="#local-6989586621681821789"><span class="hs-identifier hs-var">k1s</span></a></span><span> </span><span class="annot"><span class="annottext">Set k1 -&gt; (Set k1 -&gt; Map k1 (Set k2)) -&gt; Map k1 (Set k2)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(k1 -&gt; Set k2) -&gt; Set k1 -&gt; Map k1 (Set k2)
forall k a. (k -&gt; a) -&gt; Set k -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromSet</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821784"><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821784"><span class="hs-identifier hs-var">k1'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map (k1, k2) v -&gt; Set (k1, k2)
forall k a. Map k a -&gt; Set k
</span><span class="hs-identifier hs-var">Map.keysSet</span></span><span> </span><span class="annot"><span class="annottext">Map (k1, k2) v
</span><a href="#local-6989586621681821790"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1060"></span><span>                                                              </span><span class="annot"><span class="annottext">Set (k1, k2) -&gt; (Set (k1, k2) -&gt; Set (k1, k2)) -&gt; Set (k1, k2)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((k1, k2) -&gt; Bool) -&gt; Set (k1, k2) -&gt; Set (k1, k2)
forall a. (a -&gt; Bool) -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681821782"><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821782"><span class="hs-identifier hs-var">k1</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">k2
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821782"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">k1 -&gt; k1 -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821784"><span class="hs-identifier hs-var">k1'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1061"></span><span>                                                              </span><span class="annot"><span class="annottext">Set (k1, k2) -&gt; (Set (k1, k2) -&gt; Set k2) -&gt; Set k2
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((k1, k2) -&gt; k2) -&gt; Set (k1, k2) -&gt; Set k2
forall b a. Ord b =&gt; (a -&gt; b) -&gt; Set a -&gt; Set b
</span><span class="hs-identifier hs-var">Set.map</span></span><span> </span><span class="annot"><span class="annottext">(k1, k2) -&gt; k2
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span>
</span><span id="line-1062"></span><span>                          </span><span id="local-6989586621681821781"><span class="annot"><span class="annottext">maxk2s :: Map k1 k2
</span><a href="#local-6989586621681821781"><span class="hs-identifier hs-var hs-var">maxk2s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Set k2 -&gt; k2) -&gt; Map k1 (Set k2) -&gt; Map k1 k2
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="annot"><span class="annottext">Set k2 -&gt; k2
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">maximum</span></span><span> </span><span class="annot"><span class="annottext">Map k1 (Set k2)
</span><a href="#local-6989586621681821786"><span class="hs-identifier hs-var">k2s</span></a></span><span>
</span><span id="line-1063"></span><span>                          </span><span id="local-6989586621681821779"><span class="annot"><span class="annottext">err :: a -&gt; b -&gt; a
</span><a href="#local-6989586621681821779"><span class="hs-identifier hs-var hs-var">err</span></a></span></span><span> </span><span id="local-6989586621681821778"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821778"><span class="hs-identifier hs-var">k1</span></a></span></span><span> </span><span id="local-6989586621681821777"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821777"><span class="hs-identifier hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; a
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; a) -&gt; String -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1064"></span><span>                            </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;TermPrinter.longestPrefix not found &quot;</span></span><span>
</span><span id="line-1065"></span><span>                            </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(a, b) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821778"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821777"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1066"></span><span>                            </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; in &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map k1 k2 -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Map k1 k2
</span><a href="#local-6989586621681821781"><span class="hs-identifier hs-var">maxk2s</span></a></span><span>
</span><span id="line-1067"></span><span>                      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(k1 -&gt; k2 -&gt; v) -&gt; Map k1 k2 -&gt; Map k1 v
forall k a b. (k -&gt; a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.mapWithKey</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821775"><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821775"><span class="hs-identifier hs-var">k1</span></a></span></span><span> </span><span id="local-6989586621681821774"><span class="annot"><span class="annottext">k2
</span><a href="#local-6989586621681821774"><span class="hs-identifier hs-var">k2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">v -&gt; Maybe v -&gt; v
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k1 -&gt; k2 -&gt; v
forall a b a. (Show a, Show b) =&gt; a -&gt; b -&gt; a
</span><a href="#local-6989586621681821779"><span class="hs-identifier hs-var">err</span></a></span><span> </span><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821775"><span class="hs-identifier hs-var">k1</span></a></span><span> </span><span class="annot"><span class="annottext">k2
</span><a href="#local-6989586621681821774"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe v -&gt; v) -&gt; Maybe v -&gt; v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(k1, k2) -&gt; Map (k1, k2) v -&gt; Maybe v
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">k1
</span><a href="#local-6989586621681821775"><span class="hs-identifier hs-var">k1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">k2
</span><a href="#local-6989586621681821774"><span class="hs-identifier hs-var">k2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map (k1, k2) v
</span><a href="#local-6989586621681821790"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map k1 k2
</span><a href="#local-6989586621681821781"><span class="hs-identifier hs-var">maxk2s</span></a></span><span>
</span><span id="line-1068"></span><span>    </span><span class="hs-comment">-- Don't do another `use` for a name for which we've already done one, unless the</span><span>
</span><span id="line-1069"></span><span>    </span><span class="hs-comment">-- new suffix is shorter.</span><span>
</span><span id="line-1070"></span><span>    </span><span class="annot"><a href="#local-6989586621681821819"><span class="hs-identifier hs-type">avoidRepeatsAndClashes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1071"></span><span>    </span><span id="local-6989586621681821819"><span class="annot"><span class="annottext">avoidRepeatsAndClashes :: Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821819"><span class="hs-identifier hs-var hs-var">avoidRepeatsAndClashes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; (Prefix, Text, Int) -&gt; Bool)
-&gt; Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
forall k a. (k -&gt; a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filterWithKey</span></span><span> </span><span class="annot"><span class="annottext">((Name -&gt; (Prefix, Text, Int) -&gt; Bool)
 -&gt; Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int))
-&gt; (Name -&gt; (Prefix, Text, Int) -&gt; Bool)
-&gt; Map Name (Prefix, Text, Int)
-&gt; Map Name (Prefix, Text, Int)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1072"></span><span>                               </span><span class="hs-glyph">\</span><span id="local-6989586621681821772"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821772"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821771"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821771"><span class="hs-identifier hs-var">s'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Imports -&gt; Maybe Text
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821772"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821830"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1073"></span><span>                                 </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821770"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821770"><span class="hs-identifier hs-var">s</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">Text.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821771"><span class="hs-identifier hs-var">s'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Int
</span><span class="hs-identifier hs-var">Text.length</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821770"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1074"></span><span>                                 </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-comment">-- Is there a strictly smaller block term underneath this one, containing all the usages</span><span>
</span><span id="line-1076"></span><span>    </span><span class="hs-comment">-- of some of the names?  Skip emitting `use` statements for those, so we can do it</span><span>
</span><span id="line-1077"></span><span>    </span><span class="hs-comment">-- further down, closer to the use sites.</span><span>
</span><span id="line-1078"></span><span>    </span><span class="annot"><a href="#local-6989586621681821818"><span class="hs-identifier hs-type">narrowestPossible</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>    </span><span id="local-6989586621681821818"><span class="annot"><span class="annottext">narrowestPossible :: Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821818"><span class="hs-identifier hs-var hs-var">narrowestPossible</span></a></span></span><span> </span><span id="local-6989586621681821768"><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821768"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821768"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
-&gt; (Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int))
-&gt; Map Name (Prefix, Text, Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((Prefix, Text, Int) -&gt; Bool)
-&gt; Map Name (Prefix, Text, Int) -&gt; Map Name (Prefix, Text, Int)
forall a k. (a -&gt; Bool) -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681821767"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821767"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821766"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821766"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821765"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821765"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Prefix -&gt; Text -&gt; Int -&gt; Bool
forall v.
(Var v, Ord v) =&gt;
Term3 v PrintAnnotation -&gt; Prefix -&gt; Text -&gt; Int -&gt; Bool
</span><a href="Unison.TermPrinter.html#allInSubBlock"><span class="hs-identifier hs-var">allInSubBlock</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821829"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821767"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821766"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821765"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1080"></span><span>    </span><span class="hs-comment">-- `union` is left-biased, so this can replace existing imports.</span><span>
</span><span id="line-1081"></span><span>    </span><span id="local-6989586621681821828"><span class="annot"><span class="annottext">im' :: Imports
</span><a href="#local-6989586621681821828"><span class="hs-identifier hs-var hs-var">im'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int) -&gt; Imports
</span><a href="#local-6989586621681821762"><span class="hs-identifier hs-var">getImportMapAdditions</span></a></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821825"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">Imports -&gt; Imports -&gt; Imports
forall k a. Ord k =&gt; Map k a -&gt; Map k a -&gt; Map k a
</span><span class="hs-operator hs-var">`Map.union`</span></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821830"><span class="hs-identifier hs-var">im</span></a></span><span>
</span><span id="line-1082"></span><span>    </span><span class="annot"><a href="#local-6989586621681821762"><span class="hs-identifier hs-type">getImportMapAdditions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span>
</span><span id="line-1083"></span><span>    </span><span id="local-6989586621681821762"><span class="annot"><span class="annottext">getImportMapAdditions :: Map Name (Prefix, Text, Int) -&gt; Imports
</span><a href="#local-6989586621681821762"><span class="hs-identifier hs-var hs-var">getImportMapAdditions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Prefix, Text, Int) -&gt; Text)
-&gt; Map Name (Prefix, Text, Int) -&gt; Imports
forall a b k. (a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821760"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821760"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821760"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1084"></span><span>    </span><span class="annot"><a href="#local-6989586621681821826"><span class="hs-identifier hs-type">getUses</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Name</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1085"></span><span>    </span><span id="local-6989586621681821826"><span class="annot"><span class="annottext">getUses :: Map Name (Prefix, Text, Int) -&gt; Map Prefix (Set Text)
</span><a href="#local-6989586621681821826"><span class="hs-identifier hs-var hs-var">getUses</span></a></span></span><span> </span><span id="local-6989586621681821759"><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821759"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int) -&gt; [(Prefix, Text, Int)]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map Name (Prefix, Text, Int)
</span><a href="#local-6989586621681821759"><span class="hs-identifier hs-var">m</span></a></span><span> </span><span class="annot"><span class="annottext">[(Prefix, Text, Int)]
-&gt; ([(Prefix, Text, Int)] -&gt; [(Prefix, Set Text)])
-&gt; [(Prefix, Set Text)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((Prefix, Text, Int) -&gt; (Prefix, Set Text))
-&gt; [(Prefix, Text, Int)] -&gt; [(Prefix, Set Text)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621681821757"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821757"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821756"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821756"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821757"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Set Text
forall a. a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.singleton</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821756"><span class="hs-identifier hs-var">s</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1086"></span><span>                            </span><span class="annot"><span class="annottext">[(Prefix, Set Text)]
-&gt; ([(Prefix, Set Text)] -&gt; Map Prefix (Set Text))
-&gt; Map Prefix (Set Text)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Set Text -&gt; Set Text -&gt; Set Text)
-&gt; [(Prefix, Set Text)] -&gt; Map Prefix (Set Text)
forall k a. Ord k =&gt; (a -&gt; a -&gt; a) -&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromListWith</span></span><span> </span><span class="annot"><span class="annottext">Set Text -&gt; Set Text -&gt; Set Text
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.union</span></span><span>
</span><span id="line-1087"></span><span>    </span><span class="annot"><a href="#local-6989586621681821827"><span class="hs-identifier hs-type">render</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-1088"></span><span>    </span><span id="local-6989586621681821827"><span class="annot"><span class="annottext">render :: Map Prefix (Set Text)
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821827"><span class="hs-identifier hs-var hs-var">render</span></a></span></span><span> </span><span id="local-6989586621681821752"><span class="annot"><span class="annottext">Map Prefix (Set Text)
</span><a href="#local-6989586621681821752"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span id="local-6989586621681821751"><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681821751"><span class="hs-identifier hs-var">rest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1089"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821750"><span class="annot"><span class="annottext">uses :: [Pretty (SyntaxText' r)]
</span><a href="#local-6989586621681821750"><span class="hs-identifier hs-var hs-var">uses</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Prefix -&gt; Set Text -&gt; Pretty (SyntaxText' r))
-&gt; Map Prefix (Set Text) -&gt; Map Prefix (Pretty (SyntaxText' r))
forall k a b. (k -&gt; a -&gt; b) -&gt; Map k a -&gt; Map k b
</span><span class="hs-identifier hs-var">Map.mapWithKey</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821749"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821749"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681821748"><span class="annot"><span class="annottext">Set Text
</span><a href="#local-6989586621681821748"><span class="hs-identifier hs-var">ss</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#UseKeyword"><span class="hs-identifier hs-var">S.UseKeyword</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r))
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;use &quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-1090"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#UsePrefix"><span class="hs-identifier hs-var">S.UsePrefix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; (Text -&gt; Pretty (SyntaxText' r))
-&gt; Prefix
-&gt; Pretty (SyntaxText' r)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' r))
-&gt; (Text -&gt; String) -&gt; Text -&gt; Pretty (SyntaxText' r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">unpack</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821749"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span>
</span><span id="line-1091"></span><span>                     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#UseSuffix"><span class="hs-identifier hs-var">S.UseSuffix</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; (Text -&gt; Pretty (SyntaxText' r))
-&gt; Prefix
-&gt; Pretty (SyntaxText' r)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' r)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.TermPrinter.html#l"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Pretty (SyntaxText' r))
-&gt; (Text -&gt; String) -&gt; Text -&gt; Pretty (SyntaxText' r)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">unpack</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set Text -&gt; Prefix
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set Text
</span><a href="#local-6989586621681821748"><span class="hs-identifier hs-var">ss</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Map Prefix (Set Text)
</span><a href="#local-6989586621681821752"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-1092"></span><span>                   </span><span class="annot"><span class="annottext">Map Prefix (Pretty (SyntaxText' r))
-&gt; (Map Prefix (Pretty (SyntaxText' r))
    -&gt; [(Prefix, Pretty (SyntaxText' r))])
-&gt; [(Prefix, Pretty (SyntaxText' r))]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Map Prefix (Pretty (SyntaxText' r))
-&gt; [(Prefix, Pretty (SyntaxText' r))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-1093"></span><span>                   </span><span class="annot"><span class="annottext">[(Prefix, Pretty (SyntaxText' r))]
-&gt; ([(Prefix, Pretty (SyntaxText' r))] -&gt; [Pretty (SyntaxText' r)])
-&gt; [Pretty (SyntaxText' r)]
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">((Prefix, Pretty (SyntaxText' r)) -&gt; Pretty (SyntaxText' r))
-&gt; [(Prefix, Pretty (SyntaxText' r))] -&gt; [Pretty (SyntaxText' r)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Prefix, Pretty (SyntaxText' r)) -&gt; Pretty (SyntaxText' r)
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span>
</span><span id="line-1094"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
forall r. [Pretty (SyntaxText' r)]
</span><a href="#local-6989586621681821750"><span class="hs-identifier hs-var">uses</span></a></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
-&gt; [Pretty (SyntaxText' Reference)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)]
</span><a href="#local-6989586621681821751"><span class="hs-identifier hs-var">rest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1095"></span><span>
</span><span id="line-1096"></span><span class="hs-comment">-- Given a block term and a name (Prefix, Suffix) of interest, is there a strictly smaller</span><span>
</span><span id="line-1097"></span><span class="hs-comment">-- blockterm within it, containing all usages of that name?  A blockterm is a place</span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- where the syntax lets us put a use statement, like the branches of an if/then/else.</span><span>
</span><span id="line-1099"></span><span class="hs-comment">-- We traverse the block terms by traversing the whole subtree with ABT.find, and paying</span><span>
</span><span id="line-1100"></span><span class="hs-comment">-- attention to those subterms that look like a blockterm.  This is complicated</span><span>
</span><span id="line-1101"></span><span class="hs-comment">-- by the fact that you can't always tell if a term is a blockterm just</span><span>
</span><span id="line-1102"></span><span class="hs-comment">-- by looking at it: in some cases you can only tell when you can see it in the context of</span><span>
</span><span id="line-1103"></span><span class="hs-comment">-- the wider term that contains it.  So actually we traverse the tree, at each term</span><span>
</span><span id="line-1104"></span><span class="hs-comment">-- looking for child terms that are block terms, and see if any of those contain</span><span>
</span><span id="line-1105"></span><span class="hs-comment">-- all the usages of the name.</span><span>
</span><span id="line-1106"></span><span class="hs-comment">-- Cut out the occurrences of &quot;const id $&quot; to get tracing.</span><span>
</span><span id="line-1107"></span><span id="local-6989586621681822786"><span class="annot"><a href="Unison.TermPrinter.html#allInSubBlock"><span class="hs-identifier hs-type">allInSubBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822786"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822786"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822786"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Prefix"><span class="hs-identifier hs-type">Prefix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.FQN.html#Suffix"><span class="hs-identifier hs-type">Suffix</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-1108"></span><span id="allInSubBlock"><span class="annot"><span class="annottext">allInSubBlock :: Term3 v PrintAnnotation -&gt; Prefix -&gt; Text -&gt; Int -&gt; Bool
</span><a href="Unison.TermPrinter.html#allInSubBlock"><span class="hs-identifier hs-var hs-var">allInSubBlock</span></a></span></span><span> </span><span id="local-6989586621681821743"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821743"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span id="local-6989586621681821742"><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821742"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681821741"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821741"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span id="local-6989586621681821740"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821740"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821739"><span class="annot"><span class="annottext">found :: [Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821739"><span class="hs-identifier hs-var hs-var">found</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[[Term3 v PrintAnnotation]] -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[Term3 v PrintAnnotation]] -&gt; [Term3 v PrintAnnotation])
-&gt; [[Term3 v PrintAnnotation]] -&gt; [Term3 v PrintAnnotation]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; FindAction [Term3 v PrintAnnotation])
-&gt; Term3 v PrintAnnotation -&gt; [[Term3 v PrintAnnotation]]
forall v (f :: * -&gt; *) a x.
(Ord v, Foldable f, Functor f) =&gt;
(Term f v a -&gt; FindAction x) -&gt; Term f v a -&gt; [x]
</span><span class="hs-identifier hs-var">ABT.find</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; FindAction [Term3 v PrintAnnotation]
forall vt v at ap.
(Var vt, Var v) =&gt;
Term (F vt at ap) v PrintAnnotation
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821736"><span class="hs-identifier hs-var">finder</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821743"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1109"></span><span>                             </span><span id="local-6989586621681821735"><span class="annot"><span class="annottext">result :: Bool
</span><a href="#local-6989586621681821735"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Bool)
-&gt; [Term3 v PrintAnnotation] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Term3 v PrintAnnotation -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821743"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Term3 v PrintAnnotation] -&gt; Bool)
-&gt; [Term3 v PrintAnnotation] -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821739"><span class="hs-identifier hs-var">found</span></a></span><span>
</span><span id="line-1110"></span><span>                             </span><span id="local-6989586621681821733"><span class="annot"><span class="annottext">tr :: a -&gt; a
</span><a href="#local-6989586621681821733"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; (Any -&gt; Any) -&gt; a -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">((Any -&gt; Any) -&gt; a -&gt; a) -&gt; (Any -&gt; Any) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Any -&gt; Any
forall a. String -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">trace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nallInSubBlock(&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Prefix -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821742"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1111"></span><span>                                                    </span><span class="annot"><span class="annottext">Text -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821741"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821740"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;): returns &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1112"></span><span>                                                    </span><span class="annot"><span class="annottext">Bool -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681821735"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nInput:\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821743"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1113"></span><span>                                                    </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nFound: \n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821739"><span class="hs-identifier hs-var">found</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1114"></span><span>                         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
forall a. a -&gt; a
</span><a href="#local-6989586621681821733"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681821735"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1115"></span><span>  </span><span id="local-6989586621681821732"><span class="annot"><span class="annottext">getUsages :: Term f v PrintAnnotation -&gt; Int
</span><a href="#local-6989586621681821732"><span class="hs-identifier hs-var hs-var">getUsages</span></a></span></span><span> </span><span id="local-6989586621681821731"><span class="annot"><span class="annottext">Term f v PrintAnnotation
</span><a href="#local-6989586621681821731"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>    </span><span class="annot"><span class="annottext">Term f v PrintAnnotation -&gt; PrintAnnotation
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">annotation</span></span><span> </span><span class="annot"><span class="annottext">Term f v PrintAnnotation
</span><a href="#local-6989586621681821731"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1116"></span><span>                </span><span class="annot"><span class="annottext">PrintAnnotation
-&gt; (PrintAnnotation -&gt; Map Text (Map Prefix Int))
-&gt; Map Text (Map Prefix Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">PrintAnnotation -&gt; Map Text (Map Prefix Int)
</span><a href="Unison.TermPrinter.html#usages"><span class="hs-identifier hs-var hs-var">usages</span></a></span><span>
</span><span id="line-1117"></span><span>                </span><span class="annot"><span class="annottext">Map Text (Map Prefix Int)
-&gt; (Map Text (Map Prefix Int) -&gt; Maybe (Map Prefix Int))
-&gt; Maybe (Map Prefix Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Map Text (Map Prefix Int) -&gt; Maybe (Map Prefix Int)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821741"><span class="hs-identifier hs-var">s</span></a></span><span>
</span><span id="line-1118"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Map Prefix Int)
-&gt; (Maybe (Map Prefix Int) -&gt; Maybe (Maybe Int))
-&gt; Maybe (Maybe Int)
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(Map Prefix Int -&gt; Maybe Int)
-&gt; Maybe (Map Prefix Int) -&gt; Maybe (Maybe Int)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Prefix -&gt; Map Prefix Int -&gt; Maybe Int
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Map.lookup</span></span><span> </span><span class="annot"><span class="annottext">Prefix
</span><a href="#local-6989586621681821742"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1119"></span><span>                </span><span class="annot"><span class="annottext">Maybe (Maybe Int) -&gt; (Maybe (Maybe Int) -&gt; Maybe Int) -&gt; Maybe Int
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Maybe Int) -&gt; Maybe Int
forall (m :: * -&gt; *) a. Monad m =&gt; m (m a) -&gt; m a
</span><span class="hs-identifier hs-var">join</span></span><span>
</span><span id="line-1120"></span><span>                </span><span class="annot"><span class="annottext">Maybe Int -&gt; (Maybe Int -&gt; Int) -&gt; Int
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><a href="Unison.TermPrinter.html#%7C%3E"><span class="hs-operator hs-var">|&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Maybe Int -&gt; Int
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-1121"></span><span>  </span><span id="local-6989586621681821736"><span class="annot"><span class="annottext">finder :: Term (F vt at ap) v PrintAnnotation
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821736"><span class="hs-identifier hs-var hs-var">finder</span></a></span></span><span> </span><span id="local-6989586621681821730"><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821730"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821729"><span class="annot"><span class="annottext">result :: FindAction [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821729"><span class="hs-identifier hs-var hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821728"><span class="annot"><span class="annottext">i' :: Int
</span><a href="#local-6989586621681821728"><span class="hs-identifier hs-var hs-var">i'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation -&gt; Int
forall (f :: * -&gt; *) v. Term f v PrintAnnotation -&gt; Int
</span><a href="#local-6989586621681821732"><span class="hs-identifier hs-var">getUsages</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821730"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1122"></span><span>                          </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821728"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821740"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1123"></span><span>                             </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation]
forall x. FindAction x
</span><span class="hs-identifier hs-var">ABT.Prune</span></span><span>
</span><span id="line-1124"></span><span>                             </span><span class="hs-keyword">else</span><span>
</span><span id="line-1125"></span><span>                               </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821726"><span class="annot"><span class="annottext">found :: [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821726"><span class="hs-identifier hs-var hs-var">found</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term (F vt at ap) v PrintAnnotation -&gt; Bool)
-&gt; [Term (F vt at ap) v PrintAnnotation]
-&gt; [Term (F vt at ap) v PrintAnnotation]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation -&gt; Bool
forall (f :: * -&gt; *) v. Term f v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681821725"><span class="hs-identifier hs-var">hit</span></a></span><span> </span><span class="annot"><span class="annottext">([Term (F vt at ap) v PrintAnnotation]
 -&gt; [Term (F vt at ap) v PrintAnnotation])
-&gt; [Term (F vt at ap) v PrintAnnotation]
-&gt; [Term (F vt at ap) v PrintAnnotation]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
-&gt; [Term (F vt at ap) v PrintAnnotation]
forall vt v at ap a.
(Var vt, Var v) =&gt;
Term2 vt at ap v a -&gt; [Term2 vt at ap v a]
</span><a href="Unison.TermPrinter.html#immediateChildBlockTerms"><span class="hs-identifier hs-var">immediateChildBlockTerms</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821730"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1126"></span><span>                               </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821728"><span class="hs-identifier hs-var">i'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821740"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool) -&gt; Bool -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Term (F vt at ap) v PrintAnnotation] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821726"><span class="hs-identifier hs-var">found</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span>                                  </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">[Term (F vt at ap) v PrintAnnotation]
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
forall x. x -&gt; FindAction x
</span><span class="hs-identifier hs-var">ABT.Found</span></span><span> </span><span class="annot"><span class="annottext">[Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821726"><span class="hs-identifier hs-var">found</span></a></span><span>
</span><span id="line-1128"></span><span>                                  </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation]
forall x. FindAction x
</span><span class="hs-identifier hs-var">ABT.Continue</span></span><span>
</span><span id="line-1129"></span><span>                 </span><span id="local-6989586621681821721"><span class="annot"><span class="annottext">children :: String
</span><a href="#local-6989586621681821721"><span class="hs-identifier hs-var hs-var">children</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Term (F vt at ap) v PrintAnnotation -&gt; String)
-&gt; [Term (F vt at ap) v PrintAnnotation] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821720"><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821720"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;child: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821720"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([Term (F vt at ap) v PrintAnnotation] -&gt; [String])
-&gt; [Term (F vt at ap) v PrintAnnotation] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
-&gt; [Term (F vt at ap) v PrintAnnotation]
forall vt v at ap a.
(Var vt, Var v) =&gt;
Term2 vt at ap v a -&gt; [Term2 vt at ap v a]
</span><a href="Unison.TermPrinter.html#immediateChildBlockTerms"><span class="hs-identifier hs-var">immediateChildBlockTerms</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821730"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>                 </span><span id="local-6989586621681821719"><span class="annot"><span class="annottext">tr :: a -&gt; a
</span><a href="#local-6989586621681821719"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(a -&gt; a) -&gt; (Any -&gt; Any) -&gt; a -&gt; a
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span> </span><span class="annot"><span class="annottext">((Any -&gt; Any) -&gt; a -&gt; a) -&gt; (Any -&gt; Any) -&gt; a -&gt; a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Any -&gt; Any
forall a. String -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">trace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\nfinder: returns &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation] -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821729"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1131"></span><span>                                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n  children:&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821721"><span class="hs-identifier hs-var">children</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span>
</span><span id="line-1132"></span><span>                                        </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n  input: \n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v PrintAnnotation
</span><a href="#local-6989586621681821730"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1133"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation]
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
forall a. a -&gt; a
</span><a href="#local-6989586621681821719"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">(FindAction [Term (F vt at ap) v PrintAnnotation]
 -&gt; FindAction [Term (F vt at ap) v PrintAnnotation])
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
-&gt; FindAction [Term (F vt at ap) v PrintAnnotation]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FindAction [Term (F vt at ap) v PrintAnnotation]
</span><a href="#local-6989586621681821729"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-1134"></span><span>  </span><span id="local-6989586621681821725"><span class="annot"><span class="annottext">hit :: Term f v PrintAnnotation -&gt; Bool
</span><a href="#local-6989586621681821725"><span class="hs-identifier hs-var hs-var">hit</span></a></span></span><span> </span><span id="local-6989586621681821718"><span class="annot"><span class="annottext">Term f v PrintAnnotation
</span><a href="#local-6989586621681821718"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term f v PrintAnnotation -&gt; Int
forall (f :: * -&gt; *) v. Term f v PrintAnnotation -&gt; Int
</span><a href="#local-6989586621681821732"><span class="hs-identifier hs-var">getUsages</span></a></span><span> </span><span class="annot"><span class="annottext">Term f v PrintAnnotation
</span><a href="#local-6989586621681821718"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821740"><span class="hs-identifier hs-var">i</span></a></span><span>
</span><span id="line-1135"></span><span>
</span><span id="line-1136"></span><span class="hs-comment">-- Return any blockterms at or immediately under this term.  Has to match the places in the</span><span>
</span><span id="line-1137"></span><span class="hs-comment">-- syntax that get a call to `calcImports` in `pretty0`.  AST nodes that do a calcImports in</span><span>
</span><span id="line-1138"></span><span class="hs-comment">-- pretty0, in order to try and emit a `use` statement, need to be emitted also by this</span><span>
</span><span id="line-1139"></span><span class="hs-comment">-- function, otherwise the `use` statement may come out at an enclosing scope instead.</span><span>
</span><span id="line-1140"></span><span id="local-6989586621681822752"><span id="local-6989586621681822753"><span id="local-6989586621681822754"><span id="local-6989586621681822755"><span id="local-6989586621681822756"><span class="annot"><a href="Unison.TermPrinter.html#immediateChildBlockTerms"><span class="hs-identifier hs-type">immediateChildBlockTerms</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822756"><span class="hs-identifier hs-type">vt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681822755"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822756"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822754"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822753"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822755"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822752"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681822756"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822754"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822753"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822755"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681822752"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span></span></span></span></span></span><span>
</span><span id="line-1141"></span><span id="immediateChildBlockTerms"><span class="annot"><span class="annottext">immediateChildBlockTerms :: Term2 vt at ap v a -&gt; [Term2 vt at ap v a]
</span><a href="Unison.TermPrinter.html#immediateChildBlockTerms"><span class="hs-identifier hs-var hs-var">immediateChildBlockTerms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1142"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Handle'</span></span><span> </span><span id="local-6989586621681821717"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821717"><span class="hs-identifier hs-var">handler</span></a></span></span><span> </span><span id="local-6989586621681821716"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821716"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821717"><span class="hs-identifier hs-var">handler</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821716"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1143"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">If'</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821715"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821715"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621681821714"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821714"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821715"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821714"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1144"></span><span>    </span><span class="annot"><a href="Unison.TermPrinter.html#LetBlock"><span class="hs-identifier hs-type">LetBlock</span></a></span><span> </span><span id="local-6989586621681821713"><span class="annot"><span class="annottext">[(v, Term2 vt at ap v a)]
</span><a href="#local-6989586621681821713"><span class="hs-identifier hs-var">bs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a])
-&gt; [[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">((v, Term2 vt at ap v a) -&gt; [Term2 vt at ap v a])
-&gt; [(v, Term2 vt at ap v a)] -&gt; [[Term2 vt at ap v a]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(v, Term2 vt at ap v a) -&gt; [Term2 vt at ap v a]
forall v vt v at ap a.
(Var v, Show vt, Show v) =&gt;
(v, Term (F vt at ap) v a) -&gt; [Term (F vt at ap) v a]
</span><a href="#local-6989586621681821712"><span class="hs-identifier hs-var">doLet</span></a></span><span> </span><span class="annot"><span class="annottext">[(v, Term2 vt at ap v a)]
</span><a href="#local-6989586621681821713"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1145"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span id="local-6989586621681821711"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821711"><span class="hs-identifier hs-var">scrute</span></a></span></span><span> </span><span id="local-6989586621681821710"><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821710"><span class="hs-identifier hs-var">branches</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1146"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a -&gt; [MatchCase ap (Term2 vt at ap v a)] -&gt; Bool
forall v (f :: * -&gt; *) a loc.
Ord v =&gt;
Term f v a -&gt; [MatchCase loc (Term f v a)] -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDestructuringBind"><span class="hs-identifier hs-var">isDestructuringBind</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821711"><span class="hs-identifier hs-var">scrute</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821710"><span class="hs-identifier hs-var">branches</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821711"><span class="hs-identifier hs-var">scrute</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1147"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">[[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t [a] -&gt; [a]
</span><span class="hs-identifier hs-var">concat</span></span><span> </span><span class="annot"><span class="annottext">([[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a])
-&gt; [[Term2 vt at ap v a]] -&gt; [Term2 vt at ap v a]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(MatchCase ap (Term2 vt at ap v a) -&gt; [Term2 vt at ap v a])
-&gt; [MatchCase ap (Term2 vt at ap v a)] -&gt; [[Term2 vt at ap v a]]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">MatchCase ap (Term2 vt at ap v a) -&gt; [Term2 vt at ap v a]
forall loc (f :: * -&gt; *) v a.
MatchCase loc (Term f v a) -&gt; [Term f v a]
</span><a href="#local-6989586621681821709"><span class="hs-identifier hs-var">doCase</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821710"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-1148"></span><span>    </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1149"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1150"></span><span>    </span><span id="local-6989586621681821709"><span class="annot"><span class="annottext">doCase :: MatchCase loc (Term f v a) -&gt; [Term f v a]
</span><a href="#local-6989586621681821709"><span class="hs-identifier hs-var hs-var">doCase</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term f v a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">AbsN'</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821708"><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681821708"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681821708"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1151"></span><span>    </span><span id="local-6989586621681821712"><span class="annot"><span class="annottext">doLet :: (v, Term (F vt at ap) v a) -&gt; [Term (F vt at ap) v a]
</span><a href="#local-6989586621681821712"><span class="hs-identifier hs-var hs-var">doLet</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821707"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821707"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ann'</span></span><span> </span><span id="local-6989586621681821706"><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821706"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="annot"><span class="annottext">Type vt at
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v, Term (F vt at ap) v a) -&gt; [Term (F vt at ap) v a]
</span><a href="#local-6989586621681821712"><span class="hs-identifier hs-var">doLet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821707"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821706"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1152"></span><span>    </span><span class="annot"><a href="#local-6989586621681821712"><span class="hs-identifier hs-var">doLet</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821705"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821705"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LamsNamedOpt'</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821703"><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821703"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlank"><span class="hs-identifier hs-var">isBlank</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; String -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; String
forall v. Var v =&gt; v -&gt; String
</span><span class="hs-identifier hs-var">Var.nameStr</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821705"><span class="hs-identifier hs-var">v</span></a></span><span>
</span><span id="line-1153"></span><span>                                      </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1154"></span><span>                                      </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><a href="#local-6989586621681821703"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-1155"></span><span>    </span><span class="annot"><a href="#local-6989586621681821712"><span class="hs-identifier hs-var">doLet</span></a></span><span> </span><span id="local-6989586621681821702"><span class="annot"><span class="annottext">(v, Term (F vt at ap) v a)
</span><a href="#local-6989586621681821702"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; [Any] -&gt; [Term (F vt at ap) v a]
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(v, Term (F vt at ap) v a) -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">(v, Term (F vt at ap) v a)
</span><a href="#local-6989586621681821702"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1156"></span><span>
</span><span id="line-1157"></span><span class="hs-comment">-- Matches with a single case, no variable shadowing, and where the pattern</span><span>
</span><span id="line-1158"></span><span class="hs-comment">-- has no literals are treated as destructuring bind, for instance:</span><span>
</span><span id="line-1159"></span><span class="hs-comment">--   match blah with (x,y) -&gt; body</span><span>
</span><span id="line-1160"></span><span class="hs-comment">-- BECOMES</span><span>
</span><span id="line-1161"></span><span class="hs-comment">--   (x,y) = blah</span><span>
</span><span id="line-1162"></span><span class="hs-comment">--   body</span><span>
</span><span id="line-1163"></span><span class="hs-comment">-- BUT</span><span>
</span><span id="line-1164"></span><span class="hs-comment">--   match (y,x) with (x,y) -&gt; body</span><span>
</span><span id="line-1165"></span><span class="hs-comment">-- Has shadowing, is rendered as a regular `match`.</span><span>
</span><span id="line-1166"></span><span class="hs-comment">--   match blah with 42 -&gt; body</span><span>
</span><span id="line-1167"></span><span class="hs-comment">-- Pattern has (is) a literal, rendered as a regular match (rather than `42 = blah; body`)</span><span>
</span><span id="line-1168"></span><span id="local-6989586621681823093"><span id="local-6989586621681823095"><span id="local-6989586621681823096"><span id="local-6989586621681823097"><span class="annot"><a href="Unison.TermPrinter.html#isDestructuringBind"><span class="hs-identifier hs-type">isDestructuringBind</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681823097"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ABT.Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681823096"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823097"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823095"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="annot"><a href="#local-6989586621681823093"><span class="hs-identifier hs-type">loc</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ABT.Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681823096"><span class="hs-identifier hs-type">f</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823097"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823095"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span></span></span><span>
</span><span id="line-1169"></span><span id="isDestructuringBind"><span class="annot"><span class="annottext">isDestructuringBind :: Term f v a -&gt; [MatchCase loc (Term f v a)] -&gt; Bool
</span><a href="Unison.TermPrinter.html#isDestructuringBind"><span class="hs-identifier hs-var hs-var">isDestructuringBind</span></a></span></span><span> </span><span id="local-6989586621681821701"><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681821701"><span class="hs-identifier hs-var">scrutinee</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span id="local-6989586621681821700"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821700"><span class="hs-identifier hs-var">pat</span></a></span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term f v a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ABT.AbsN'</span></span><span> </span><span id="local-6989586621681821699"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821699"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span class="annot"><span class="annottext">Term f v a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1170"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(v -&gt; Bool) -&gt; [v] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.notMember`</span></span><span> </span><span class="annot"><span class="annottext">Term f v a -&gt; Set v
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term f v a
</span><a href="#local-6989586621681821701"><span class="hs-identifier hs-var">scrutinee</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821699"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
forall loc. Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821700"><span class="hs-identifier hs-var">pat</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1171"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-1172"></span><span>    </span><span id="local-6989586621681821696"><span class="annot"><span class="annottext">hasLiteral :: Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var hs-var">hasLiteral</span></a></span></span><span> </span><span id="local-6989586621681821695"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821695"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821695"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1173"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Int</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1174"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Boolean</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1175"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Nat</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1176"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Float</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1177"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Text</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1178"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Char</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1179"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Constructor</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821694"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821694"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Pattern loc -&gt; Bool) -&gt; [Pattern loc] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821694"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1180"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.As</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821693"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821693"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821693"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1181"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectPure</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821692"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821692"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821692"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-1182"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.EffectBind</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821691"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821691"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span id="local-6989586621681821690"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821690"><span class="hs-identifier hs-var">pk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Pattern loc -&gt; Bool) -&gt; [Pattern loc] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821690"><span class="hs-identifier hs-var">pk</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; [Pattern loc] -&gt; [Pattern loc]
forall a. a -&gt; [a] -&gt; [a]
</span><span class="hs-glyph hs-var">:</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821691"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1183"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceLiteral</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821689"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821689"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(Pattern loc -&gt; Bool) -&gt; [Pattern loc] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821689"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-1184"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.SequenceOp</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821688"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821688"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="annot"><span class="annottext">SeqOp
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821687"><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821687"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821688"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc -&gt; Bool
</span><a href="#local-6989586621681821696"><span class="hs-identifier hs-var">hasLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><a href="#local-6989586621681821687"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-1185"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Var</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1186"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Pattern.Unbound</span></span><span> </span><span class="annot"><span class="annottext">loc
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1187"></span><span class="annot"><a href="Unison.TermPrinter.html#isDestructuringBind"><span class="hs-identifier hs-var">isDestructuringBind</span></a></span><span> </span><span class="annot"><span class="annottext">Term f v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[MatchCase loc (Term f v a)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1188"></span><span>
</span><span id="line-1189"></span><span id="local-6989586621681823107"><span id="local-6989586621681823108"><span id="local-6989586621681823109"><span id="local-6989586621681823110"><span id="local-6989586621681823111"><span class="annot"><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-type">isBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681823111"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681823110"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823109"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823108"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823111"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681823107"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span></span></span></span></span><span>
</span><span id="line-1190"></span><span id="isBlock"><span class="annot"><span class="annottext">isBlock :: Term2 vt at ap v a -&gt; Bool
</span><a href="Unison.TermPrinter.html#isBlock"><span class="hs-identifier hs-var hs-var">isBlock</span></a></span></span><span> </span><span id="local-6989586621681821686"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821686"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1191"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821686"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1192"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">If'</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1193"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Handle'</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1194"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1195"></span><span>    </span><span class="annot"><a href="Unison.TermPrinter.html#LetBlock"><span class="hs-identifier hs-type">LetBlock</span></a></span><span> </span><span class="annot"><span class="annottext">[(v, Term2 vt at ap v a)]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1196"></span><span>    </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1197"></span><span>
</span><span id="line-1198"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24mLetBlock"><span id="LetBlock"><span class="annot"><span class="annottext">$mLetBlock :: forall r v vt at ap a.
Ord v =&gt;
Term2 vt at ap v a
-&gt; ([(v, Term2 vt at ap v a)] -&gt; Term2 vt at ap v a -&gt; r)
-&gt; (Void# -&gt; r)
-&gt; r
</span><a href="Unison.TermPrinter.html#%24mLetBlock"><span class="hs-identifier hs-var hs-var">LetBlock</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621681821684"><span class="hs-identifier hs-type">bindings</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821683"><span class="hs-identifier hs-type">body</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#unLetBlock"><span class="hs-identifier hs-type">unLetBlock</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821684"><span class="annot"><a href="#local-6989586621681821684"><span class="hs-identifier hs-var">bindings</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821683"><span class="annot"><a href="#local-6989586621681821683"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1199"></span><span>
</span><span id="line-1200"></span><span class="hs-comment">-- Collects nested let/let rec blocks into one minimally nested block.</span><span>
</span><span id="line-1201"></span><span class="hs-comment">-- Handy because `let` and `let rec` blocks get rendered the same way.</span><span>
</span><span id="line-1202"></span><span class="hs-comment">-- We preserve nesting when the inner block shadows definitions in the</span><span>
</span><span id="line-1203"></span><span class="hs-comment">-- outer block.</span><span>
</span><span id="line-1204"></span><span id="local-6989586621681821677"><span id="local-6989586621681821678"><span id="local-6989586621681821679"><span id="local-6989586621681821680"><span id="local-6989586621681821681"><span class="annot"><a href="Unison.TermPrinter.html#unLetBlock"><span class="hs-identifier hs-type">unLetBlock</span></a></span><span>
</span><span id="line-1205"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821681"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-1206"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821680"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821679"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821678"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821681"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821677"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1207"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621681821681"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821680"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821679"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821678"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821681"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821677"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821680"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821679"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821678"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821681"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821677"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-1208"></span><span id="unLetBlock"><span class="annot"><span class="annottext">unLetBlock :: Term2 vt at ap v a
-&gt; Maybe ([(v, Term2 vt at ap v a)], Term2 vt at ap v a)
</span><a href="Unison.TermPrinter.html#unLetBlock"><span class="hs-identifier hs-var hs-var">unLetBlock</span></a></span></span><span> </span><span id="local-6989586621681821676"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821676"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
-&gt; Maybe ([(v, Term2 vt at ap v a)], Term2 vt at ap v a)
forall a vt at ap a.
Ord a =&gt;
Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821675"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821676"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1209"></span><span>  </span><span id="local-6989586621681821674"><span class="annot"><span class="annottext">dontIntersect :: t (a, b) -&gt; [(a, b)] -&gt; Bool
</span><a href="#local-6989586621681821674"><span class="hs-identifier hs-var hs-var">dontIntersect</span></a></span></span><span> </span><span id="local-6989586621681821673"><span class="annot"><span class="annottext">t (a, b)
</span><a href="#local-6989586621681821673"><span class="hs-identifier hs-var">v1s</span></a></span></span><span> </span><span id="local-6989586621681821672"><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621681821672"><span class="hs-identifier hs-var">v2s</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1210"></span><span>    </span><span class="annot"><span class="annottext">(a -&gt; Bool) -&gt; t a -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Set a -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-operator hs-var">`Set.notMember`</span></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621681821671"><span class="hs-identifier hs-var">v2set</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, b) -&gt; a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; a) -&gt; t (a, b) -&gt; t a
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">t (a, b)
</span><a href="#local-6989586621681821673"><span class="hs-identifier hs-var">v1s</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1211"></span><span>    </span><span id="local-6989586621681821671"><span class="annot"><span class="annottext">v2set :: Set a
</span><a href="#local-6989586621681821671"><span class="hs-identifier hs-var hs-var">v2set</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; Set a
forall a. Ord a =&gt; [a] -&gt; Set a
</span><span class="hs-identifier hs-var">Set.fromList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a, b) -&gt; a
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((a, b) -&gt; a) -&gt; [(a, b)] -&gt; [a]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(a, b)]
</span><a href="#local-6989586621681821672"><span class="hs-identifier hs-var">v2s</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>  </span><span id="local-6989586621681821675"><span class="annot"><span class="annottext">rec :: Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821675"><span class="hs-identifier hs-var hs-var">rec</span></a></span></span><span> </span><span id="local-6989586621681821669"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821669"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
-&gt; Maybe (Bool, [(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall vt at ap v a.
Term2 vt at ap v a
-&gt; Maybe (Bool, [(v, Term2 vt at ap v a)], Term2 vt at ap v a)
</span><span class="hs-identifier hs-var">unLetRecNamed</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821669"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1213"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Bool, [(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821667"><span class="hs-identifier hs-var">nonrec</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821669"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1214"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821666"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621681821666"><span class="hs-identifier hs-var">_isTop</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821665"><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821665"><span class="hs-identifier hs-var">bindings</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821664"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821664"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821675"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821664"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1215"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821663"><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821663"><span class="hs-identifier hs-var">innerBindings</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821662"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821662"><span class="hs-identifier hs-var">innerBody</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)] -&gt; [(a, Term2 vt at ap a a)] -&gt; Bool
forall (t :: * -&gt; *) a b b.
(Foldable t, Functor t, Ord a) =&gt;
t (a, b) -&gt; [(a, b)] -&gt; Bool
</span><a href="#local-6989586621681821674"><span class="hs-identifier hs-var">dontIntersect</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821665"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821663"><span class="hs-identifier hs-var">innerBindings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1216"></span><span>        </span><span class="annot"><span class="annottext">([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821665"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
-&gt; [(a, Term2 vt at ap a a)] -&gt; [(a, Term2 vt at ap a a)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821663"><span class="hs-identifier hs-var">innerBindings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821662"><span class="hs-identifier hs-var">innerBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1217"></span><span>      </span><span class="annot"><span class="annottext">Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821665"><span class="hs-identifier hs-var">bindings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821664"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1218"></span><span>  </span><span id="local-6989586621681821667"><span class="annot"><span class="annottext">nonrec :: Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821667"><span class="hs-identifier hs-var hs-var">nonrec</span></a></span></span><span> </span><span id="local-6989586621681821661"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821661"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
-&gt; Maybe ([(Bool, a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall vt at ap v a.
Term2 vt at ap v a
-&gt; Maybe ([(Bool, v, Term2 vt at ap v a)], Term2 vt at ap v a)
</span><span class="hs-identifier hs-var">unLet</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821661"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1219"></span><span>    </span><span class="annot"><span class="annottext">Maybe ([(Bool, a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1220"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821659"><span class="annot"><span class="annottext">[(Bool, a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821659"><span class="hs-identifier hs-var">bindings0</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821658"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821658"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1221"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821657"><span class="annot"><span class="annottext">bindings :: [(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821657"><span class="hs-identifier hs-var hs-var">bindings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821656"><span class="hs-identifier hs-var">v</span></a></span><span class="hs-special">,</span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821655"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span id="local-6989586621681821656"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821656"><span class="hs-identifier hs-var">v</span></a></span></span><span class="hs-special">,</span><span id="local-6989586621681821655"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821655"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[(Bool, a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821659"><span class="hs-identifier hs-var">bindings0</span></a></span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-keyword">in</span><span>
</span><span id="line-1222"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><a href="#local-6989586621681821675"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821658"><span class="hs-identifier hs-var">body</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1223"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821654"><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821654"><span class="hs-identifier hs-var">innerBindings</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821653"><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821653"><span class="hs-identifier hs-var">innerBody</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)] -&gt; [(a, Term2 vt at ap a a)] -&gt; Bool
forall (t :: * -&gt; *) a b b.
(Foldable t, Functor t, Ord a) =&gt;
t (a, b) -&gt; [(a, b)] -&gt; Bool
</span><a href="#local-6989586621681821674"><span class="hs-identifier hs-var">dontIntersect</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821657"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821654"><span class="hs-identifier hs-var">innerBindings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1224"></span><span>          </span><span class="annot"><span class="annottext">([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821657"><span class="hs-identifier hs-var">bindings</span></a></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
-&gt; [(a, Term2 vt at ap a a)] -&gt; [(a, Term2 vt at ap a a)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821654"><span class="hs-identifier hs-var">innerBindings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821653"><span class="hs-identifier hs-var">innerBody</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1225"></span><span>        </span><span class="annot"><span class="annottext">Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
-&gt; Maybe ([(a, Term2 vt at ap a a)], Term2 vt at ap a a)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[(a, Term2 vt at ap a a)]
</span><a href="#local-6989586621681821657"><span class="hs-identifier hs-var">bindings</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap a a
</span><a href="#local-6989586621681821658"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1226"></span><span>
</span><span id="line-1227"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24mLamsNamedMatch%27"><span id="LamsNamedMatch%27"><span class="annot"><span class="annottext">$mLamsNamedMatch' :: forall r v vt at ap a.
Var v =&gt;
Term2 vt at ap v a
-&gt; ([v]
    -&gt; [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)]
    -&gt; r)
-&gt; (Void# -&gt; r)
-&gt; r
</span><a href="Unison.TermPrinter.html#%24mLamsNamedMatch%27"><span class="hs-identifier hs-var hs-var">LamsNamedMatch'</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621681821651"><span class="hs-identifier hs-type">vs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821650"><span class="hs-identifier hs-type">branches</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#unLamsMatch%27"><span class="hs-identifier hs-type">unLamsMatch'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821651"><span class="annot"><a href="#local-6989586621681821651"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821650"><span class="annot"><a href="#local-6989586621681821650"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1228"></span><span>
</span><span id="line-1229"></span><span class="hs-comment">-- This function is used to detect places where lambda case syntax can be used.</span><span>
</span><span id="line-1230"></span><span class="hs-comment">-- When given lambdas of a form that corresponds to a lambda case, it returns</span><span>
</span><span id="line-1231"></span><span class="hs-comment">-- `Just (varsBeforeCases, branches)`. Leading vars are the vars that should be</span><span>
</span><span id="line-1232"></span><span class="hs-comment">-- shown to the left of the `-&gt; cases`.</span><span>
</span><span id="line-1233"></span><span class="hs-comment">--</span><span>
</span><span id="line-1234"></span><span class="hs-comment">-- For instance, if given this term:</span><span>
</span><span id="line-1235"></span><span class="hs-comment">--</span><span>
</span><span id="line-1236"></span><span class="hs-comment">--   x y z -&gt; match z with</span><span>
</span><span id="line-1237"></span><span class="hs-comment">--     [] -&gt; &quot;empty&quot;</span><span>
</span><span id="line-1238"></span><span class="hs-comment">--     (h +: t) -&gt; &quot;nonempty&quot;</span><span>
</span><span id="line-1239"></span><span class="hs-comment">--</span><span>
</span><span id="line-1240"></span><span class="hs-comment">-- this function will return Just ([x,y], [[] -&gt; &quot;empty&quot;, (h +: t) -&gt; &quot;nonempty&quot;])</span><span>
</span><span id="line-1241"></span><span class="hs-comment">-- and it would be rendered as</span><span>
</span><span id="line-1242"></span><span class="hs-comment">--</span><span>
</span><span id="line-1243"></span><span class="hs-comment">--   x y -&gt; cases []     -&gt; &quot;empty&quot;</span><span>
</span><span id="line-1244"></span><span class="hs-comment">--                h +: t -&gt; &quot;nonempty&quot;</span><span>
</span><span id="line-1245"></span><span class="hs-comment">--</span><span>
</span><span id="line-1246"></span><span class="hs-comment">-- Given this term</span><span>
</span><span id="line-1247"></span><span class="hs-comment">--</span><span>
</span><span id="line-1248"></span><span class="hs-comment">--   x y z -&gt; match (y, z) with</span><span>
</span><span id="line-1249"></span><span class="hs-comment">--     (&quot;a&quot;, &quot;b&quot;) -&gt; &quot;abba&quot;</span><span>
</span><span id="line-1250"></span><span class="hs-comment">--     (x, y) -&gt; y ++ x</span><span>
</span><span id="line-1251"></span><span class="hs-comment">--</span><span>
</span><span id="line-1252"></span><span class="hs-comment">-- this function will return Just ([x], [ &quot;a&quot; &quot;b&quot; -&gt; &quot;abba&quot;, x y -&gt; y ++ x])</span><span>
</span><span id="line-1253"></span><span class="hs-comment">-- and it would be rendered as `x -&gt; cases &quot;a&quot;, &quot;b&quot; -&gt; &quot;abba&quot;</span><span>
</span><span id="line-1254"></span><span class="hs-comment">--                                         x,    y  -&gt; y ++ x</span><span>
</span><span id="line-1255"></span><span class="hs-comment">--</span><span>
</span><span id="line-1256"></span><span class="hs-comment">-- This function returns `Nothing` in cases where the term it is given isn't</span><span>
</span><span id="line-1257"></span><span class="hs-comment">-- a lambda, or when the lambda isn't in the correct form for lambda cases.</span><span>
</span><span id="line-1258"></span><span class="hs-comment">-- (For instance, `x -&gt; match (x, 42) with ...` can't be written using</span><span>
</span><span id="line-1259"></span><span class="hs-comment">-- lambda case)</span><span>
</span><span id="line-1260"></span><span id="local-6989586621681821644"><span id="local-6989586621681821645"><span id="local-6989586621681821646"><span id="local-6989586621681821647"><span id="local-6989586621681821648"><span class="annot"><a href="Unison.TermPrinter.html#unLamsMatch%27"><span class="hs-identifier hs-type">unLamsMatch'</span></a></span><span>
</span><span id="line-1261"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681821648"><span class="hs-identifier hs-type">v</span></a></span><span>
</span><span id="line-1262"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821647"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821646"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821645"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821648"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821644"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1263"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><a href="#local-6989586621681821648"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Pattern</span></span><span> </span><span class="annot"><a href="#local-6989586621681821645"><span class="hs-identifier hs-type">ap</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821647"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821646"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821645"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821648"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821644"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term2</span></span><span> </span><span class="annot"><a href="#local-6989586621681821647"><span class="hs-identifier hs-type">vt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821646"><span class="hs-identifier hs-type">at</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821645"><span class="hs-identifier hs-type">ap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821648"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="#local-6989586621681821644"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span></span><span>
</span><span id="line-1264"></span><span id="unLamsMatch%27"><span class="annot"><span class="annottext">unLamsMatch' :: Term2 vt at ap v a
-&gt; Maybe
     ([v],
      [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
</span><a href="Unison.TermPrinter.html#unLamsMatch%27"><span class="hs-identifier hs-var hs-var">unLamsMatch'</span></a></span></span><span> </span><span id="local-6989586621681821643"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821643"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a -&gt; Maybe ([v], Term2 vt at ap v a)
forall v vt at ap a.
Var v =&gt;
Term2 vt at ap v a -&gt; Maybe ([v], Term2 vt at ap v a)
</span><span class="hs-identifier hs-var">unLamsUntilDelay'</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821643"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1265"></span><span>    </span><span class="hs-comment">-- x -&gt; match x with pat -&gt; ...</span><span>
</span><span id="line-1266"></span><span>    </span><span class="hs-comment">--   becomes</span><span>
</span><span id="line-1267"></span><span>    </span><span class="hs-comment">-- cases pat -&gt; ...</span><span>
</span><span id="line-1268"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; [v]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821641"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821641"><span class="hs-identifier hs-var">v1</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681821640"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821640"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var'</span></span><span> </span><span id="local-6989586621681821639"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821639"><span class="hs-identifier hs-var">v1'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821638"><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821638"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span>
</span><span id="line-1269"></span><span>      </span><span class="hs-comment">-- if `v1'` is referenced in any of the branches, we can't use lambda case</span><span>
</span><span id="line-1270"></span><span>      </span><span class="hs-comment">-- syntax as we need to keep the `v1'` name that was introduced</span><span>
</span><span id="line-1271"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821641"><span class="hs-identifier hs-var">v1</span></a></span><span> </span><span class="annot"><span class="annottext">v -&gt; v -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821639"><span class="hs-identifier hs-var">v1'</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.notMember</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821639"><span class="hs-identifier hs-var">v1'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Set v] -&gt; Set v
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span> </span><span class="annot"><span class="annottext">([Set v] -&gt; Set v) -&gt; [Set v] -&gt; Set v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MatchCase ap (Term2 vt at ap v a) -&gt; Set v
forall a loc (f :: * -&gt; *) a.
Ord a =&gt;
MatchCase loc (Term f a a) -&gt; Set a
</span><a href="#local-6989586621681821636"><span class="hs-identifier hs-var">freeVars</span></a></span><span> </span><span class="annot"><span class="annottext">(MatchCase ap (Term2 vt at ap v a) -&gt; Set v)
-&gt; [MatchCase ap (Term2 vt at ap v a)] -&gt; [Set v]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821638"><span class="hs-identifier hs-var">branches</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1272"></span><span>        </span><span class="annot"><span class="annottext">([v],
 [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
-&gt; Maybe
     ([v],
      [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; [v]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821640"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pattern ap
</span><a href="#local-6989586621681821635"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Term2 vt at ap v a)
</span><a href="#local-6989586621681821634"><span class="hs-identifier hs-var">guard</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821633"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span id="local-6989586621681821635"><span class="annot"><span class="annottext">Pattern ap
</span><a href="#local-6989586621681821635"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621681821634"><span class="annot"><span class="annottext">Maybe (Term2 vt at ap v a)
</span><a href="#local-6989586621681821634"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621681821633"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821633"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821638"><span class="hs-identifier hs-var">branches</span></a></span><span> </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1273"></span><span>    </span><span class="hs-comment">-- x y z -&gt; match (x,y,z) with (pat1, pat2, pat3) -&gt; ...</span><span>
</span><span id="line-1274"></span><span>    </span><span class="hs-comment">--   becomes</span><span>
</span><span id="line-1275"></span><span>    </span><span class="hs-comment">-- cases pat1 pat2 pat3 -&gt; ...`</span><span>
</span><span id="line-1276"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; [v]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621681821632"><span class="annot"><span class="annottext">vs :: [v]
</span><a href="#local-6989586621681821632"><span class="hs-identifier hs-var">vs</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="annottext">v
</span><span class="hs-identifier">_</span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span class="annot"><span class="annottext">[v]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Match'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier hs-type">TupleTerm'</span></a></span><span> </span><span id="local-6989586621681821631"><span class="annot"><span class="annottext">[Term2 vt at ap v a]
</span><a href="#local-6989586621681821631"><span class="hs-identifier hs-var">scrutes</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821630"><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821630"><span class="hs-identifier hs-var">branches</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span>
</span><span id="line-1277"></span><span>      </span><span class="annot"><span class="annottext">[v] -&gt; [Term2 vt at ap v a] -&gt; Bool
forall a (f :: * -&gt; *) a. Eq a =&gt; [a] -&gt; [Term f a a] -&gt; Bool
</span><a href="#local-6989586621681821629"><span class="hs-identifier hs-var">multiway</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821632"><span class="hs-identifier hs-var">vs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Term2 vt at ap v a] -&gt; [Term2 vt at ap v a]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="annot"><span class="annottext">[Term2 vt at ap v a]
</span><a href="#local-6989586621681821631"><span class="hs-identifier hs-var">scrutes</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1278"></span><span>      </span><span class="hs-comment">-- (as above) if any of the vars are referenced in any of the branches,</span><span>
</span><span id="line-1279"></span><span>      </span><span class="hs-comment">-- we need to keep the names introduced by the lambda and can't use</span><span>
</span><span id="line-1280"></span><span>      </span><span class="hs-comment">-- lambda case syntax</span><span>
</span><span id="line-1281"></span><span>      </span><span class="annot"><span class="annottext">(v -&gt; Bool) -&gt; [v] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">v -&gt; Bool
</span><a href="#local-6989586621681821628"><span class="hs-identifier hs-var">notFree</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [v] -&gt; [v]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821627"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821632"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span>
</span><span id="line-1282"></span><span>      </span><span class="annot"><span class="annottext">(MatchCase ap (Term2 vt at ap v a) -&gt; Bool)
-&gt; [MatchCase ap (Term2 vt at ap v a)] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">all</span></span><span> </span><span class="annot"><span class="annottext">MatchCase ap (Term2 vt at ap v a) -&gt; Bool
forall loc a. MatchCase loc a -&gt; Bool
</span><a href="#local-6989586621681821626"><span class="hs-identifier hs-var">isRightArity</span></a></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821630"><span class="hs-identifier hs-var">branches</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-comment">-- all patterns need to match arity of scrutes</span><span>
</span><span id="line-1283"></span><span>      </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821627"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1284"></span><span>        </span><span class="annot"><span class="annottext">([v],
 [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
-&gt; Maybe
     ([v],
      [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[v] -&gt; [v]
forall a. [a] -&gt; [a]
</span><span class="hs-identifier hs-var">reverse</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [v] -&gt; [v]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821627"><span class="hs-identifier hs-var">len</span></a></span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821632"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">[([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)]
</span><a href="#local-6989586621681821625"><span class="hs-identifier hs-var">branches'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1285"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1286"></span><span>          </span><span id="local-6989586621681821626"><span class="annot"><span class="annottext">isRightArity :: MatchCase loc a -&gt; Bool
</span><a href="#local-6989586621681821626"><span class="hs-identifier hs-var hs-var">isRightArity</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#TuplePattern"><span class="hs-identifier hs-type">TuplePattern</span></a></span><span> </span><span id="local-6989586621681821624"><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821624"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">a
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pattern loc] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Pattern loc]
</span><a href="#local-6989586621681821624"><span class="hs-identifier hs-var">ps</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821627"><span class="hs-identifier hs-var">len</span></a></span><span>
</span><span id="line-1287"></span><span>          </span><span class="annot"><a href="#local-6989586621681821626"><span class="hs-identifier hs-var">isRightArity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1288"></span><span>          </span><span id="local-6989586621681821627"><span class="annot"><span class="annottext">len :: Int
</span><a href="#local-6989586621681821627"><span class="hs-identifier hs-var hs-var">len</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term2 vt at ap v a] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Term2 vt at ap v a]
</span><a href="#local-6989586621681821631"><span class="hs-identifier hs-var">scrutes</span></a></span><span>
</span><span id="line-1289"></span><span>          </span><span id="local-6989586621681821623"><span class="annot"><span class="annottext">fvs :: Set v
</span><a href="#local-6989586621681821623"><span class="hs-identifier hs-var hs-var">fvs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Set v] -&gt; Set v
forall (f :: * -&gt; *) a. (Foldable f, Ord a) =&gt; f (Set a) -&gt; Set a
</span><span class="hs-identifier hs-var">Set.unions</span></span><span> </span><span class="annot"><span class="annottext">([Set v] -&gt; Set v) -&gt; [Set v] -&gt; Set v
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MatchCase ap (Term2 vt at ap v a) -&gt; Set v
forall a loc (f :: * -&gt; *) a.
Ord a =&gt;
MatchCase loc (Term f a a) -&gt; Set a
</span><a href="#local-6989586621681821636"><span class="hs-identifier hs-var">freeVars</span></a></span><span> </span><span class="annot"><span class="annottext">(MatchCase ap (Term2 vt at ap v a) -&gt; Set v)
-&gt; [MatchCase ap (Term2 vt at ap v a)] -&gt; [Set v]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821630"><span class="hs-identifier hs-var">branches</span></a></span><span>
</span><span id="line-1290"></span><span>          </span><span id="local-6989586621681821628"><span class="annot"><span class="annottext">notFree :: v -&gt; Bool
</span><a href="#local-6989586621681821628"><span class="hs-identifier hs-var hs-var">notFree</span></a></span></span><span> </span><span id="local-6989586621681821622"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821622"><span class="hs-identifier hs-var">v</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">v -&gt; Set v -&gt; Bool
forall a. Ord a =&gt; a -&gt; Set a -&gt; Bool
</span><span class="hs-identifier hs-var">Set.notMember</span></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621681821622"><span class="hs-identifier hs-var">v</span></a></span><span> </span><span class="annot"><span class="annottext">Set v
</span><a href="#local-6989586621681821623"><span class="hs-identifier hs-var">fvs</span></a></span><span>
</span><span id="line-1291"></span><span>          </span><span id="local-6989586621681821625"><span class="annot"><span class="annottext">branches' :: [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)]
</span><a href="#local-6989586621681821625"><span class="hs-identifier hs-var hs-var">branches'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pattern ap]
</span><a href="#local-6989586621681821621"><span class="hs-identifier hs-var">ps</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe (Term2 vt at ap v a)
</span><a href="#local-6989586621681821620"><span class="hs-identifier hs-var">guard</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821619"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#TuplePattern"><span class="hs-identifier hs-type">TuplePattern</span></a></span><span> </span><span id="local-6989586621681821621"><span class="annot"><span class="annottext">[Pattern ap]
</span><a href="#local-6989586621681821621"><span class="hs-identifier hs-var">ps</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821620"><span class="annot"><span class="annottext">Maybe (Term2 vt at ap v a)
</span><a href="#local-6989586621681821620"><span class="hs-identifier hs-var">guard</span></a></span></span><span> </span><span id="local-6989586621681821619"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821619"><span class="hs-identifier hs-var">body</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[MatchCase ap (Term2 vt at ap v a)]
</span><a href="#local-6989586621681821630"><span class="hs-identifier hs-var">branches</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-1292"></span><span>    </span><span class="annot"><span class="annottext">Maybe ([v], Term2 vt at ap v a)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe
  ([v],
   [([Pattern ap], Maybe (Term2 vt at ap v a), Term2 vt at ap v a)])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1293"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1294"></span><span>    </span><span class="hs-comment">-- multiway vs tms checks that length tms &lt;= length vs, and their common prefix</span><span>
</span><span id="line-1295"></span><span>    </span><span class="hs-comment">-- is all matching variables</span><span>
</span><span id="line-1296"></span><span>    </span><span id="local-6989586621681821629"><span class="annot"><span class="annottext">multiway :: [a] -&gt; [Term f a a] -&gt; Bool
</span><a href="#local-6989586621681821629"><span class="hs-identifier hs-var hs-var">multiway</span></a></span></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-1297"></span><span>    </span><span class="annot"><a href="#local-6989586621681821629"><span class="hs-identifier hs-var">multiway</span></a></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821618"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821618"><span class="hs-identifier hs-var">h</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681821617"><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681821617"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var'</span></span><span> </span><span id="local-6989586621681821616"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821616"><span class="hs-identifier hs-var">h2</span></a></span></span><span class="annot"><span class="hs-glyph hs-type">:</span></span><span id="local-6989586621681821615"><span class="annot"><span class="annottext">[Term f a a]
</span><a href="#local-6989586621681821615"><span class="hs-identifier hs-var">t2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821618"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821616"><span class="hs-identifier hs-var">h2</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[a] -&gt; [Term f a a] -&gt; Bool
</span><a href="#local-6989586621681821629"><span class="hs-identifier hs-var">multiway</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><a href="#local-6989586621681821617"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">[Term f a a]
</span><a href="#local-6989586621681821615"><span class="hs-identifier hs-var">t2</span></a></span><span>
</span><span id="line-1298"></span><span>    </span><span class="annot"><a href="#local-6989586621681821629"><span class="hs-identifier hs-var">multiway</span></a></span><span> </span><span class="annot"><span class="annottext">[a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[Term f a a]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1299"></span><span>    </span><span id="local-6989586621681821636"><span class="annot"><span class="annottext">freeVars :: MatchCase loc (Term f a a) -&gt; Set a
</span><a href="#local-6989586621681821636"><span class="hs-identifier hs-var hs-var">freeVars</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MatchCase</span></span><span> </span><span class="annot"><span class="annottext">Pattern loc
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681821614"><span class="annot"><span class="annottext">Maybe (Term f a a)
</span><a href="#local-6989586621681821614"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621681821613"><span class="annot"><span class="annottext">Term f a a
</span><a href="#local-6989586621681821613"><span class="hs-identifier hs-var">rhs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1300"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821612"><span class="annot"><span class="annottext">guardVars :: Set a
</span><a href="#local-6989586621681821612"><span class="hs-identifier hs-var hs-var">guardVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Set a -&gt; Maybe (Set a) -&gt; Set a
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Set a
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (Set a) -&gt; Set a) -&gt; Maybe (Set a) -&gt; Set a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term f a a -&gt; Set a
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">(Term f a a -&gt; Set a) -&gt; Maybe (Term f a a) -&gt; Maybe (Set a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (Term f a a)
</span><a href="#local-6989586621681821614"><span class="hs-identifier hs-var">g</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1301"></span><span>          </span><span id="local-6989586621681821610"><span class="annot"><span class="annottext">rhsVars :: Set a
</span><a href="#local-6989586621681821610"><span class="hs-identifier hs-var hs-var">rhsVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term f a a -&gt; Set a
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term f a a
</span><a href="#local-6989586621681821613"><span class="hs-identifier hs-var">rhs</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1302"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Set a -&gt; Set a -&gt; Set a
forall a. Ord a =&gt; Set a -&gt; Set a -&gt; Set a
</span><span class="hs-identifier hs-var">Set.union</span></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621681821612"><span class="hs-identifier hs-var">guardVars</span></a></span><span> </span><span class="annot"><span class="annottext">Set a
</span><a href="#local-6989586621681821610"><span class="hs-identifier hs-var">rhsVars</span></a></span><span>
</span><span id="line-1303"></span><span>
</span><span id="line-1304"></span><span class="hs-keyword">pattern</span><span> </span><span id="%24mBytes%27"><span id="Bytes%27"><span class="annot"><span class="annottext">$mBytes' :: forall r v.
Term3 v PrintAnnotation -&gt; ([Word64] -&gt; r) -&gt; (Void# -&gt; r) -&gt; r
</span><a href="Unison.TermPrinter.html#%24mBytes%27"><span class="hs-identifier hs-var hs-var">Bytes'</span></a></span></span></span><span> </span><span class="annot"><a href="#local-6989586621681821608"><span class="hs-identifier hs-type">bs</span></a></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.TermPrinter.html#toBytes"><span class="hs-identifier hs-type">toBytes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821608"><span class="annot"><a href="#local-6989586621681821608"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1305"></span><span>
</span><span id="line-1306"></span><span id="local-6989586621681821606"><span class="annot"><a href="Unison.TermPrinter.html#toBytes"><span class="hs-identifier hs-type">toBytes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821606"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-1307"></span><span id="toBytes"><span class="annot"><span class="annottext">toBytes :: Term3 v PrintAnnotation -&gt; Maybe [Word64]
</span><a href="Unison.TermPrinter.html#toBytes"><span class="hs-identifier hs-var hs-var">toBytes</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Builtin'</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Bytes.fromList&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821604"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821604"><span class="hs-identifier hs-var">bs</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1308"></span><span>  </span><span class="annot"><span class="annottext">Seq Word64 -&gt; [Word64]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(Seq Word64 -&gt; [Word64]) -&gt; Maybe (Seq Word64) -&gt; Maybe [Word64]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Maybe Word64)
-&gt; Seq (Term3 v PrintAnnotation) -&gt; Maybe (Seq Word64)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe Word64
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Word64
</span><a href="#local-6989586621681821601"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821604"><span class="hs-identifier hs-var">bs</span></a></span><span>
</span><span id="line-1309"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681821601"><span class="annot"><span class="annottext">go :: Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Word64
</span><a href="#local-6989586621681821601"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Nat'</span></span><span> </span><span id="local-6989586621681821600"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821600"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Maybe Word64
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821600"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1310"></span><span>        </span><span class="annot"><a href="#local-6989586621681821601"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Word64
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1311"></span><span class="annot"><a href="Unison.TermPrinter.html#toBytes"><span class="hs-identifier hs-var">toBytes</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Word64]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1312"></span><span>
</span><span id="line-1313"></span><span class="annot"><a href="Unison.TermPrinter.html#prettyDoc2"><span class="hs-identifier hs-type">prettyDoc2</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1314"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681823076"><span class="annot"><a href="#local-6989586621681823076"><span class="hs-identifier hs-type">v</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1315"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681823076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1316"></span><span>  </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1317"></span><span>  </span><span class="annot"><a href="Unison.TermPrinter.html#AmbientContext"><span class="hs-identifier hs-type">AmbientContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1318"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1319"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1320"></span><span id="prettyDoc2"><span class="annot"><span class="annottext">prettyDoc2 :: PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Pretty (SyntaxText' Reference))
</span><a href="Unison.TermPrinter.html#prettyDoc2"><span class="hs-identifier hs-var hs-var">prettyDoc2</span></a></span></span><span> </span><span id="local-6989586621681821599"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621681821598"><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span></span><span> </span><span id="local-6989586621681821597"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821597"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821597"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1321"></span><span>  </span><span class="hs-comment">-- these patterns can introduce a {{ .. }} block</span><span>
</span><span id="line-1322"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocUntitledSection"><span class="hs-identifier hs-var">toDocUntitledSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; (Pretty (SyntaxText' Reference)
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821595"><span class="hs-identifier hs-var">brace</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821597"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1323"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
</span><a href="Unison.TermPrinter.html#toDocSection"><span class="hs-identifier hs-var">toDocSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; (Pretty (SyntaxText' Reference)
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821595"><span class="hs-identifier hs-var">brace</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821597"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1324"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocParagraph"><span class="hs-identifier hs-var">toDocParagraph</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; (Pretty (SyntaxText' Reference)
    -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821595"><span class="hs-identifier hs-var">brace</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference)
 -&gt; Maybe (Pretty (SyntaxText' Reference)))
-&gt; Pretty (SyntaxText' Reference)
-&gt; Maybe (Pretty (SyntaxText' Reference))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821597"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1325"></span><span>  </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Pretty (SyntaxText' Reference))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1326"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1327"></span><span>    </span><span id="local-6989586621681821595"><span class="annot"><span class="annottext">brace :: Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821595"><span class="hs-identifier hs-var hs-var">brace</span></a></span></span><span> </span><span id="local-6989586621681821591"><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821591"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1328"></span><span>      </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot;{{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821591"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
forall s. IsString s =&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#softbreak"><span class="hs-identifier hs-var">PP.softbreak</span></a></span><span>
</span><span id="line-1329"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
-&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span>
</span><span id="line-1330"></span><span>          </span><span class="annot"><span class="annottext">Element r
forall r. Element r
</span><a href="Unison.Util.SyntaxText.html#DocDelimiter"><span class="hs-identifier hs-var">S.DocDelimiter</span></a></span><span>
</span><span id="line-1331"></span><span>          </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><span class="hs-string">&quot;}}&quot;</span></span><span>
</span><span id="line-1332"></span><span>    </span><span id="local-6989586621681821590"><span class="annot"><span class="annottext">bail :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821590"><span class="hs-identifier hs-var hs-var">bail</span></a></span></span><span> </span><span id="local-6989586621681821589"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821589"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r. Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821595"><span class="hs-identifier hs-var">brace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821589"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1333"></span><span>    </span><span class="hs-comment">-- Finds the longest run of a character and return a run one longer than that</span><span>
</span><span id="line-1334"></span><span>    </span><span id="local-6989586621681821588"><span class="annot"><span class="annottext">oneMore :: a -&gt; Pretty (SyntaxText' r) -&gt; [a]
</span><a href="#local-6989586621681821588"><span class="hs-identifier hs-var hs-var">oneMore</span></a></span></span><span> </span><span id="local-6989586621681821587"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821587"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621681821586"><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821586"><span class="hs-identifier hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int -&gt; a -&gt; [a]
forall a. Int -&gt; a -&gt; [a]
</span><span class="hs-identifier hs-var">replicate</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621681821584"><span class="hs-identifier hs-var">num</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821587"><span class="hs-identifier hs-var">c</span></a></span><span>
</span><span id="line-1335"></span><span>     </span><span class="hs-keyword">where</span><span>
</span><span id="line-1336"></span><span>      </span><span id="local-6989586621681821584"><span class="annot"><span class="annottext">num :: Int
</span><a href="#local-6989586621681821584"><span class="hs-identifier hs-var hs-var">num</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1337"></span><span>        </span><span class="hs-keyword">case</span><span>
</span><span id="line-1338"></span><span>            </span><span class="annot"><span class="annottext">(String -&gt; Bool) -&gt; [String] -&gt; [String]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621681821583"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821583"><span class="hs-identifier hs-var">s</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int -&gt; ShowS
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">take</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821583"><span class="hs-identifier hs-var">s</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;__&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-1339"></span><span>              </span><span class="annot"><span class="annottext">([String] -&gt; [String]) -&gt; [String] -&gt; [String]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; [String]
forall a. Eq a =&gt; [a] -&gt; [[a]]
</span><span class="hs-identifier hs-var">group</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty ColorText -&gt; String
</span><a href="Unison.Util.Pretty.html#toPlainUnbroken"><span class="hs-identifier hs-var">PP.toPlainUnbroken</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty ColorText -&gt; String) -&gt; Pretty ColorText -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r) -&gt; Pretty ColorText
forall r. Pretty (SyntaxText' r) -&gt; Pretty ColorText
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">PP.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' r)
</span><a href="#local-6989586621681821586"><span class="hs-identifier hs-var">inner</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1340"></span><span>          </span><span class="hs-keyword">of</span><span>
</span><span id="line-1341"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-1342"></span><span>            </span><span id="local-6989586621681821580"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681821580"><span class="hs-identifier hs-var">x</span></a></span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (t :: * -&gt; *) a. (Foldable t, Ord a) =&gt; t a -&gt; a
</span><span class="hs-identifier hs-var">maximum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; [Int] -&gt; Int
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Int) -&gt; [String] -&gt; [Int]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621681821580"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1343"></span><span>    </span><span class="annot"><a href="#local-6989586621681821594"><span class="hs-identifier hs-type">go</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Width"><span class="hs-identifier hs-type">Width</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681823076"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#SyntaxText"><span class="hs-identifier hs-type">SyntaxText</span></a></span><span>
</span><span id="line-1344"></span><span>    </span><span id="local-6989586621681821594"><span class="annot"><span class="annottext">go :: Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681821579"><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681821579"><span class="hs-identifier hs-var">hdr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1345"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocTransclude"><span class="hs-identifier hs-var">toDocTransclude</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821577"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821577"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1346"></span><span>        </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821590"><span class="hs-identifier hs-var">bail</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821577"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1347"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocUntitledSection"><span class="hs-identifier hs-var">toDocUntitledSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821576"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821576"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1348"></span><span>        </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821575"><span class="hs-identifier hs-var">sepBlankline</span></a></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821576"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1349"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
</span><a href="Unison.TermPrinter.html#toDocSection"><span class="hs-identifier hs-var">toDocSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821574"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821574"><span class="hs-identifier hs-var">title</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821573"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821573"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1350"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span>
</span><span id="line-1351"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.replicate</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Int
</span><a href="Unison.Util.Pretty.html#widthToInt"><span class="hs-identifier hs-var hs-var">PP.widthToInt</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681821579"><span class="hs-identifier hs-var">hdr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821574"><span class="hs-identifier hs-var">title</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1352"></span><span>            </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1353"></span><span>            </span><span class="annot"><span class="annottext">Width
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">PP.indentN</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681821579"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation]
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681821579"><span class="hs-identifier hs-var">hdr</span></a></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Width -&gt; Width
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821573"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1354"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-1355"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocParagraph"><span class="hs-identifier hs-var">toDocParagraph</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821569"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821569"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1356"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#wrap"><span class="hs-identifier hs-var">PP.wrap</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821569"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1357"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocBulletedList"><span class="hs-identifier hs-var">toDocBulletedList</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821566"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821566"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1358"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821565"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821566"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1359"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1360"></span><span>          </span><span id="local-6989586621681821565"><span class="annot"><span class="annottext">item :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821565"><span class="hs-identifier hs-var hs-var">item</span></a></span></span><span> </span><span id="local-6989586621681821564"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821564"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;* &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentAfterNewline"><span class="hs-identifier hs-var">PP.indentAfterNewline</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;  &quot;</span></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821564"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1361"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Word64, [Term3 v PrintAnnotation])
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Word64, [Term3 v PrintAnnotation])
</span><a href="Unison.TermPrinter.html#toDocNumberedList"><span class="hs-identifier hs-var">toDocNumberedList</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821561"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821561"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821560"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821560"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1362"></span><span>        </span><span class="annot"><span class="annottext">[(Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))]
-&gt; Pretty (SyntaxText' Reference)
forall s.
(ListLike s Char, IsString s) =&gt;
[(Pretty s, Pretty s)] -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#column2"><span class="hs-identifier hs-var">PP.column2</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Word64, Term3 v PrintAnnotation)
-&gt; (Pretty (SyntaxText' Reference), Pretty (SyntaxText' Reference))
forall a s.
(Show a, IsString s) =&gt;
(a, Term3 v PrintAnnotation)
-&gt; (Pretty s, Pretty (SyntaxText' Reference))
</span><a href="#local-6989586621681821559"><span class="hs-identifier hs-var">item</span></a></span><span> </span><span class="annot"><span class="annottext">((Word64, Term3 v PrintAnnotation)
 -&gt; (Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference)))
-&gt; [(Word64, Term3 v PrintAnnotation)]
-&gt; [(Pretty (SyntaxText' Reference),
     Pretty (SyntaxText' Reference))]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Word64]
-&gt; [Term3 v PrintAnnotation] -&gt; [(Word64, Term3 v PrintAnnotation)]
forall a b. [a] -&gt; [b] -&gt; [(a, b)]
</span><span class="hs-identifier hs-var">zip</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821561"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="hs-glyph">..</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821560"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1363"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1364"></span><span>          </span><span id="local-6989586621681821559"><span class="annot"><span class="annottext">item :: (a, Term3 v PrintAnnotation)
-&gt; (Pretty s, Pretty (SyntaxText' Reference))
</span><a href="#local-6989586621681821559"><span class="hs-identifier hs-var hs-var">item</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821558"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821558"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821557"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821557"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty s -&gt; Pretty s
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Pretty s
forall a s. (Show a, IsString s) =&gt; a -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#shown"><span class="hs-identifier hs-var">PP.shown</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621681821558"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty s -&gt; Pretty s -&gt; Pretty s
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty s
</span><span class="hs-string">&quot;.&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821557"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1365"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
forall v. PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
</span><a href="Unison.TermPrinter.html#toDocWord"><span class="hs-identifier hs-var">toDocWord</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821555"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821555"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1366"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821555"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-1367"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocCode"><span class="hs-identifier hs-var">toDocCode</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821553"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821553"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1368"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821552"><span class="annot"><span class="annottext">inner :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821552"><span class="hs-identifier hs-var hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821553"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1369"></span><span>            </span><span id="local-6989586621681821551"><span class="annot"><span class="annottext">quotes :: String
</span><a href="#local-6989586621681821551"><span class="hs-identifier hs-var hs-var">quotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Pretty (SyntaxText' Reference) -&gt; String
forall a r. a -&gt; Pretty (SyntaxText' r) -&gt; [a]
</span><a href="#local-6989586621681821588"><span class="hs-identifier hs-var">oneMore</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'\''</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821552"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-1370"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821551"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821552"><span class="hs-identifier hs-var">inner</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821551"><span class="hs-identifier hs-var">quotes</span></a></span><span>
</span><span id="line-1371"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocJoin"><span class="hs-identifier hs-var">toDocJoin</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821548"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821548"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1372"></span><span>        </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) m a.
(Foldable t, Monoid m) =&gt;
(a -&gt; m) -&gt; t a -&gt; m
</span><span class="hs-identifier hs-var">foldMap</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821548"><span class="hs-identifier hs-var">ds</span></a></span><span>
</span><span id="line-1373"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocItalic"><span class="hs-identifier hs-var">toDocItalic</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821546"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821546"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1374"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821545"><span class="annot"><span class="annottext">inner :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821545"><span class="hs-identifier hs-var hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821546"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1375"></span><span>            </span><span id="local-6989586621681821544"><span class="annot"><span class="annottext">underscores :: String
</span><a href="#local-6989586621681821544"><span class="hs-identifier hs-var hs-var">underscores</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Pretty (SyntaxText' Reference) -&gt; String
forall a r. a -&gt; Pretty (SyntaxText' r) -&gt; [a]
</span><a href="#local-6989586621681821588"><span class="hs-identifier hs-var">oneMore</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'_'</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821545"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-1376"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821544"><span class="hs-identifier hs-var">underscores</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821545"><span class="hs-identifier hs-var">inner</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821544"><span class="hs-identifier hs-var">underscores</span></a></span><span>
</span><span id="line-1377"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocBold"><span class="hs-identifier hs-var">toDocBold</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821542"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821542"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1378"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821541"><span class="annot"><span class="annottext">inner :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821541"><span class="hs-identifier hs-var hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821542"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1379"></span><span>            </span><span id="local-6989586621681821540"><span class="annot"><span class="annottext">stars :: String
</span><a href="#local-6989586621681821540"><span class="hs-identifier hs-var hs-var">stars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Pretty (SyntaxText' Reference) -&gt; String
forall a r. a -&gt; Pretty (SyntaxText' r) -&gt; [a]
</span><a href="#local-6989586621681821588"><span class="hs-identifier hs-var">oneMore</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'*'</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821541"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-1380"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821540"><span class="hs-identifier hs-var">stars</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821541"><span class="hs-identifier hs-var">inner</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821540"><span class="hs-identifier hs-var">stars</span></a></span><span>
</span><span id="line-1381"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocStrikethrough"><span class="hs-identifier hs-var">toDocStrikethrough</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821538"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821538"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1382"></span><span>         </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821537"><span class="annot"><span class="annottext">inner :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821537"><span class="hs-identifier hs-var hs-var">inner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821538"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1383"></span><span>             </span><span id="local-6989586621681821536"><span class="annot"><span class="annottext">quotes :: String
</span><a href="#local-6989586621681821536"><span class="hs-identifier hs-var hs-var">quotes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Char -&gt; Pretty (SyntaxText' Reference) -&gt; String
forall a r. a -&gt; Pretty (SyntaxText' r) -&gt; [a]
</span><a href="#local-6989586621681821588"><span class="hs-identifier hs-var">oneMore</span></a></span><span> </span><span class="annot"><span class="annottext">Char
</span><span class="hs-char">'~'</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821537"><span class="hs-identifier hs-var">inner</span></a></span><span>
</span><span id="line-1384"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821536"><span class="hs-identifier hs-var">quotes</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821537"><span class="hs-identifier hs-var">inner</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; String -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#string"><span class="hs-identifier hs-var">PP.string</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621681821536"><span class="hs-identifier hs-var">quotes</span></a></span><span>
</span><span id="line-1385"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocGroup"><span class="hs-identifier hs-var">toDocGroup</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821534"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821534"><span class="hs-identifier hs-var">d</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1386"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821534"><span class="hs-identifier hs-var">d</span></a></span><span>
</span><span id="line-1387"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocColumn"><span class="hs-identifier hs-var">toDocColumn</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821532"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821532"><span class="hs-identifier hs-var">ds</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1388"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; [Pretty (SyntaxText' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821532"><span class="hs-identifier hs-var">ds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1389"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocNamedLink"><span class="hs-identifier hs-var">toDocNamedLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821530"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821530"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821529"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821529"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1390"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;[&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821530"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;](&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821529"><span class="hs-identifier hs-var">target</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-1391"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
</span><a href="Unison.TermPrinter.html#toDocLink"><span class="hs-identifier hs-var">toDocLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821527"><span class="annot"><span class="annottext">Either Reference (Referent' Reference)
</span><a href="#local-6989586621681821527"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either Reference (Referent' Reference)
</span><a href="#local-6989586621681821527"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1392"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681821526"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821526"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;{type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821525"><span class="hs-identifier hs-var">tyName</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821526"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1393"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681821524"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821524"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var">tmName</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821524"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1394"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEval"><span class="hs-identifier hs-var">toDocEval</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821521"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821521"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1395"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;```&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821521"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;```&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1396"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEvalInline"><span class="hs-identifier hs-var">toDocEvalInline</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821519"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821519"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1397"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;@eval{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821519"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1398"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExample"><span class="hs-identifier hs-var">toDocExample</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821517"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821517"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1399"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;``&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821517"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;``&quot;</span></span><span>
</span><span id="line-1400"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExampleBlock"><span class="hs-identifier hs-var">toDocExampleBlock</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821515"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821515"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1401"></span><span>        </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;@typecheck ```&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
PrettyPrintEnv
-&gt; AmbientContext
-&gt; Term3 v PrintAnnotation
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#pretty0"><span class="hs-identifier hs-var">pretty0</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821514"><span class="hs-identifier hs-var">ac'</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821515"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;```&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-1402"></span><span>        </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681821514"><span class="annot"><span class="annottext">ac' :: AmbientContext
</span><a href="#local-6989586621681821514"><span class="hs-identifier hs-var hs-var">ac'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">elideUnit :: Bool
</span><a href="Unison.TermPrinter.html#elideUnit"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-1403"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocSource"><span class="hs-identifier hs-var">toDocSource</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821512"><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821512"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1404"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;    @source{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; ((Either Reference (Referent' Reference), [Referent' Reference])
    -&gt; Pretty (SyntaxText' Reference))
-&gt; [(Either Reference (Referent' Reference),
     [Referent' Reference])]
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">(Either Reference (Referent' Reference), [Referent' Reference])
-&gt; Pretty (SyntaxText' Reference)
forall b.
(Either Reference (Referent' Reference), b)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821511"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821512"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1405"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1406"></span><span>          </span><span id="local-6989586621681821511"><span class="annot"><span class="annottext">go :: (Either Reference (Referent' Reference), b)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821511"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681821510"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821510"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821509"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821509"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821525"><span class="hs-identifier hs-var">tyName</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821510"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1407"></span><span>          </span><span class="annot"><a href="#local-6989586621681821511"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681821508"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821508"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821507"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821507"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var">tmName</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821508"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1408"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocFoldedSource"><span class="hs-identifier hs-var">toDocFoldedSource</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821505"><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821505"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1409"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;    @foldedSource{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; ((Either Reference (Referent' Reference), [Referent' Reference])
    -&gt; Pretty (SyntaxText' Reference))
-&gt; [(Either Reference (Referent' Reference),
     [Referent' Reference])]
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">(Either Reference (Referent' Reference), [Referent' Reference])
-&gt; Pretty (SyntaxText' Reference)
forall b.
(Either Reference (Referent' Reference), b)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821505"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1410"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-1411"></span><span>          </span><span id="local-6989586621681821504"><span class="annot"><span class="annottext">go :: (Either Reference (Referent' Reference), b)
-&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821504"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621681821503"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821503"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821502"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821502"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;type &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821525"><span class="hs-identifier hs-var">tyName</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821503"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1412"></span><span>          </span><span class="annot"><a href="#local-6989586621681821504"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621681821501"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821501"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821500"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621681821500"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var">tmName</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821501"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1413"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocSignatureInline"><span class="hs-identifier hs-var">toDocSignatureInline</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821498"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821498"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1414"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;@inlineSignature{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var">tmName</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821498"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1415"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
</span><a href="Unison.TermPrinter.html#toDocSignature"><span class="hs-identifier hs-var">toDocSignature</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821496"><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821496"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1416"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821495"><span class="annot"><span class="annottext">name :: Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821495"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Referent' Reference] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821496"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;@signature&quot;</span></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;@signatures&quot;</span></span><span>
</span><span id="line-1417"></span><span>        </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;    &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821495"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; (Referent' Reference -&gt; Pretty (SyntaxText' Reference))
-&gt; [Referent' Reference]
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;, &quot;</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var">tmName</span></a></span><span> </span><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821496"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;}&quot;</span></span><span>
</span><span id="line-1418"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe (Text, Text)
forall v.
PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe (Text, Text)
</span><a href="Unison.TermPrinter.html#toDocCodeBlock"><span class="hs-identifier hs-var">toDocCodeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621681821493"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821493"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821492"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821492"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1419"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1420"></span><span>          </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span>
</span><span id="line-1421"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;``` &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821493"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1422"></span><span>              </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821492"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1423"></span><span>              </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;```&quot;</span></span><span>
</span><span id="line-1424"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1425"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
forall v. PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
</span><a href="Unison.TermPrinter.html#toDocVerbatim"><span class="hs-identifier hs-var">toDocVerbatim</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821490"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821490"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1426"></span><span>        </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1427"></span><span>          </span><span class="annot"><span class="annottext">[Pretty (SyntaxText' Reference)] -&gt; Pretty (SyntaxText' Reference)
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">PP.lines</span></a></span><span>
</span><span id="line-1428"></span><span>            </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;'''&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-1429"></span><span>              </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">PP.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Reference)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">PP.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821490"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1430"></span><span>              </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;'''&quot;</span></span><span>
</span><span id="line-1431"></span><span>            </span><span class="hs-special">]</span><span>
</span><span id="line-1432"></span><span>      </span><span class="hs-comment">-- todo : emit fewer gratuitous columns, maybe a wrapIfMany combinator</span><span>
</span><span id="line-1433"></span><span>      </span><span id="local-6989586621681821489"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821489"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
forall v.
Var v =&gt;
Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821590"><span class="hs-identifier hs-var">bail</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821489"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1434"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-1435"></span><span>        </span><span id="local-6989586621681821488"><span class="annot"><span class="annottext">im :: Imports
</span><a href="#local-6989586621681821488"><span class="hs-identifier hs-var hs-var">im</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AmbientContext -&gt; Imports
</span><a href="Unison.TermPrinter.html#imports"><span class="hs-identifier hs-var hs-var">imports</span></a></span><span> </span><span class="annot"><span class="annottext">AmbientContext
</span><a href="#local-6989586621681821598"><span class="hs-identifier hs-var">ac</span></a></span><span>
</span><span id="line-1436"></span><span>        </span><span id="local-6989586621681821525"><span class="annot"><span class="annottext">tyName :: Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821525"><span class="hs-identifier hs-var hs-var">tyName</span></a></span></span><span> </span><span id="local-6989586621681821487"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821487"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Element Reference
forall r. r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TypeReference"><span class="hs-identifier hs-var">S.TypeReference</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821487"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; (HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821488"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PrettyPrintEnv.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821487"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1437"></span><span>        </span><span id="local-6989586621681821523"><span class="annot"><span class="annottext">tmName :: Referent' Reference -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821523"><span class="hs-identifier hs-var hs-var">tmName</span></a></span></span><span> </span><span id="local-6989586621681821486"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821486"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.TermPrinter.html#fmt"><span class="hs-identifier hs-var">fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#TermReference"><span class="hs-identifier hs-var">S.TermReference</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821486"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; (HashQualified Name -&gt; HashQualified Name)
-&gt; HashQualified Name
-&gt; Pretty (SyntaxText' Reference)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Imports -&gt; HashQualified Name -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.FQN.html#elideFQN"><span class="hs-identifier hs-var">elideFQN</span></a></span><span> </span><span class="annot"><span class="annottext">Imports
</span><a href="#local-6989586621681821488"><span class="hs-identifier hs-var">im</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821599"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821486"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-1438"></span><span>        </span><span id="local-6989586621681821570"><span class="annot"><span class="annottext">rec :: Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var hs-var">rec</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821594"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><a href="#local-6989586621681821579"><span class="hs-identifier hs-var">hdr</span></a></span><span>
</span><span id="line-1439"></span><span>        </span><span id="local-6989586621681821575"><span class="annot"><span class="annottext">sepBlankline :: [Term3 v PrintAnnotation] -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821575"><span class="hs-identifier hs-var hs-var">sepBlankline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
-&gt; (Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference))
-&gt; [Term3 v PrintAnnotation]
-&gt; Pretty (SyntaxText' Reference)
forall (t :: * -&gt; *) a b.
(Foldable t, Monoid a) =&gt;
a -&gt; (b -&gt; a) -&gt; t b -&gt; a
</span><span class="hs-identifier hs-var">intercalateMap</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference)
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Pretty (SyntaxText' Reference)
</span><a href="#local-6989586621681821570"><span class="hs-identifier hs-var">rec</span></a></span><span>
</span><span id="line-1440"></span><span>
</span><span id="line-1441"></span><span id="local-6989586621681821485"><span class="annot"><a href="Unison.TermPrinter.html#toDocJoin"><span class="hs-identifier hs-type">toDocJoin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821485"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821485"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1442"></span><span id="toDocJoin"><span class="annot"><span class="annottext">toDocJoin :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocJoin"><span class="hs-identifier hs-var hs-var">toDocJoin</span></a></span></span><span> </span><span id="local-6989586621681821484"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821484"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821483"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821483"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821482"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821482"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1443"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821484"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docJoin&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821483"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821482"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1444"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocJoin"><span class="hs-identifier hs-var">toDocJoin</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1445"></span><span>
</span><span id="line-1446"></span><span id="local-6989586621681822645"><span class="annot"><a href="Unison.TermPrinter.html#toDocUntitledSection"><span class="hs-identifier hs-type">toDocUntitledSection</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822645"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822645"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1447"></span><span id="toDocUntitledSection"><span class="annot"><span class="annottext">toDocUntitledSection :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocUntitledSection"><span class="hs-identifier hs-var hs-var">toDocUntitledSection</span></a></span></span><span> </span><span id="local-6989586621681821480"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821480"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821479"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821479"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821478"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821478"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1448"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821480"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docUntitledSection&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821479"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821478"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1449"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocUntitledSection"><span class="hs-identifier hs-var">toDocUntitledSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1450"></span><span>
</span><span id="line-1451"></span><span id="local-6989586621681821477"><span class="annot"><a href="Unison.TermPrinter.html#toDocColumn"><span class="hs-identifier hs-type">toDocColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821477"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821477"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1452"></span><span id="toDocColumn"><span class="annot"><span class="annottext">toDocColumn :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocColumn"><span class="hs-identifier hs-var hs-var">toDocColumn</span></a></span></span><span> </span><span id="local-6989586621681821476"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821476"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821475"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821475"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821474"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821474"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1453"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821476"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docColumn&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821475"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821474"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1454"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocColumn"><span class="hs-identifier hs-var">toDocColumn</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1455"></span><span>
</span><span id="line-1456"></span><span id="local-6989586621681821473"><span class="annot"><a href="Unison.TermPrinter.html#toDocGroup"><span class="hs-identifier hs-type">toDocGroup</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821473"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821473"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1457"></span><span id="toDocGroup"><span class="annot"><span class="annottext">toDocGroup :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocGroup"><span class="hs-identifier hs-var hs-var">toDocGroup</span></a></span></span><span> </span><span id="local-6989586621681821472"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821472"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821471"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821471"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821470"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821470"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1458"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821472"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docGroup&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821471"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821470"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1459"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocGroup"><span class="hs-identifier hs-var">toDocGroup</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1460"></span><span>
</span><span id="line-1461"></span><span id="local-6989586621681822632"><span class="annot"><a href="Unison.TermPrinter.html#toDocWord"><span class="hs-identifier hs-type">toDocWord</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822632"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span><span>
</span><span id="line-1462"></span><span id="toDocWord"><span class="annot"><span class="annottext">toDocWord :: PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
</span><a href="Unison.TermPrinter.html#toDocWord"><span class="hs-identifier hs-var hs-var">toDocWord</span></a></span></span><span> </span><span id="local-6989586621681821469"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821469"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821468"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821468"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text'</span></span><span> </span><span id="local-6989586621681821467"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821467"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1463"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821469"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docWord&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821468"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821467"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-1464"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocWord"><span class="hs-identifier hs-var">toDocWord</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1465"></span><span>
</span><span id="line-1466"></span><span id="local-6989586621681821466"><span class="annot"><a href="Unison.TermPrinter.html#toDocBold"><span class="hs-identifier hs-type">toDocBold</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821466"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821466"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1467"></span><span id="toDocBold"><span class="annot"><span class="annottext">toDocBold :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocBold"><span class="hs-identifier hs-var hs-var">toDocBold</span></a></span></span><span> </span><span id="local-6989586621681821465"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821465"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821464"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821464"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821463"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821463"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1468"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821465"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docBold&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821464"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821463"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1469"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocBold"><span class="hs-identifier hs-var">toDocBold</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1470"></span><span>
</span><span id="line-1471"></span><span id="local-6989586621681821462"><span class="annot"><a href="Unison.TermPrinter.html#toDocCode"><span class="hs-identifier hs-type">toDocCode</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821462"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821462"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1472"></span><span id="toDocCode"><span class="annot"><span class="annottext">toDocCode :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocCode"><span class="hs-identifier hs-var hs-var">toDocCode</span></a></span></span><span> </span><span id="local-6989586621681821461"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821461"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821460"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821460"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821459"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821459"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1473"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821461"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docCode&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821460"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821459"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1474"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocCode"><span class="hs-identifier hs-var">toDocCode</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1475"></span><span>
</span><span id="line-1476"></span><span id="local-6989586621681822623"><span class="annot"><a href="Unison.TermPrinter.html#toDocCodeBlock"><span class="hs-identifier hs-type">toDocCodeBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822623"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-1477"></span><span id="toDocCodeBlock"><span class="annot"><span class="annottext">toDocCodeBlock :: PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe (Text, Text)
</span><a href="Unison.TermPrinter.html#toDocCodeBlock"><span class="hs-identifier hs-var hs-var">toDocCodeBlock</span></a></span></span><span> </span><span id="local-6989586621681821458"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821458"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821456"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821456"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Text'</span></span><span> </span><span id="local-6989586621681821455"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821455"><span class="hs-identifier hs-var">typ</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text'</span></span><span> </span><span id="local-6989586621681821454"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821454"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1478"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821458"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docCodeBlock&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821456"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Text, Text) -&gt; Maybe (Text, Text)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821455"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821454"><span class="hs-identifier hs-var">txt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1479"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocCodeBlock"><span class="hs-identifier hs-var">toDocCodeBlock</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Text, Text)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1480"></span><span>
</span><span id="line-1481"></span><span id="local-6989586621681821453"><span class="annot"><a href="Unison.TermPrinter.html#toDocVerbatim"><span class="hs-identifier hs-type">toDocVerbatim</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821453"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span></span><span>
</span><span id="line-1482"></span><span id="toDocVerbatim"><span class="annot"><span class="annottext">toDocVerbatim :: PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
</span><a href="Unison.TermPrinter.html#toDocVerbatim"><span class="hs-identifier hs-var hs-var">toDocVerbatim</span></a></span></span><span> </span><span id="local-6989586621681821452"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821452"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821451"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821451"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
forall v. PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Text
</span><a href="Unison.TermPrinter.html#toDocWord"><span class="hs-identifier hs-var">toDocWord</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821452"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821450"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821450"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1483"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821452"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docVerbatim&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821451"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821450"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-1484"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocVerbatim"><span class="hs-identifier hs-var">toDocVerbatim</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1485"></span><span>
</span><span id="line-1486"></span><span id="local-6989586621681822629"><span class="annot"><a href="Unison.TermPrinter.html#toDocEval"><span class="hs-identifier hs-type">toDocEval</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822629"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822629"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822629"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1487"></span><span id="toDocEval"><span class="annot"><span class="annottext">toDocEval :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEval"><span class="hs-identifier hs-var hs-var">toDocEval</span></a></span></span><span> </span><span id="local-6989586621681821449"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821449"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821448"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821448"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span id="local-6989586621681821447"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821447"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1488"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821449"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEval&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821448"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821447"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1489"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821448"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.TermPrinter.html#_oldDocEval"><span class="hs-identifier hs-var">_oldDocEval</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821447"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1490"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEval"><span class="hs-identifier hs-var">toDocEval</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1491"></span><span>
</span><span id="line-1492"></span><span class="hs-comment">-- Old hashes for docEval, docEvalInline w/ incorrect type signatures.</span><span>
</span><span id="line-1493"></span><span class="hs-comment">-- They are still used by some existing docs so the pretty-printer</span><span>
</span><span id="line-1494"></span><span class="hs-comment">-- recognizes it.</span><span>
</span><span id="line-1495"></span><span class="hs-comment">--</span><span>
</span><span id="line-1496"></span><span class="hs-comment">-- See https://github.com/unisonweb/unison/issues/2238</span><span>
</span><span id="line-1497"></span><span class="annot"><a href="Unison.TermPrinter.html#_oldDocEval"><span class="hs-identifier hs-type">_oldDocEval</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#_oldDocEvalInline"><span class="hs-identifier hs-type">_oldDocEvalInline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span>
</span><span id="line-1498"></span><span id="_oldDocEval"><span class="annot"><span class="annottext">_oldDocEval :: Reference
</span><a href="Unison.TermPrinter.html#_oldDocEval"><span class="hs-identifier hs-var hs-var">_oldDocEval</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Reference
</span><span class="hs-identifier hs-var">Reference.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#0ua7gqa7kqnj80ulhmtcqsfgalmh4g9kg198dt2uen0s0jeebbo4ljnj4133cn1kbm38i2q3joivodtfei3jfln5scof0r0381k8dm0&quot;</span></span><span>
</span><span id="line-1499"></span><span id="_oldDocEvalInline"><span class="annot"><span class="annottext">_oldDocEvalInline :: Reference
</span><a href="Unison.TermPrinter.html#_oldDocEvalInline"><span class="hs-identifier hs-var hs-var">_oldDocEvalInline</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Reference
</span><span class="hs-identifier hs-var">Reference.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;#maleg6fmu3j0k0vgm99lgrsnhio3ba750hcainuv5jdi9scdsg43hpicmf6lovsa0mnaija7bjebnr5nas3qsj4r087hur1jh0rsfso&quot;</span></span><span>
</span><span id="line-1500"></span><span>
</span><span id="line-1501"></span><span id="local-6989586621681821443"><span class="annot"><a href="Unison.TermPrinter.html#toDocEvalInline"><span class="hs-identifier hs-type">toDocEvalInline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821443"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821443"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821443"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1502"></span><span id="toDocEvalInline"><span class="annot"><span class="annottext">toDocEvalInline :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEvalInline"><span class="hs-identifier hs-var hs-var">toDocEvalInline</span></a></span></span><span> </span><span id="local-6989586621681821442"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821442"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821441"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821441"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span id="local-6989586621681821440"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821440"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1503"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821442"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEvalInline&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821441"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821440"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1504"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821441"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.TermPrinter.html#_oldDocEvalInline"><span class="hs-identifier hs-var">_oldDocEvalInline</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821440"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1505"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEvalInline"><span class="hs-identifier hs-var">toDocEvalInline</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1506"></span><span>
</span><span id="line-1507"></span><span id="local-6989586621681821439"><span class="annot"><a href="Unison.TermPrinter.html#toDocExample"><span class="hs-identifier hs-type">toDocExample</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#toDocExampleBlock"><span class="hs-identifier hs-type">toDocExampleBlock</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821439"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821439"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821439"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1508"></span><span id="toDocExample"><span class="annot"><span class="annottext">toDocExample :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExample"><span class="hs-identifier hs-var hs-var">toDocExample</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExample%27"><span class="hs-identifier hs-var">toDocExample'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docExample&quot;</span></span><span>
</span><span id="line-1509"></span><span id="toDocExampleBlock"><span class="annot"><span class="annottext">toDocExampleBlock :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExampleBlock"><span class="hs-identifier hs-var hs-var">toDocExampleBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation)
forall v.
Ord v =&gt;
Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExample%27"><span class="hs-identifier hs-var">toDocExample'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docExampleBlock&quot;</span></span><span>
</span><span id="line-1510"></span><span>
</span><span id="line-1511"></span><span id="local-6989586621681822610"><span class="annot"><a href="Unison.TermPrinter.html#toDocExample%27"><span class="hs-identifier hs-type">toDocExample'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822610"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822610"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822610"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1512"></span><span id="toDocExample%27"><span class="annot"><span class="annottext">toDocExample' :: Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocExample%27"><span class="hs-identifier hs-var hs-var">toDocExample'</span></a></span></span><span> </span><span id="local-6989586621681821437"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821437"><span class="hs-identifier hs-var">suffix</span></a></span></span><span> </span><span id="local-6989586621681821436"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821436"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821435"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821435"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Nat'</span></span><span> </span><span id="local-6989586621681821434"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821434"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821433"><span class="annot"><span class="annottext">l :: Term3 v PrintAnnotation
</span><a href="#local-6989586621681821433"><span class="hs-identifier hs-var">l</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LamsNamed'</span></span><span> </span><span id="local-6989586621681821431"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821431"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681821430"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821430"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1513"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821436"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821437"><span class="hs-identifier hs-var">suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821435"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1514"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Set v
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821433"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span>
</span><span id="line-1515"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Bool
forall v vt at ap a. Ord v =&gt; Term2 vt at ap v a -&gt; Bool
</span><a href="#local-6989586621681821429"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821430"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1516"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrintAnnotation
-&gt; [v] -&gt; Term3 v PrintAnnotation -&gt; Term3 v PrintAnnotation
forall v a vt at ap.
Ord v =&gt;
a -&gt; [v] -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">lam'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; PrintAnnotation
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">ABT.annotation</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821433"><span class="hs-identifier hs-var">l</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; [v] -&gt; [v]
forall a. Int -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821434"><span class="hs-identifier hs-var">n</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681821431"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821430"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1517"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1518"></span><span>    </span><span id="local-6989586621681821429"><span class="annot"><span class="annottext">ok :: Term2 vt at ap v a -&gt; Bool
</span><a href="#local-6989586621681821429"><span class="hs-identifier hs-var hs-var">ok</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span id="local-6989586621681821427"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821427"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Term2 vt at ap v a]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a -&gt; Set v
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821427"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1519"></span><span>    </span><span class="annot"><a href="#local-6989586621681821429"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span id="local-6989586621681821426"><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821426"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a -&gt; Set v
forall (f :: * -&gt; *) v a. Term f v a -&gt; Set v
</span><span class="hs-identifier hs-var hs-var">ABT.freeVars</span></span><span> </span><span class="annot"><span class="annottext">Term2 vt at ap v a
</span><a href="#local-6989586621681821426"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">Set v -&gt; Set v -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Set v
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-1520"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocExample%27"><span class="hs-identifier hs-var">toDocExample'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1521"></span><span>
</span><span id="line-1522"></span><span id="local-6989586621681822637"><span class="annot"><a href="Unison.TermPrinter.html#toDocTransclude"><span class="hs-identifier hs-type">toDocTransclude</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822637"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822637"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1523"></span><span id="toDocTransclude"><span class="annot"><span class="annottext">toDocTransclude :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocTransclude"><span class="hs-identifier hs-var hs-var">toDocTransclude</span></a></span></span><span> </span><span id="local-6989586621681821425"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821425"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821424"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821424"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821423"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821423"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1524"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821425"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docTransclude&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821424"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821423"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1525"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocTransclude"><span class="hs-identifier hs-var">toDocTransclude</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1526"></span><span>
</span><span id="line-1527"></span><span id="local-6989586621681822630"><span class="annot"><a href="Unison.TermPrinter.html#toDocLink"><span class="hs-identifier hs-type">toDocLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822630"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822630"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-1528"></span><span id="toDocLink"><span class="annot"><span class="annottext">toDocLink :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
</span><a href="Unison.TermPrinter.html#toDocLink"><span class="hs-identifier hs-var hs-var">toDocLink</span></a></span></span><span> </span><span id="local-6989586621681821422"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821422"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821421"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821421"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821420"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821420"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1529"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821422"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821421"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821420"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1530"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedTermLink"><span class="hs-identifier hs-var">toDocEmbedTermLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821422"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821418"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821418"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Reference (Referent' Reference)
-&gt; Maybe (Either Reference (Referent' Reference))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent' Reference -&gt; Either Reference (Referent' Reference)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821418"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1531"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Reference
forall v.
PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Reference
</span><a href="Unison.TermPrinter.html#toDocEmbedTypeLink"><span class="hs-identifier hs-var">toDocEmbedTypeLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821422"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821416"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821416"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Either Reference (Referent' Reference)
-&gt; Maybe (Either Reference (Referent' Reference))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Either Reference (Referent' Reference)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821416"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1532"></span><span>    </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (Either Reference (Referent' Reference))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1533"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocLink"><span class="hs-identifier hs-var">toDocLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Either Reference (Referent' Reference))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1534"></span><span>
</span><span id="line-1535"></span><span id="local-6989586621681822631"><span class="annot"><a href="Unison.TermPrinter.html#toDocNamedLink"><span class="hs-identifier hs-type">toDocNamedLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822631"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822631"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822631"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1536"></span><span id="toDocNamedLink"><span class="annot"><span class="annottext">toDocNamedLink :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocNamedLink"><span class="hs-identifier hs-var hs-var">toDocNamedLink</span></a></span></span><span> </span><span id="local-6989586621681821415"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821415"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821414"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821414"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681821413"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821413"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621681821412"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821412"><span class="hs-identifier hs-var">target</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1537"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821415"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docNamedLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821414"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, Term3 v PrintAnnotation)
-&gt; Maybe (Term3 v PrintAnnotation, Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821413"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821412"><span class="hs-identifier hs-var">target</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1538"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocNamedLink"><span class="hs-identifier hs-var">toDocNamedLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation, Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1539"></span><span>
</span><span id="line-1540"></span><span id="local-6989586621681821411"><span class="annot"><a href="Unison.TermPrinter.html#toDocItalic"><span class="hs-identifier hs-type">toDocItalic</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821411"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821411"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1541"></span><span id="toDocItalic"><span class="annot"><span class="annottext">toDocItalic :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocItalic"><span class="hs-identifier hs-var hs-var">toDocItalic</span></a></span></span><span> </span><span id="local-6989586621681821410"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821410"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821409"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821409"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821408"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821408"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1542"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821410"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docItalic&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821409"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821408"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1543"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocItalic"><span class="hs-identifier hs-var">toDocItalic</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1544"></span><span>
</span><span id="line-1545"></span><span id="local-6989586621681821407"><span class="annot"><a href="Unison.TermPrinter.html#toDocStrikethrough"><span class="hs-identifier hs-type">toDocStrikethrough</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821407"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821407"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1546"></span><span id="toDocStrikethrough"><span class="annot"><span class="annottext">toDocStrikethrough :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocStrikethrough"><span class="hs-identifier hs-var hs-var">toDocStrikethrough</span></a></span></span><span> </span><span id="local-6989586621681821406"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821406"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821405"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821405"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821404"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821404"><span class="hs-identifier hs-var">doc</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1547"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821406"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docStrikethrough&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821405"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821404"><span class="hs-identifier hs-var">doc</span></a></span><span>
</span><span id="line-1548"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocStrikethrough"><span class="hs-identifier hs-var">toDocStrikethrough</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1549"></span><span>
</span><span id="line-1550"></span><span id="local-6989586621681821403"><span class="annot"><a href="Unison.TermPrinter.html#toDocParagraph"><span class="hs-identifier hs-type">toDocParagraph</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821403"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821403"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1551"></span><span id="toDocParagraph"><span class="annot"><span class="annottext">toDocParagraph :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocParagraph"><span class="hs-identifier hs-var hs-var">toDocParagraph</span></a></span></span><span> </span><span id="local-6989586621681821402"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821402"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821401"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821401"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821400"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821400"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1552"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821402"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docParagraph&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821401"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821400"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1553"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocParagraph"><span class="hs-identifier hs-var">toDocParagraph</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1554"></span><span>
</span><span id="line-1555"></span><span id="local-6989586621681821399"><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedTermLink"><span class="hs-identifier hs-type">toDocEmbedTermLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821399"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821399"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span></span><span>
</span><span id="line-1556"></span><span id="toDocEmbedTermLink"><span class="annot"><span class="annottext">toDocEmbedTermLink :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedTermLink"><span class="hs-identifier hs-var hs-var">toDocEmbedTermLink</span></a></span></span><span> </span><span id="local-6989586621681821398"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821398"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821397"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821397"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent'</span></span><span> </span><span id="local-6989586621681821395"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821395"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1557"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821398"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEmbedTermLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821397"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Maybe (Referent' Reference)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821395"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1558"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedTermLink"><span class="hs-identifier hs-var">toDocEmbedTermLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Referent' Reference)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1559"></span><span>
</span><span id="line-1560"></span><span id="local-6989586621681822593"><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedTypeLink"><span class="hs-identifier hs-type">toDocEmbedTypeLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822593"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span></span><span>
</span><span id="line-1561"></span><span id="toDocEmbedTypeLink"><span class="annot"><span class="annottext">toDocEmbedTypeLink :: PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Reference
</span><a href="Unison.TermPrinter.html#toDocEmbedTypeLink"><span class="hs-identifier hs-var hs-var">toDocEmbedTypeLink</span></a></span></span><span> </span><span id="local-6989586621681821394"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821394"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821393"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821393"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TypeLink'</span></span><span> </span><span id="local-6989586621681821392"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821392"><span class="hs-identifier hs-var">typeref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1562"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821394"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEmbedTypeLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821393"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Maybe Reference
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821392"><span class="hs-identifier hs-var">typeref</span></a></span><span>
</span><span id="line-1563"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedTypeLink"><span class="hs-identifier hs-var">toDocEmbedTypeLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Reference
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1564"></span><span>
</span><span id="line-1565"></span><span id="local-6989586621681821391"><span class="annot"><a href="Unison.TermPrinter.html#toDocSourceAnnotations"><span class="hs-identifier hs-type">toDocSourceAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821391"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821391"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-1566"></span><span id="toDocSourceAnnotations"><span class="annot"><span class="annottext">toDocSourceAnnotations :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
</span><a href="Unison.TermPrinter.html#toDocSourceAnnotations"><span class="hs-identifier hs-var hs-var">toDocSourceAnnotations</span></a></span></span><span> </span><span id="local-6989586621681821389"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821389"><span class="hs-identifier hs-var">_ppe</span></a></span></span><span> </span><span id="local-6989586621681821388"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821388"><span class="hs-identifier hs-var">_tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Referent' Reference] -&gt; Maybe [Referent' Reference]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-comment">-- todo fetch annotations</span><span>
</span><span id="line-1567"></span><span>
</span><span id="line-1568"></span><span id="local-6989586621681822579"><span class="annot"><a href="Unison.TermPrinter.html#toDocSourceElement"><span class="hs-identifier hs-type">toDocSourceElement</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822579"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822579"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-1569"></span><span id="toDocSourceElement"><span class="annot"><span class="annottext">toDocSourceElement :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     (Either Reference (Referent' Reference), [Referent' Reference])
</span><a href="Unison.TermPrinter.html#toDocSourceElement"><span class="hs-identifier hs-var hs-var">toDocSourceElement</span></a></span></span><span> </span><span id="local-6989586621681821386"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821386"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821385"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821385"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681821384"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821384"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
</span><a href="Unison.TermPrinter.html#toDocSourceAnnotations"><span class="hs-identifier hs-var">toDocSourceAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821386"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821383"><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821383"><span class="hs-identifier hs-var">annotations</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1570"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821386"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docSourceElement&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821385"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1571"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821383"><span class="hs-identifier hs-var">annotations</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either Reference (Referent' Reference)
 -&gt; (Either Reference (Referent' Reference), [Referent' Reference]))
-&gt; Maybe (Either Reference (Referent' Reference))
-&gt; Maybe
     (Either Reference (Referent' Reference), [Referent' Reference])
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
forall v.
Ord v =&gt;
Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
</span><a href="#local-6989586621681821382"><span class="hs-identifier hs-var">ok</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821384"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1572"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1573"></span><span>    </span><span id="local-6989586621681821382"><span class="annot"><span class="annottext">ok :: Term3 v PrintAnnotation
-&gt; Maybe (Either Reference (Referent' Reference))
</span><a href="#local-6989586621681821382"><span class="hs-identifier hs-var hs-var">ok</span></a></span></span><span> </span><span id="local-6989586621681821381"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821381"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1574"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Referent' Reference -&gt; Either Reference (Referent' Reference)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Referent' Reference -&gt; Either Reference (Referent' Reference))
-&gt; Maybe (Referent' Reference)
-&gt; Maybe (Either Reference (Referent' Reference))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedTermLink"><span class="hs-identifier hs-var">toDocEmbedTermLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821386"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821381"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1575"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Either Reference (Referent' Reference))
-&gt; Maybe (Either Reference (Referent' Reference))
-&gt; Maybe (Either Reference (Referent' Reference))
forall (f :: * -&gt; *) a. Alternative f =&gt; f a -&gt; f a -&gt; f a
</span><span class="hs-operator hs-var">&lt;|&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Either Reference (Referent' Reference)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; Either Reference (Referent' Reference))
-&gt; Maybe Reference
-&gt; Maybe (Either Reference (Referent' Reference))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Reference
forall v.
PrettyPrintEnv -&gt; Term3 v PrintAnnotation -&gt; Maybe Reference
</span><a href="Unison.TermPrinter.html#toDocEmbedTypeLink"><span class="hs-identifier hs-var">toDocEmbedTypeLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821386"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821381"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1576"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocSourceElement"><span class="hs-identifier hs-var">toDocSourceElement</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  (Either Reference (Referent' Reference), [Referent' Reference])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1577"></span><span>
</span><span id="line-1578"></span><span id="local-6989586621681822577"><span class="annot"><a href="Unison.TermPrinter.html#toDocSource%27"><span class="hs-identifier hs-type">toDocSource'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1579"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822577"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1580"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1581"></span><span>  </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1582"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822577"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1583"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1584"></span><span id="toDocSource%27"><span class="annot"><span class="annottext">toDocSource' :: Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocSource%27"><span class="hs-identifier hs-var hs-var">toDocSource'</span></a></span></span><span> </span><span id="local-6989586621681821378"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821378"><span class="hs-identifier hs-var">suffix</span></a></span></span><span> </span><span id="local-6989586621681821377"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821377"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821376"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821376"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821375"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821375"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1585"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821377"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821378"><span class="hs-identifier hs-var">suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821376"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1586"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">(Either Reference (Referent' Reference), [Referent' Reference])
</span><a href="#local-6989586621681821374"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821374"><span class="annot"><span class="annottext">(Either Reference (Referent' Reference), [Referent' Reference])
</span><a href="#local-6989586621681821374"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     (Either Reference (Referent' Reference), [Referent' Reference])
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     (Either Reference (Referent' Reference), [Referent' Reference])
</span><a href="Unison.TermPrinter.html#toDocSourceElement"><span class="hs-identifier hs-var">toDocSourceElement</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821377"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation
 -&gt; Maybe
      (Either Reference (Referent' Reference), [Referent' Reference]))
-&gt; [Term3 v PrintAnnotation]
-&gt; [Maybe
      (Either Reference (Referent' Reference), [Referent' Reference])]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821375"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1587"></span><span>      </span><span id="local-6989586621681821373"><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821373"><span class="hs-identifier hs-var">tms'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
-&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821373"><span class="hs-identifier hs-var">tms'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821375"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="#local-6989586621681821373"><span class="hs-identifier hs-var">tms'</span></a></span><span>
</span><span id="line-1588"></span><span>      </span><span class="annot"><span class="annottext">[(Either Reference (Referent' Reference), [Referent' Reference])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe
  [(Either Reference (Referent' Reference), [Referent' Reference])]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1589"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocSource%27"><span class="hs-identifier hs-var">toDocSource'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe
  [(Either Reference (Referent' Reference), [Referent' Reference])]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1590"></span><span>
</span><span id="line-1591"></span><span id="local-6989586621681822628"><span class="annot"><a href="Unison.TermPrinter.html#toDocSource"><span class="hs-identifier hs-type">toDocSource</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1592"></span><span>  </span><span class="annot"><a href="Unison.TermPrinter.html#toDocFoldedSource"><span class="hs-identifier hs-type">toDocFoldedSource</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1593"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822628"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1594"></span><span>    </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1595"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822628"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1596"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span></span><span>
</span><span id="line-1597"></span><span id="toDocSource"><span class="annot"><span class="annottext">toDocSource :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocSource"><span class="hs-identifier hs-var hs-var">toDocSource</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
forall v.
Ord v =&gt;
Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocSource%27"><span class="hs-identifier hs-var">toDocSource'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docSource&quot;</span></span><span>
</span><span id="line-1598"></span><span id="toDocFoldedSource"><span class="annot"><span class="annottext">toDocFoldedSource :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocFoldedSource"><span class="hs-identifier hs-var hs-var">toDocFoldedSource</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
forall v.
Ord v =&gt;
Text
-&gt; PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe
     [(Either Reference (Referent' Reference), [Referent' Reference])]
</span><a href="Unison.TermPrinter.html#toDocSource%27"><span class="hs-identifier hs-var">toDocSource'</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docFoldedSource&quot;</span></span><span>
</span><span id="line-1599"></span><span>
</span><span id="line-1600"></span><span id="local-6989586621681822625"><span class="annot"><a href="Unison.TermPrinter.html#toDocSignatureInline"><span class="hs-identifier hs-type">toDocSignatureInline</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822625"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822625"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span></span><span>
</span><span id="line-1601"></span><span id="toDocSignatureInline"><span class="annot"><span class="annottext">toDocSignatureInline :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocSignatureInline"><span class="hs-identifier hs-var hs-var">toDocSignatureInline</span></a></span></span><span> </span><span id="local-6989586621681821372"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821372"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821371"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821371"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedSignatureLink"><span class="hs-identifier hs-var">toDocEmbedSignatureLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821372"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821369"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821369"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1602"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821372"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docSignatureInline&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821371"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Maybe (Referent' Reference)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821369"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1603"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocSignatureInline"><span class="hs-identifier hs-var">toDocSignatureInline</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Referent' Reference)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1604"></span><span>
</span><span id="line-1605"></span><span id="local-6989586621681821368"><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedSignatureLink"><span class="hs-identifier hs-type">toDocEmbedSignatureLink</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681821368"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821368"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span></span><span>
</span><span id="line-1606"></span><span id="toDocEmbedSignatureLink"><span class="annot"><span class="annottext">toDocEmbedSignatureLink :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedSignatureLink"><span class="hs-identifier hs-var hs-var">toDocEmbedSignatureLink</span></a></span></span><span> </span><span id="local-6989586621681821367"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821367"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821366"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821366"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Delay'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent'</span></span><span> </span><span id="local-6989586621681821365"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821365"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1607"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821367"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEmbedSignatureLink&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821366"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent' Reference -&gt; Maybe (Referent' Reference)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821365"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1608"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedSignatureLink"><span class="hs-identifier hs-var">toDocEmbedSignatureLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Referent' Reference)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1609"></span><span>
</span><span id="line-1610"></span><span id="local-6989586621681821364"><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedAnnotation"><span class="hs-identifier hs-type">toDocEmbedAnnotation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821364"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821364"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-1611"></span><span id="toDocEmbedAnnotation"><span class="annot"><span class="annottext">toDocEmbedAnnotation :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEmbedAnnotation"><span class="hs-identifier hs-var hs-var">toDocEmbedAnnotation</span></a></span></span><span> </span><span id="local-6989586621681821362"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821362"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821361"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821361"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621681821360"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821360"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-1612"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821362"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEmbedAnnotation&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821361"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821360"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-1613"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedAnnotation"><span class="hs-identifier hs-var">toDocEmbedAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1614"></span><span>
</span><span id="line-1615"></span><span id="local-6989586621681821359"><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedAnnotations"><span class="hs-identifier hs-type">toDocEmbedAnnotations</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821359"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821359"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1616"></span><span id="toDocEmbedAnnotations"><span class="annot"><span class="annottext">toDocEmbedAnnotations :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocEmbedAnnotations"><span class="hs-identifier hs-var hs-var">toDocEmbedAnnotations</span></a></span></span><span> </span><span id="local-6989586621681821357"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821357"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821356"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821356"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821355"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821355"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1617"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821357"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docEmbedAnnotations&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821356"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1618"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821354"><span class="hs-identifier hs-var">ann</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821354"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821354"><span class="hs-identifier hs-var">ann</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
forall v.
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation)
</span><a href="Unison.TermPrinter.html#toDocEmbedAnnotation"><span class="hs-identifier hs-var">toDocEmbedAnnotation</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821357"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Maybe (Term3 v PrintAnnotation))
-&gt; [Term3 v PrintAnnotation] -&gt; [Maybe (Term3 v PrintAnnotation)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821355"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1619"></span><span>      </span><span id="local-6989586621681821353"><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821353"><span class="hs-identifier hs-var">tms'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821353"><span class="hs-identifier hs-var">tms'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821355"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><a href="#local-6989586621681821353"><span class="hs-identifier hs-var">tms'</span></a></span><span>
</span><span id="line-1620"></span><span>      </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1621"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocEmbedAnnotations"><span class="hs-identifier hs-var">toDocEmbedAnnotations</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1622"></span><span>
</span><span id="line-1623"></span><span id="local-6989586621681822624"><span class="annot"><a href="Unison.TermPrinter.html#toDocSignature"><span class="hs-identifier hs-type">toDocSignature</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621681822624"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822624"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span class="hs-special">]</span></span><span>
</span><span id="line-1624"></span><span id="toDocSignature"><span class="annot"><span class="annottext">toDocSignature :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Referent' Reference]
</span><a href="Unison.TermPrinter.html#toDocSignature"><span class="hs-identifier hs-var hs-var">toDocSignature</span></a></span></span><span> </span><span id="local-6989586621681821352"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821352"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821351"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821351"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821350"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821350"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1625"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821352"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docSignature&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821351"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1626"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821349"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681821349"><span class="annot"><span class="annottext">Referent' Reference
</span><a href="#local-6989586621681821349"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
forall v.
Ord v =&gt;
PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference)
</span><a href="Unison.TermPrinter.html#toDocEmbedSignatureLink"><span class="hs-identifier hs-var">toDocEmbedSignatureLink</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821352"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation -&gt; Maybe (Referent' Reference))
-&gt; [Term3 v PrintAnnotation] -&gt; [Maybe (Referent' Reference)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821350"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1627"></span><span>      </span><span id="local-6989586621681821348"><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821348"><span class="hs-identifier hs-var">tms'</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">[Referent' Reference] -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821348"><span class="hs-identifier hs-var">tms'</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; Int
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821350"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Referent' Reference] -&gt; Maybe [Referent' Reference]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">[Referent' Reference]
</span><a href="#local-6989586621681821348"><span class="hs-identifier hs-var">tms'</span></a></span><span>
</span><span id="line-1628"></span><span>      </span><span class="annot"><span class="annottext">[Referent' Reference]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [Referent' Reference]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1629"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocSignature"><span class="hs-identifier hs-var">toDocSignature</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Referent' Reference]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1630"></span><span>
</span><span id="line-1631"></span><span id="local-6989586621681821347"><span class="annot"><a href="Unison.TermPrinter.html#toDocBulletedList"><span class="hs-identifier hs-type">toDocBulletedList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821347"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681821347"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span></span><span>
</span><span id="line-1632"></span><span id="toDocBulletedList"><span class="annot"><span class="annottext">toDocBulletedList :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation -&gt; Maybe [Term3 v PrintAnnotation]
</span><a href="Unison.TermPrinter.html#toDocBulletedList"><span class="hs-identifier hs-var hs-var">toDocBulletedList</span></a></span></span><span> </span><span id="local-6989586621681821346"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821346"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">App'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821345"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821345"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821344"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821344"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1633"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821346"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docBulletedList&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821345"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Term3 v PrintAnnotation] -&gt; Maybe [Term3 v PrintAnnotation]
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821344"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1634"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocBulletedList"><span class="hs-identifier hs-var">toDocBulletedList</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe [Term3 v PrintAnnotation]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1635"></span><span>
</span><span id="line-1636"></span><span id="local-6989586621681822635"><span class="annot"><a href="Unison.TermPrinter.html#toDocNumberedList"><span class="hs-identifier hs-type">toDocNumberedList</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1637"></span><span>  </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1638"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822635"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1639"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822635"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-1640"></span><span id="toDocNumberedList"><span class="annot"><span class="annottext">toDocNumberedList :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Word64, [Term3 v PrintAnnotation])
</span><a href="Unison.TermPrinter.html#toDocNumberedList"><span class="hs-identifier hs-var hs-var">toDocNumberedList</span></a></span></span><span> </span><span id="local-6989586621681821343"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821343"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821342"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821342"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Nat'</span></span><span> </span><span id="local-6989586621681821341"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821341"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821340"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821340"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1641"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821343"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docNumberedList&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821342"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Word64, [Term3 v PrintAnnotation])
-&gt; Maybe (Word64, [Term3 v PrintAnnotation])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681821341"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821340"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1642"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocNumberedList"><span class="hs-identifier hs-var">toDocNumberedList</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Word64, [Term3 v PrintAnnotation])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1643"></span><span>
</span><span id="line-1644"></span><span id="local-6989586621681822644"><span class="annot"><a href="Unison.TermPrinter.html#toDocSection"><span class="hs-identifier hs-type">toDocSection</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1645"></span><span>  </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1646"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822644"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1647"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822644"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Term3</span></span><span> </span><span class="annot"><a href="#local-6989586621681822644"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="annot"><a href="Unison.TermPrinter.html#PrintAnnotation"><span class="hs-identifier hs-type">PrintAnnotation</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span></span><span>
</span><span id="line-1648"></span><span id="toDocSection"><span class="annot"><span class="annottext">toDocSection :: PrettyPrintEnv
-&gt; Term3 v PrintAnnotation
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
</span><a href="Unison.TermPrinter.html#toDocSection"><span class="hs-identifier hs-var hs-var">toDocSection</span></a></span></span><span> </span><span id="local-6989586621681821339"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821339"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Ref'</span></span><span> </span><span id="local-6989586621681821338"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821338"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span id="local-6989586621681821337"><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821337"><span class="hs-identifier hs-var">title</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">List'</span></span><span> </span><span id="local-6989586621681821336"><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821336"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1649"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var">nameEndsWith</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821339"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;.docSection&quot;</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821338"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
-&gt; Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><a href="#local-6989586621681821337"><span class="hs-identifier hs-var">title</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation) -&gt; [Term3 v PrintAnnotation]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term3 v PrintAnnotation)
</span><a href="#local-6989586621681821336"><span class="hs-identifier hs-var">tms</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1650"></span><span class="annot"><a href="Unison.TermPrinter.html#toDocSection"><span class="hs-identifier hs-var">toDocSection</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Term3 v PrintAnnotation
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (Term3 v PrintAnnotation, [Term3 v PrintAnnotation])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1651"></span><span>
</span><span id="line-1652"></span><span class="annot"><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-type">nameEndsWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-1653"></span><span id="nameEndsWith"><span class="annot"><span class="annottext">nameEndsWith :: PrettyPrintEnv -&gt; Text -&gt; Reference -&gt; Bool
</span><a href="Unison.TermPrinter.html#nameEndsWith"><span class="hs-identifier hs-var hs-var">nameEndsWith</span></a></span></span><span> </span><span id="local-6989586621681821335"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821335"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621681821334"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821334"><span class="hs-identifier hs-var">suffix</span></a></span></span><span> </span><span id="local-6989586621681821333"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821333"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent' Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PrettyPrintEnv.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681821335"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent' Reference
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681821333"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1654"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">HQ.NameOnly</span></span><span> </span><span id="local-6989586621681821332"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821332"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1655"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681821331"><span class="annot"><span class="annottext">tn :: Text
</span><a href="#local-6989586621681821331"><span class="hs-identifier hs-var hs-var">tn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><span class="hs-identifier hs-var">Name.toText</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621681821332"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-1656"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821331"><span class="hs-identifier hs-var">tn</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Text -&gt; Text
</span><span class="hs-identifier hs-var">Text.drop</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821334"><span class="hs-identifier hs-var">suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Bool
</span><span class="hs-identifier hs-var">Text.isSuffixOf</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821334"><span class="hs-identifier hs-var">suffix</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681821331"><span class="hs-identifier hs-var">tn</span></a></span><span>
</span><span id="line-1657"></span><span>  </span><span class="annot"><span class="annottext">HashQualified Name
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-1658"></span></pre></body></html>