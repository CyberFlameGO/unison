<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# Language PatternSynonyms #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# Language OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# Language ViewPatterns #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Unison.CommandLine.DisplayValues</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Prelude</span></span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Reference</span></span><span class="hs-special">)</span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Referent</span></span><span class="hs-special">)</span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Term</span></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Type</span></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Var</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Var</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ABT</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ABT</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Runtime.IOSource.html"><span class="hs-identifier">Unison.Runtime.IOSource</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html"><span class="hs-identifier">Unison.Builtin.Decls</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.DataDeclaration</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DD</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.DeclPrinter.html"><span class="hs-identifier">Unison.DeclPrinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DP</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.NamePrinter.html"><span class="hs-identifier">Unison.NamePrinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NP</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html"><span class="hs-identifier">Unison.PrettyPrintEnv</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.Util.html"><span class="hs-identifier">Unison.PrettyPrintEnv.Util</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnvDecl.html"><span class="hs-identifier">Unison.PrettyPrintEnvDecl</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PPE</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Referent</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Referent</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Reference</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Reference</span></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ShortHash</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SH</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.Term</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Term</span></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.TermPrinter.html"><span class="hs-identifier">Unison.TermPrinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TP</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.TypePrinter.html"><span class="hs-identifier">Unison.TypePrinter</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">TypePrinter</span></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html"><span class="hs-identifier">Unison.Util.Pretty</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Util.SyntaxText.html"><span class="hs-identifier">Unison.Util.SyntaxText</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">S</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Codebase.Editor.DisplayObject.html"><span class="hs-identifier">Unison.Codebase.Editor.DisplayObject</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DO</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.CommandLine.OutputMessages.html"><span class="hs-identifier">Unison.CommandLine.OutputMessages</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">OutputMessages</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Unison.ConstructorType</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CT</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Unison.Builtin.html"><span class="hs-identifier">Unison.Builtin</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Builtin</span></span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">type</span><span> </span><span id="Pretty"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-var">Pretty</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#Pretty"><span class="hs-identifier hs-type">P.Pretty</span></a></span><span> </span><span class="annot"><a href="Unison.Util.Pretty.html#ColorText"><span class="hs-identifier hs-type">P.ColorText</span></a></span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span id="local-6989586621681785930"><span id="local-6989586621681785931"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-type">displayTerm</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnvDecl.html#PrettyPrintEnvDecl"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></a></span><span>
</span><span id="line-41"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785931"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785930"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span></span></span><span>
</span><span id="line-47"></span><span id="displayTerm"><span class="annot"><span class="annottext">displayTerm :: PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var hs-var">displayTerm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var">displayTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="hs-comment">-- Whether to elide printing of `()` at the end of a block</span><span>
</span><span id="line-50"></span><span class="hs-comment">-- For instance, in:</span><span>
</span><span id="line-51"></span><span class="hs-comment">--</span><span>
</span><span id="line-52"></span><span class="hs-comment">--   id x = x</span><span>
</span><span id="line-53"></span><span class="hs-comment">--   ()</span><span>
</span><span id="line-54"></span><span class="hs-comment">--</span><span>
</span><span id="line-55"></span><span class="hs-comment">-- We could render it as above, with the `()` explicit, or just as:</span><span>
</span><span id="line-56"></span><span class="hs-comment">--</span><span>
</span><span id="line-57"></span><span class="hs-comment">--   id x = x</span><span>
</span><span id="line-58"></span><span class="hs-comment">--</span><span>
</span><span id="line-59"></span><span class="hs-keyword">type</span><span> </span><span id="ElideUnit"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#ElideUnit"><span class="hs-identifier hs-var">ElideUnit</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-60"></span><span>
</span><span id="line-61"></span><span id="local-6989586621681786092"><span id="local-6989586621681786094"><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-type">displayTerm'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#ElideUnit"><span class="hs-identifier hs-type">ElideUnit</span></a></span><span>
</span><span id="line-63"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnvDecl.html#PrettyPrintEnvDecl"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></a></span><span>
</span><span id="line-64"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-65"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786094"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786092"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span></span></span><span>
</span><span id="line-70"></span><span id="displayTerm%27"><span class="annot"><span class="annottext">displayTerm' :: ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var hs-var">displayTerm'</span></a></span></span><span> </span><span id="local-6989586621681785927"><span class="annot"><span class="annottext">ElideUnit
</span><a href="#local-6989586621681785927"><span class="hs-identifier hs-var">elideUnit</span></a></span></span><span> </span><span id="local-6989586621681785926"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785926"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621681785925"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785925"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621681785924"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785924"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621681785923"><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785923"><span class="hs-identifier hs-var">eval</span></a></span></span><span> </span><span id="local-6989586621681785922"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785922"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-71"></span><span>  </span><span id="local-6989586621681785921"><span class="annot"><span class="annottext">tm :: Term v ()
</span><a href="#local-6989586621681785921"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Apps'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span id="local-6989586621681785918"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785918"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[Term v ()]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785918"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; ElideUnit
forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Builtin.Decls.html#docRef"><span class="hs-identifier hs-var">DD.docRef</span></a></span><span>             </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-var">displayDoc</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785926"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785925"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785924"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785923"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785922"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785921"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-73"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785918"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; ElideUnit
forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Runtime.IOSource.html#doc2Ref"><span class="hs-identifier hs-var">DD.doc2Ref</span></a></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- Pretty.get (doc.formatConsole tm)</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785914"><span class="annot"><span class="annottext">tm' :: Term v ()
</span><a href="#local-6989586621681785914"><span class="hs-identifier hs-var hs-var">tm'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; Term v () -&gt; Term v () -&gt; Term v ()
forall v a vt at ap.
Ord v =&gt;
a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.app</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Reference -&gt; Term v ()
forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Runtime.IOSource.html#prettyGetRef"><span class="hs-identifier hs-var">DD.prettyGetRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-76"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Term v () -&gt; Term v () -&gt; Term v ()
forall v a vt at ap.
Ord v =&gt;
a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.app</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; Reference -&gt; Term v ()
forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Runtime.IOSource.html#doc2FormatConsoleRef"><span class="hs-identifier hs-var">DD.doc2FormatConsoleRef</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785921"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>      </span><span id="local-6989586621681785909"><span class="annot"><span class="annottext">Maybe (Term v ())
</span><a href="#local-6989586621681785909"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785923"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785914"><span class="hs-identifier hs-var">tm'</span></a></span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><a href="#local-6989586621681785909"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-79"></span><span>        </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; Pretty
forall v a. Var v =&gt; Term v a -&gt; Pretty
</span><a href="#local-6989586621681785908"><span class="hs-identifier hs-var">errMsg</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785914"><span class="hs-identifier hs-var">tm'</span></a></span><span>
</span><span id="line-80"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785907"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785907"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785926"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785925"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785924"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785923"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785922"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785907"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-81"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785918"><span class="hs-identifier hs-var">typ</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Reference -&gt; ElideUnit
forall a. Eq a =&gt; a -&gt; a -&gt; ElideUnit
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="Unison.Runtime.IOSource.html#prettyAnnotatedRef"><span class="hs-identifier hs-var">DD.prettyAnnotatedRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-var">displayPretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785926"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785925"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785924"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785923"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785922"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785921"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621681785904"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785904"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; Pretty
forall v a. Var v =&gt; Term v a -&gt; Pretty
</span><a href="#local-6989586621681785903"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785904"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-84"></span><span>    </span><span id="local-6989586621681785908"><span class="annot"><span class="annottext">errMsg :: Term v a -&gt; Pretty
</span><a href="#local-6989586621681785908"><span class="hs-identifier hs-var hs-var">errMsg</span></a></span></span><span> </span><span id="local-6989586621681785902"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785902"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#fatalCallout"><span class="hs-identifier hs-var">P.fatalCallout</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty] -&gt; Pretty
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">P.lines</span></a></span><span> </span><span class="hs-special">[</span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#wrap"><span class="hs-identifier hs-var">P.wrap</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;I couldn't render this document, because the&quot;</span></span><span>
</span><span id="line-86"></span><span>            </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;rendering function produced an error when&quot;</span></span><span>
</span><span id="line-87"></span><span>            </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;evaluating this expression:&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>      </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>      </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term v a -&gt; Pretty
forall v a. Var v =&gt; Term v a -&gt; Pretty
</span><a href="#local-6989586621681785903"><span class="hs-identifier hs-var">src</span></a></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785902"><span class="hs-identifier hs-var">tm</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>      </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&quot;</span></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. (ListLike s Char, IsString s) =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#wrap"><span class="hs-identifier hs-var">P.wrap</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;Sadly, I don't know the error, but you can evaluate&quot;</span></span><span>
</span><span id="line-92"></span><span>            </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;the above expression in a scratch file to see it.&quot;</span></span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-94"></span><span>    </span><span id="local-6989586621681785903"><span class="annot"><span class="annottext">src :: Term v a -&gt; Pretty
</span><a href="#local-6989586621681785903"><span class="hs-identifier hs-var hs-var">src</span></a></span></span><span> </span><span id="local-6989586621681785897"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785897"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ElideUnit -&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
forall v a.
Var v =&gt;
ElideUnit -&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><a href="Unison.TermPrinter.html#prettyBlock"><span class="hs-identifier hs-var">TP.prettyBlock</span></a></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><a href="#local-6989586621681785927"><span class="hs-identifier hs-var">elideUnit</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785926"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785897"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-95"></span><span>
</span><span id="line-96"></span><span class="hs-comment">-- assume this is given a</span><span>
</span><span id="line-97"></span><span class="hs-comment">-- Pretty.Annotated ann (Either SpecialForm ConsoleText)</span><span>
</span><span id="line-98"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-type">displayPretty</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681785894"><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621681785893"><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-99"></span><span>              </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnvDecl.html#PrettyPrintEnvDecl"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></a></span><span>
</span><span id="line-100"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-103"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681785894"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>              </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681785893"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-106"></span><span id="displayPretty"><span class="annot"><span class="annottext">displayPretty :: PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayPretty"><span class="hs-identifier hs-var hs-var">displayPretty</span></a></span></span><span> </span><span id="local-6989586621681785892"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621681785891"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621681785890"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621681785889"><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span></span><span> </span><span id="local-6989586621681785888"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span id="local-6989586621681785887"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785887"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785887"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621681785886"><span class="annot"><span class="annottext">go :: Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyEmpty"><span class="hs-identifier hs-type">DD.PrettyEmpty</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Pretty
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyGroup"><span class="hs-identifier hs-type">DD.PrettyGroup</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785883"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785883"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785883"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyLit"><span class="hs-identifier hs-type">DD.PrettyLit</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherLeft%27"><span class="hs-identifier hs-type">DD.EitherLeft'</span></a></span><span> </span><span id="local-6989586621681785878"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785878"><span class="hs-identifier hs-var">special</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785877"><span class="hs-identifier hs-var">goSpecial</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785878"><span class="hs-identifier hs-var">special</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyLit"><span class="hs-identifier hs-type">DD.PrettyLit</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherRight%27"><span class="hs-identifier hs-type">DD.EitherRight'</span></a></span><span> </span><span id="local-6989586621681785875"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785875"><span class="hs-identifier hs-var">consoleTxt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785875"><span class="hs-identifier hs-var">consoleTxt</span></a></span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyWrap"><span class="hs-identifier hs-type">DD.PrettyWrap</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785872"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785872"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(ColorText -&gt; [Pretty]) -&gt; Pretty -&gt; Pretty
forall s. IsString s =&gt; (s -&gt; [Pretty s]) -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#wrap%27"><span class="hs-identifier hs-var">P.wrap'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Pretty -&gt; [Pretty]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; [Pretty])
-&gt; (ColorText -&gt; Pretty) -&gt; ColorText -&gt; [Pretty]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ColorText -&gt; Pretty
forall s. (IsString s, ListLike s Char) =&gt; s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lit"><span class="hs-identifier hs-var">P.lit</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785872"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyOrElse"><span class="hs-identifier hs-type">DD.PrettyOrElse</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785867"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785867"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span id="local-6989586621681785866"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785866"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#orElse"><span class="hs-identifier hs-var">P.orElse</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m (Pretty -&gt; Pretty)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785867"><span class="hs-identifier hs-var">p1</span></a></span><span> </span><span class="annot"><span class="annottext">m (Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785866"><span class="hs-identifier hs-var">p2</span></a></span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyIndent"><span class="hs-identifier hs-type">DD.PrettyIndent</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785863"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785863"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span id="local-6989586621681785862"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785862"><span class="hs-identifier hs-var">afterNl</span></a></span></span><span> </span><span id="local-6989586621681785861"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785861"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-116"></span><span>      </span><span id="local-6989586621681785860"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785860"><span class="hs-identifier hs-var">initial</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785863"><span class="hs-identifier hs-var">initial</span></a></span><span>
</span><span id="line-117"></span><span>      </span><span id="local-6989586621681785859"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785859"><span class="hs-identifier hs-var">afterNl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785862"><span class="hs-identifier hs-var">afterNl</span></a></span><span>
</span><span id="line-118"></span><span>      </span><span id="local-6989586621681785858"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785858"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785861"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-119"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785860"><span class="hs-identifier hs-var">initial</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Pretty s -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentAfterNewline"><span class="hs-identifier hs-var">P.indentAfterNewline</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785859"><span class="hs-identifier hs-var">afterNl</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785858"><span class="hs-identifier hs-var">p</span></a></span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyAppend"><span class="hs-identifier hs-type">DD.PrettyAppend</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785855"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785855"><span class="hs-identifier hs-var">ps</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Pretty] -&gt; Pretty
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Pretty] -&gt; Pretty)
-&gt; (Seq Pretty -&gt; [Pretty]) -&gt; Seq Pretty -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Seq Pretty -&gt; [Pretty]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">(Seq Pretty -&gt; Pretty) -&gt; m (Seq Pretty) -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Term v () -&gt; m Pretty) -&gt; Seq (Term v ()) -&gt; m (Seq Pretty)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785855"><span class="hs-identifier hs-var">ps</span></a></span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#PrettyTable"><span class="hs-identifier hs-type">DD.PrettyTable</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785851"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785851"><span class="hs-identifier hs-var">rows</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty)
-&gt; ([[Pretty]] -&gt; Pretty) -&gt; [[Pretty]] -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[[Pretty]] -&gt; Pretty
forall s. (IsString s, ListLike s Char) =&gt; [[Pretty s]] -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#table"><span class="hs-identifier hs-var">P.table</span></a></span><span> </span><span class="annot"><span class="annottext">([[Pretty]] -&gt; Pretty) -&gt; m [[Pretty]] -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Term v () -&gt; m [Pretty]) -&gt; [Term v ()] -&gt; m [[Pretty]]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m [Pretty]
</span><a href="#local-6989586621681785849"><span class="hs-identifier hs-var">goRow</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term v ()) -&gt; [Term v ()]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785851"><span class="hs-identifier hs-var">rows</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-124"></span><span>        </span><span id="local-6989586621681785849"><span class="annot"><span class="annottext">goRow :: Term v () -&gt; m [Pretty]
</span><a href="#local-6989586621681785849"><span class="hs-identifier hs-var hs-var">goRow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621681785847"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785847"><span class="hs-identifier hs-var">row</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Term v () -&gt; m Pretty) -&gt; [Term v ()] -&gt; m [Pretty]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785886"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Seq (Term v ()) -&gt; [Term v ()]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785847"><span class="hs-identifier hs-var">row</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>        </span><span class="annot"><a href="#local-6989586621681785849"><span class="hs-identifier hs-var">goRow</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Pretty] -&gt; m [Pretty]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-126"></span><span>    </span><span id="local-6989586621681785846"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785846"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785846"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621681785845"><span class="annot"><span class="annottext">goSrc :: t (Term2 typeVar typeAnn patternAnn v a) -&gt; m Pretty
</span><a href="#local-6989586621681785845"><span class="hs-identifier hs-var hs-var">goSrc</span></a></span></span><span> </span><span id="local-6989586621681785844"><span class="annot"><span class="annottext">t (Term2 typeVar typeAnn patternAnn v a)
</span><a href="#local-6989586621681785844"><span class="hs-identifier hs-var">es</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">-- we ignore the annotations; but this could be extended later</span><span>
</span><span id="line-130"></span><span>    </span><span class="hs-comment">-- to do some ascii art rendering</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785843"><span class="annot"><span class="annottext">tys :: [Reference]
</span><a href="#local-6989586621681785843"><span class="hs-identifier hs-var hs-var">tys</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785842"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier hs-type">DD.TupleTerm'</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherLeft%27"><span class="hs-identifier hs-type">DD.EitherLeft'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621681785842"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785842"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span id="local-6989586621681785839"><span class="annot"><span class="annottext">Term2 typeVar typeAnn patternAnn v a
</span><a href="#local-6989586621681785839"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">t (Term2 typeVar typeAnn patternAnn v a)
-&gt; [Term2 typeVar typeAnn patternAnn v a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">t (Term2 typeVar typeAnn patternAnn v a)
</span><a href="#local-6989586621681785844"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-132"></span><span>        </span><span id="local-6989586621681785838"><span class="annot"><span class="annottext">toRef :: Term (F vt at ap) v a -&gt; Maybe Reference
</span><a href="#local-6989586621681785838"><span class="hs-identifier hs-var hs-var">toRef</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621681785836"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785836"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Maybe Reference
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785836"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><a href="#local-6989586621681785838"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.RequestOrCtor'</span></span><span> </span><span id="local-6989586621681785834"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785834"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Maybe Reference
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785834"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><a href="#local-6989586621681785838"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="annot"><span class="annottext">Term (F vt at ap) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Reference
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-135"></span><span>        </span><span id="local-6989586621681785833"><span class="annot"><span class="annottext">tms :: [Reference]
</span><a href="#local-6989586621681785833"><span class="hs-identifier hs-var hs-var">tms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785832"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Unison.Builtin.Decls.html#TupleTerm%27"><span class="hs-identifier hs-type">DD.TupleTerm'</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherRight%27"><span class="hs-identifier hs-type">DD.EitherRight'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term2 typeVar typeAnn patternAnn v a -&gt; Maybe Reference
forall vt at ap v a. Term (F vt at ap) v a -&gt; Maybe Reference
</span><a href="#local-6989586621681785838"><span class="hs-identifier hs-var">toRef</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785832"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785832"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span id="local-6989586621681785830"><span class="annot"><span class="annottext">Term2 typeVar typeAnn patternAnn v a
</span><a href="#local-6989586621681785830"><span class="hs-identifier hs-var">_anns</span></a></span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">t (Term2 typeVar typeAnn patternAnn v a)
-&gt; [Term2 typeVar typeAnn patternAnn v a]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">t (Term2 typeVar typeAnn patternAnn v a)
</span><a href="#local-6989586621681785844"><span class="hs-identifier hs-var">es</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-136"></span><span>    </span><span id="local-6989586621681785829"><span class="annot"><span class="annottext">Map Reference (DisplayObject () (Decl v ()))
</span><a href="#local-6989586621681785829"><span class="hs-identifier hs-var">typeMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-comment">-- todo: populate the variable names / kind once BuiltinObject supports that</span><span>
</span><span id="line-138"></span><span>      </span><span id="local-6989586621681785828"><span class="annot"><span class="annottext">go :: Reference -&gt; m (Reference, DisplayObject () (Decl v ()))
</span><a href="#local-6989586621681785828"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681785827"><span class="annot"><span class="annottext">ref :: Reference
</span><a href="#local-6989586621681785827"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Reference, DisplayObject () (Decl v ()))
-&gt; m (Reference, DisplayObject () (Decl v ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785827"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">() -&gt; DisplayObject () (Decl v ())
forall b a. b -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#BuiltinObject"><span class="hs-identifier hs-var">DO.BuiltinObject</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-139"></span><span>      </span><span class="annot"><a href="#local-6989586621681785828"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681785824"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785824"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785824"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DisplayObject () (Decl v ())
 -&gt; (Reference, DisplayObject () (Decl v ())))
-&gt; m (DisplayObject () (Decl v ()))
-&gt; m (Reference, DisplayObject () (Decl v ()))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-140"></span><span>        </span><span id="local-6989586621681785823"><span class="annot"><span class="annottext">Maybe (Decl v ())
</span><a href="#local-6989586621681785823"><span class="hs-identifier hs-var">decl</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785824"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785822"><span class="annot"><span class="annottext">missing :: DisplayObject b a
</span><a href="#local-6989586621681785822"><span class="hs-identifier hs-var hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortHash -&gt; DisplayObject b a
forall b a. ShortHash -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#MissingObject"><span class="hs-identifier hs-var">DO.MissingObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShortHash
</span><span class="hs-identifier hs-var">SH.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ShortHash) -&gt; Text -&gt; ShortHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Text
</span><span class="hs-identifier hs-var">Reference.toText</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785824"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">DisplayObject () (Decl v ()) -&gt; m (DisplayObject () (Decl v ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DisplayObject () (Decl v ()) -&gt; m (DisplayObject () (Decl v ())))
-&gt; DisplayObject () (Decl v ()) -&gt; m (DisplayObject () (Decl v ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject () (Decl v ())
-&gt; (Decl v () -&gt; DisplayObject () (Decl v ()))
-&gt; Maybe (Decl v ())
-&gt; DisplayObject () (Decl v ())
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject () (Decl v ())
forall b a. DisplayObject b a
</span><a href="#local-6989586621681785822"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">Decl v () -&gt; DisplayObject () (Decl v ())
forall b a. a -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#UserObject"><span class="hs-identifier hs-var">DO.UserObject</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Decl v ())
</span><a href="#local-6989586621681785823"><span class="hs-identifier hs-var">decl</span></a></span><span>
</span><span id="line-143"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[(Reference, DisplayObject () (Decl v ()))]
-&gt; Map Reference (DisplayObject () (Decl v ()))
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Reference, DisplayObject () (Decl v ()))]
 -&gt; Map Reference (DisplayObject () (Decl v ())))
-&gt; m [(Reference, DisplayObject () (Decl v ()))]
-&gt; m (Map Reference (DisplayObject () (Decl v ())))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Reference, DisplayObject () (Decl v ())))
-&gt; [Reference] -&gt; m [(Reference, DisplayObject () (Decl v ()))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Reference, DisplayObject () (Decl v ()))
</span><a href="#local-6989586621681785828"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Reference]
</span><a href="#local-6989586621681785843"><span class="hs-identifier hs-var">tys</span></a></span><span>
</span><span id="line-144"></span><span>    </span><span id="local-6989586621681785815"><span class="annot"><span class="annottext">Map Reference (DisplayObject (Type v ()) (Term v ()))
</span><a href="#local-6989586621681785815"><span class="hs-identifier hs-var">termMap</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-145"></span><span>      </span><span id="local-6989586621681785814"><span class="annot"><span class="annottext">go :: Reference -&gt; m (Reference, DisplayObject (Type v) (Term v ()))
</span><a href="#local-6989586621681785814"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681785813"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(DisplayObject (Type v) (Term v ())
 -&gt; (Reference, DisplayObject (Type v) (Term v ())))
-&gt; m (DisplayObject (Type v) (Term v ()))
-&gt; m (Reference, DisplayObject (Type v) (Term v ()))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type v) (Term v ())
-&gt; m (DisplayObject (Type v) (Term v ()))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(DisplayObject (Type v) (Term v ())
 -&gt; m (DisplayObject (Type v) (Term v ())))
-&gt; DisplayObject (Type v) (Term v ())
-&gt; m (DisplayObject (Type v) (Term v ()))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type v) (Term v ())
-&gt; (Type v -&gt; DisplayObject (Type v) (Term v ()))
-&gt; Reference
-&gt; DisplayObject (Type v) (Term v ())
forall v a. Var v =&gt; a -&gt; (Type v -&gt; a) -&gt; Reference -&gt; a
</span><a href="Unison.Builtin.html#typeOf"><span class="hs-identifier hs-var">Builtin.typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type v) (Term v ())
forall b a. DisplayObject b a
</span><a href="#local-6989586621681785811"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">Type v -&gt; DisplayObject (Type v) (Term v ())
forall b a. b -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#BuiltinObject"><span class="hs-identifier hs-var">DO.BuiltinObject</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-147"></span><span>        </span><span class="annot"><span class="annottext">Reference
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type v) (Term v ())
-&gt; (Term v () -&gt; DisplayObject (Type v) (Term v ()))
-&gt; Maybe (Term v ())
-&gt; DisplayObject (Type v) (Term v ())
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">DisplayObject (Type v) (Term v ())
forall b a. DisplayObject b a
</span><a href="#local-6989586621681785811"><span class="hs-identifier hs-var">missing</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; DisplayObject (Type v) (Term v ())
forall b a. a -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#UserObject"><span class="hs-identifier hs-var">DO.UserObject</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe (Term v ()) -&gt; DisplayObject (Type v) (Term v ()))
-&gt; m (Maybe (Term v ())) -&gt; m (DisplayObject (Type v) (Term v ()))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-148"></span><span>        </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>          </span><span id="local-6989586621681785811"><span class="annot"><span class="annottext">missing :: DisplayObject b a
</span><a href="#local-6989586621681785811"><span class="hs-identifier hs-var hs-var">missing</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ShortHash -&gt; DisplayObject b a
forall b a. ShortHash -&gt; DisplayObject b a
</span><a href="Unison.Codebase.Editor.DisplayObject.html#MissingObject"><span class="hs-identifier hs-var">DO.MissingObject</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; ShortHash
</span><span class="hs-identifier hs-var">SH.unsafeFromText</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; ShortHash) -&gt; Text -&gt; ShortHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Text
</span><span class="hs-identifier hs-var">Reference.toText</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785813"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[(Reference, DisplayObject (Type v ()) (Term v ()))]
-&gt; Map Reference (DisplayObject (Type v ()) (Term v ()))
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Reference, DisplayObject (Type v ()) (Term v ()))]
 -&gt; Map Reference (DisplayObject (Type v ()) (Term v ())))
-&gt; m [(Reference, DisplayObject (Type v ()) (Term v ()))]
-&gt; m (Map Reference (DisplayObject (Type v ()) (Term v ())))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Reference, DisplayObject (Type v ()) (Term v ())))
-&gt; [Reference]
-&gt; m [(Reference, DisplayObject (Type v ()) (Term v ()))]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Reference, DisplayObject (Type v ()) (Term v ()))
forall v.
Var v =&gt;
Reference -&gt; m (Reference, DisplayObject (Type v) (Term v ()))
</span><a href="#local-6989586621681785814"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Reference]
</span><a href="#local-6989586621681785833"><span class="hs-identifier hs-var">tms</span></a></span><span>
</span><span id="line-151"></span><span>    </span><span class="hs-comment">-- in docs, we use suffixed names everywhere</span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785810"><span class="annot"><span class="annottext">pped' :: PrettyPrintEnvDecl
</span><a href="#local-6989586621681785810"><span class="hs-identifier hs-var hs-var">pped'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">unsuffixifiedPPE :: PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#unsuffixifiedPPE"><span class="hs-identifier hs-var">PPE.unsuffixifiedPPE</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="hs-special">}</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; Map Reference (DisplayObject () (Decl v ()))
-&gt; Map Reference (DisplayObject (Type v ()) (Term v ()))
-&gt; Pretty
forall v a1.
(Var v, Ord a1) =&gt;
PrettyPrintEnvDecl
-&gt; Map Reference (DisplayObject () (Decl v a1))
-&gt; Map Reference (DisplayObject (Type v a1) (Term v a1))
-&gt; Pretty
</span><a href="Unison.CommandLine.OutputMessages.html#displayDefinitions%27"><span class="hs-identifier hs-var">OutputMessages.displayDefinitions'</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785810"><span class="hs-identifier hs-var">pped'</span></a></span><span> </span><span class="annot"><span class="annottext">Map Reference (DisplayObject () (Decl v ()))
</span><a href="#local-6989586621681785829"><span class="hs-identifier hs-var">typeMap</span></a></span><span> </span><span class="annot"><span class="annottext">Map Reference (DisplayObject (Type v ()) (Term v ()))
</span><a href="#local-6989586621681785815"><span class="hs-identifier hs-var">termMap</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621681785877"><span class="annot"><span class="annottext">goSpecial :: Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785877"><span class="hs-identifier hs-var hs-var">goSpecial</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormFoldedSource"><span class="hs-identifier hs-type">DD.Doc2SpecialFormFoldedSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621681785806"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785806"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Seq (Term v ()) -&gt; m Pretty
forall (t :: * -&gt; *) typeVar typeAnn patternAnn v a.
Foldable t =&gt;
t (Term2 typeVar typeAnn patternAnn v a) -&gt; m Pretty
</span><a href="#local-6989586621681785845"><span class="hs-identifier hs-var">goSrc</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785806"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-158"></span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-comment">-- Source [Either Link.Type Doc2.Term]</span><span>
</span><span id="line-160"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormSource"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621681785804"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785804"><span class="hs-identifier hs-var">es</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Seq (Term v ()) -&gt; m Pretty
forall (t :: * -&gt; *) typeVar typeAnn patternAnn v a.
Foldable t =&gt;
t (Term2 typeVar typeAnn patternAnn v a) -&gt; m Pretty
</span><a href="#local-6989586621681785845"><span class="hs-identifier hs-var">goSrc</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785804"><span class="hs-identifier hs-var">es</span></a></span><span>
</span><span id="line-161"></span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-comment">-- Example Nat Doc2.Term</span><span>
</span><span id="line-163"></span><span>    </span><span class="hs-comment">-- Examples like `foo x y` are encoded as `Example 2 (_ x y -&gt; foo)`, where</span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-comment">-- 2 is the number of variables that should be dropped from the rendering.</span><span>
</span><span id="line-165"></span><span>    </span><span class="hs-comment">-- So this will render as `foo x y`.</span><span>
</span><span id="line-166"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormExample"><span class="hs-identifier hs-type">DD.Doc2SpecialFormExample</span></a></span><span> </span><span id="local-6989586621681785802"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681785802"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Example"><span class="hs-identifier hs-type">DD.Doc2Example</span></a></span><span> </span><span id="local-6989586621681785800"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681785800"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681785799"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785799"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>      </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#backticked"><span class="hs-identifier hs-var">P.backticked</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785797"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681785797"><span class="annot"><span class="annottext">ex :: Term v ()
</span><a href="#local-6989586621681785797"><span class="hs-identifier hs-var hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; [v] -&gt; Term v () -&gt; Term v ()
forall v a vt at ap.
Ord v =&gt;
a -&gt; [v] -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.lam'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v () -&gt; ()
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">ABT.annotation</span></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785799"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorId -&gt; [v] -&gt; [v]
forall a. ConstructorId -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; ConstructorId
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681785802"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681785800"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785799"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormExampleBlock"><span class="hs-identifier hs-type">DD.Doc2SpecialFormExampleBlock</span></a></span><span> </span><span id="local-6989586621681785792"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681785792"><span class="hs-identifier hs-var">n</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Example"><span class="hs-identifier hs-type">DD.Doc2Example</span></a></span><span> </span><span id="local-6989586621681785791"><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681785791"><span class="hs-identifier hs-var">vs</span></a></span></span><span> </span><span id="local-6989586621681785790"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785790"><span class="hs-identifier hs-var">body</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-171"></span><span>      </span><span class="hs-comment">-- todo: maybe do something with `vs` to indicate the variables are free</span><span>
</span><span id="line-172"></span><span>      </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
ElideUnit
-&gt; PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm%27"><span class="hs-identifier hs-var">displayTerm'</span></a></span><span> </span><span class="annot"><span class="annottext">ElideUnit
</span><span class="hs-identifier hs-var">True</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785789"><span class="hs-identifier hs-var">ex</span></a></span><span>
</span><span id="line-173"></span><span>      </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681785789"><span class="annot"><span class="annottext">ex :: Term v ()
</span><a href="#local-6989586621681785789"><span class="hs-identifier hs-var hs-var">ex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">() -&gt; [v] -&gt; Term v () -&gt; Term v ()
forall v a vt at ap.
Ord v =&gt;
a -&gt; [v] -&gt; Term2 vt at ap v a -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.lam'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v () -&gt; ()
forall (f :: * -&gt; *) v a. Term f v a -&gt; a
</span><span class="hs-identifier hs-var hs-var">ABT.annotation</span></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785790"><span class="hs-identifier hs-var">body</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ConstructorId -&gt; [v] -&gt; [v]
forall a. ConstructorId -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">drop</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; ConstructorId
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621681785792"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[v]
</span><a href="#local-6989586621681785791"><span class="hs-identifier hs-var">vs</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785790"><span class="hs-identifier hs-var">body</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span>    </span><span class="hs-comment">-- Link (Either Link.Type Doc2.Term)</span><span>
</span><span id="line-176"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormLink"><span class="hs-identifier hs-type">DD.Doc2SpecialFormLink</span></a></span><span> </span><span id="local-6989586621681785787"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785787"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span>
</span><span id="line-177"></span><span>      </span><span id="local-6989586621681785786"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621681785786"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span>
</span><span id="line-178"></span><span>      </span><span id="local-6989586621681785785"><span class="annot"><span class="annottext">go :: HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621681785785"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty)
-&gt; (HashQualified Name -&gt; Pretty) -&gt; HashQualified Name -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#underline"><span class="hs-identifier hs-var">P.underline</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty)
-&gt; (HashQualified Name -&gt; Pretty) -&gt; HashQualified Name -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty)
-&gt; (HashQualified Name -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name
-&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#prettyHashQualified"><span class="hs-identifier hs-var">NP.prettyHashQualified</span></a></span><span>
</span><span id="line-179"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785787"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-180"></span><span>        </span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherLeft%27"><span class="hs-identifier hs-type">DD.EitherLeft'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621681785781"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785781"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621681785785"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; m Pretty) -&gt; HashQualified Name -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PPE.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785786"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785781"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-181"></span><span>        </span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherRight%27"><span class="hs-identifier hs-type">DD.EitherRight'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621681785779"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785779"><span class="hs-identifier hs-var">ref</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621681785785"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; m Pretty) -&gt; HashQualified Name -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785786"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785779"><span class="hs-identifier hs-var">ref</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>        </span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherRight%27"><span class="hs-identifier hs-type">DD.EitherRight'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Request'</span></span><span> </span><span id="local-6989586621681785775"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785775"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681785774"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785774"><span class="hs-identifier hs-var">cid</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-183"></span><span>          </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621681785785"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; m Pretty) -&gt; HashQualified Name -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785786"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; ConstructorId -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785775"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785774"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>        </span><span class="annot"><a href="Unison.Builtin.Decls.html#EitherRight%27"><span class="hs-identifier hs-type">DD.EitherRight'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span id="local-6989586621681785771"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785771"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span id="local-6989586621681785770"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785770"><span class="hs-identifier hs-var">cid</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-185"></span><span>          </span><span class="annot"><span class="annottext">HashQualified Name -&gt; m Pretty
</span><a href="#local-6989586621681785785"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">(HashQualified Name -&gt; m Pretty) -&gt; HashQualified Name -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785786"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; ConstructorId -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785771"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785770"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-186"></span><span>        </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#red"><span class="hs-identifier hs-var">P.red</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785787"><span class="hs-identifier hs-var">e</span></a></span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span>    </span><span class="hs-comment">-- Signature [Doc2.Term]</span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormSignature"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.List'</span></span><span> </span><span id="local-6989586621681785766"><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785766"><span class="hs-identifier hs-var">tms</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-190"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785765"><span class="annot"><span class="annottext">referents :: [Referent]
</span><a href="#local-6989586621681785765"><span class="hs-identifier hs-var hs-var">referents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785764"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v () -&gt; Maybe Referent
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621681785763"><span class="hs-identifier hs-var">toReferent</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785764"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785764"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Seq (Term v ()) -&gt; [Term v ()]
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; [a]
</span><span class="hs-identifier hs-var">toList</span></span><span> </span><span class="annot"><span class="annottext">Seq (Term v ())
</span><a href="#local-6989586621681785766"><span class="hs-identifier hs-var">tms</span></a></span><span> </span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>          </span><span id="local-6989586621681785762"><span class="annot"><span class="annottext">go :: Referent -&gt; m Pretty
</span><a href="#local-6989586621681785762"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621681785761"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785761"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621681785760"><span class="hs-identifier hs-var">goSignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785761"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-192"></span><span>      </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; ([Pretty] -&gt; Pretty) -&gt; [Pretty] -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; [Pretty] -&gt; Pretty
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
Pretty s -&gt; f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#sep"><span class="hs-identifier hs-var">P.sep</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">([Pretty] -&gt; Pretty) -&gt; m [Pretty] -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Referent -&gt; m Pretty) -&gt; [Referent] -&gt; m [Pretty]
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621681785762"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">[Referent]
</span><a href="#local-6989586621681785765"><span class="hs-identifier hs-var">referents</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span>    </span><span class="hs-comment">-- SignatureInline Doc2.Term</span><span>
</span><span id="line-195"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormSignatureInline"><span class="hs-identifier hs-type">DD.Doc2SpecialFormSignatureInline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span id="local-6989586621681785757"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785757"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#backticked"><span class="hs-identifier hs-var">P.backticked</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; Maybe Referent
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621681785763"><span class="hs-identifier hs-var">toReferent</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785757"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-196"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785756"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785756"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621681785760"><span class="hs-identifier hs-var">goSignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785756"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">Maybe Referent
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785757"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-198"></span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-comment">-- Eval Doc2.Term</span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormEval"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span id="local-6989586621681785754"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785754"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785754"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Term v ()))
-&gt; (Maybe (Term v ()) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-201"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-202"></span><span>        </span><span id="local-6989586621681785753"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785753"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785754"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty] -&gt; Pretty
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">P.lines</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785753"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#10728;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#red"><span class="hs-identifier hs-var">P.red</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#127384;  An error occured during evaluation&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-204"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785752"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785752"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-205"></span><span>        </span><span id="local-6989586621681785751"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785751"><span class="hs-identifier hs-var">p1</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785754"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-206"></span><span>        </span><span id="local-6989586621681785750"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785750"><span class="hs-identifier hs-var">p2</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785752"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">4</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pretty] -&gt; Pretty
forall (f :: * -&gt; *) s.
(Foldable f, IsString s) =&gt;
f (Pretty s) -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#lines"><span class="hs-identifier hs-var">P.lines</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785751"><span class="hs-identifier hs-var">p1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#10728;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#green"><span class="hs-identifier hs-var">P.green</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785750"><span class="hs-identifier hs-var">p2</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-comment">-- EvalInline Doc2.Term</span><span>
</span><span id="line-210"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormEvalInline"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEvalInline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2Term"><span class="hs-identifier hs-type">DD.Doc2Term</span></a></span><span> </span><span id="local-6989586621681785747"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785747"><span class="hs-identifier hs-var">tm</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785747"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Term v ()))
-&gt; (Maybe (Term v ()) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-211"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Term v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#backticked"><span class="hs-identifier hs-var">P.backticked</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#red"><span class="hs-identifier hs-var">P.red</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#127384;  An error occurred during evaluation&quot;</span></span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785746"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785746"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. IsString s =&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#backticked"><span class="hs-identifier hs-var">P.backticked</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785746"><span class="hs-identifier hs-var">result</span></a></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span>    </span><span class="hs-comment">-- Embed Any</span><span>
</span><span id="line-215"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormEmbed"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEmbed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.App'</span></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621681785743"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785743"><span class="hs-identifier hs-var">any</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-216"></span><span>      </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785743"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">m Pretty -&gt; (Pretty -&gt; Pretty) -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681785741"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785741"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>        </span><span class="annot"><span class="annottext">Width -&gt; Pretty -&gt; Pretty
forall s.
(ListLike s Char, IsString s) =&gt;
Width -&gt; Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#indentN"><span class="hs-identifier hs-var">P.indentN</span></a></span><span> </span><span class="annot"><span class="annottext">Width
</span><span class="hs-number">2</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;{{ embed {{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785741"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;}} }}&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;\n&quot;</span></span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">-- EmbedInline Any</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#Doc2SpecialFormEmbedInline"><span class="hs-identifier hs-type">DD.Doc2SpecialFormEmbedInline</span></a></span><span> </span><span id="local-6989586621681785739"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785739"><span class="hs-identifier hs-var">any</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-221"></span><span>      </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785739"><span class="hs-identifier hs-var">any</span></a></span><span> </span><span class="annot"><span class="annottext">m Pretty -&gt; (Pretty -&gt; Pretty) -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621681785738"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785738"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-222"></span><span>        </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;{{ embed {{&quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785738"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;}} }}&quot;</span></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span>    </span><span id="local-6989586621681785737"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785737"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#red"><span class="hs-identifier hs-var">P.red</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785737"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-225"></span><span>
</span><span id="line-226"></span><span>  </span><span id="local-6989586621681785763"><span class="annot"><span class="annottext">toReferent :: Term (F typeVar typeAnn patternAnn) v a -&gt; Maybe Referent
</span><a href="#local-6989586621681785763"><span class="hs-identifier hs-var hs-var">toReferent</span></a></span></span><span> </span><span id="local-6989586621681785736"><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621681785736"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621681785736"><span class="hs-identifier hs-var">tm</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Term.Ref'</span></span><span> </span><span id="local-6989586621681785735"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785735"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; Maybe Referent
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Ref</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785735"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Term.Constructor'</span></span><span> </span><span id="local-6989586621681785734"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785734"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681785733"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785733"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; Maybe Referent
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; ConstructorId -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785734"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785733"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Data</span></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Term.Request'</span></span><span> </span><span id="local-6989586621681785732"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785732"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span id="local-6989586621681785731"><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785731"><span class="hs-identifier hs-var">cid</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; Maybe Referent
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Reference -&gt; ConstructorId -&gt; ConstructorType -&gt; Referent
</span><span class="hs-identifier hs-var">Referent.Con</span></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785732"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><a href="#local-6989586621681785731"><span class="hs-identifier hs-var">cid</span></a></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier hs-var">CT.Effect</span></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Referent
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-231"></span><span>
</span><span id="line-232"></span><span>  </span><span id="local-6989586621681785760"><span class="annot"><span class="annottext">goSignature :: Referent -&gt; m Pretty
</span><a href="#local-6989586621681785760"><span class="hs-identifier hs-var hs-var">goSignature</span></a></span></span><span> </span><span id="local-6989586621681785730"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785730"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785730"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Type v ()))
-&gt; (Maybe (Type v ()) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-233"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Type v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785730"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785728"><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681785728"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; [(HashQualified Name, Type v ())] -&gt; Pretty
forall v a.
Var v =&gt;
PrettyPrintEnv -&gt; [(HashQualified Name, Type v a)] -&gt; Pretty
</span><a href="Unison.TypePrinter.html#prettySignatures"><span class="hs-identifier hs-var">TypePrinter.prettySignatures</span></a></span><span>
</span><span id="line-236"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785730"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681785728"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span>  </span><span id="local-6989586621681785726"><span class="annot"><span class="annottext">goColor :: Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621681785726"><span class="hs-identifier hs-var hs-var">goColor</span></a></span></span><span> </span><span id="local-6989586621681785725"><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621681785725"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="#local-6989586621681785725"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-240"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBlack"><span class="hs-identifier hs-var">DD.AnsiColorBlack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#black"><span class="hs-identifier hs-var">P.black</span></a></span><span>
</span><span id="line-241"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorRed"><span class="hs-identifier hs-var">DD.AnsiColorRed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#red"><span class="hs-identifier hs-var">P.red</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorGreen"><span class="hs-identifier hs-var">DD.AnsiColorGreen</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#green"><span class="hs-identifier hs-var">P.green</span></a></span><span>
</span><span id="line-243"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorYellow"><span class="hs-identifier hs-var">DD.AnsiColorYellow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#yellow"><span class="hs-identifier hs-var">P.yellow</span></a></span><span>
</span><span id="line-244"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBlue"><span class="hs-identifier hs-var">DD.AnsiColorBlue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#blue"><span class="hs-identifier hs-var">P.blue</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorMagenta"><span class="hs-identifier hs-var">DD.AnsiColorMagenta</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#purple"><span class="hs-identifier hs-var">P.purple</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorCyan"><span class="hs-identifier hs-var">DD.AnsiColorCyan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#cyan"><span class="hs-identifier hs-var">P.cyan</span></a></span><span>
</span><span id="line-247"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorWhite"><span class="hs-identifier hs-var">DD.AnsiColorWhite</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#white"><span class="hs-identifier hs-var">P.white</span></a></span><span>
</span><span id="line-248"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightBlack"><span class="hs-identifier hs-var">DD.AnsiColorBrightBlack</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiBlack"><span class="hs-identifier hs-var">P.hiBlack</span></a></span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightRed"><span class="hs-identifier hs-var">DD.AnsiColorBrightRed</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiRed"><span class="hs-identifier hs-var">P.hiRed</span></a></span><span>
</span><span id="line-250"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightGreen"><span class="hs-identifier hs-var">DD.AnsiColorBrightGreen</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiGreen"><span class="hs-identifier hs-var">P.hiGreen</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightYellow"><span class="hs-identifier hs-var">DD.AnsiColorBrightYellow</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiYellow"><span class="hs-identifier hs-var">P.hiYellow</span></a></span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightBlue"><span class="hs-identifier hs-var">DD.AnsiColorBrightBlue</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiBlue"><span class="hs-identifier hs-var">P.hiBlue</span></a></span><span>
</span><span id="line-253"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightMagenta"><span class="hs-identifier hs-var">DD.AnsiColorBrightMagenta</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiPurple"><span class="hs-identifier hs-var">P.hiPurple</span></a></span><span>
</span><span id="line-254"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightCyan"><span class="hs-identifier hs-var">DD.AnsiColorBrightCyan</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiCyan"><span class="hs-identifier hs-var">P.hiCyan</span></a></span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><a href="Unison.Runtime.IOSource.html#AnsiColorBrightWhite"><span class="hs-identifier hs-var">DD.AnsiColorBrightWhite</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#hiWhite"><span class="hs-identifier hs-var">P.hiWhite</span></a></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="annottext">Term (F typeVar typeAnn patternAnn) v a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621681785874"><span class="annot"><span class="annottext">goConsole :: Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var hs-var">goConsole</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextPlain"><span class="hs-identifier hs-type">DD.ConsoleTextPlain</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.Text'</span></span><span> </span><span id="local-6989586621681785691"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785691"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">P.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785691"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextForeground"><span class="hs-identifier hs-type">DD.ConsoleTextForeground</span></a></span><span> </span><span id="local-6989586621681785688"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785688"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span id="local-6989586621681785687"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785687"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; Pretty -&gt; Pretty
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621681785726"><span class="hs-identifier hs-var">goColor</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785688"><span class="hs-identifier hs-var">color</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785687"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextBackground"><span class="hs-identifier hs-type">DD.ConsoleTextBackground</span></a></span><span> </span><span id="local-6989586621681785685"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785685"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span id="local-6989586621681785684"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785684"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-262"></span><span>      </span><span id="local-6989586621681785683"><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785683"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785684"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-263"></span><span>      </span><span id="local-6989586621681785682"><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="#local-6989586621681785682"><span class="hs-identifier hs-var">color</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m (Pretty -&gt; Pretty)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">((Pretty -&gt; Pretty) -&gt; m (Pretty -&gt; Pretty))
-&gt; (Pretty -&gt; Pretty) -&gt; m (Pretty -&gt; Pretty)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; Pretty -&gt; Pretty
forall typeVar typeAnn patternAnn v a.
Term (F typeVar typeAnn patternAnn) v a -&gt; Pretty -&gt; Pretty
</span><a href="#local-6989586621681785726"><span class="hs-identifier hs-var">goColor</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785685"><span class="hs-identifier hs-var">color</span></a></span><span>
</span><span id="line-264"></span><span>      </span><span class="hs-identifier">pure</span><span> </span><span class="hs-operator">$</span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#background"><span class="hs-identifier hs-var">P.background</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="#local-6989586621681785682"><span class="hs-identifier hs-var">color</span></a></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><a href="#local-6989586621681785683"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextBold"><span class="hs-identifier hs-type">DD.ConsoleTextBold</span></a></span><span> </span><span id="local-6989586621681785679"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785679"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#bold"><span class="hs-identifier hs-var">P.bold</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785679"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-266"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextUnderline"><span class="hs-identifier hs-type">DD.ConsoleTextUnderline</span></a></span><span> </span><span id="local-6989586621681785676"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785676"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#underline"><span class="hs-identifier hs-var">P.underline</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785676"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-267"></span><span>    </span><span class="annot"><a href="Unison.Runtime.IOSource.html#ConsoleTextInvert"><span class="hs-identifier hs-type">DD.ConsoleTextInvert</span></a></span><span> </span><span id="local-6989586621681785674"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785674"><span class="hs-identifier hs-var">txt</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#invert"><span class="hs-identifier hs-var">P.invert</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; Pretty) -&gt; m Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
</span><a href="#local-6989586621681785874"><span class="hs-identifier hs-var">goConsole</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785674"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-268"></span><span>    </span><span id="local-6989586621681785672"><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785672"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
forall v (m :: * -&gt; *).
(Var v, Monad m) =&gt;
PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayTerm"><span class="hs-identifier hs-var">displayTerm</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785892"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785891"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785890"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785889"><span class="hs-identifier hs-var">eval</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785888"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Term v ()
</span><a href="#local-6989586621681785672"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="hs-comment">-- pattern DocBlob txt &lt;- Term.App' (Term.Constructor' DocRef DocBlobId) (Term.Text' txt)</span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-type">displayDoc</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621681786087"><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span></span><span> </span><span id="local-6989586621681786086"><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Var</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>           </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnvDecl.html#PrettyPrintEnvDecl"><span class="hs-identifier hs-type">PPE.PrettyPrintEnvDecl</span></a></span><span>
</span><span id="line-274"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-275"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DD.Decl</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Term</span></span><span> </span><span class="annot"><a href="#local-6989586621681786087"><span class="hs-identifier hs-type">v</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621681786086"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-280"></span><span id="displayDoc"><span class="annot"><span class="annottext">displayDoc :: PrettyPrintEnvDecl
-&gt; (Reference -&gt; m (Maybe (Term v ())))
-&gt; (Referent -&gt; m (Maybe (Type v ())))
-&gt; (Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; m (Maybe (Decl v ())))
-&gt; Term v ()
-&gt; m Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#displayDoc"><span class="hs-identifier hs-var hs-var">displayDoc</span></a></span></span><span> </span><span id="local-6989586621681785671"><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span></span><span> </span><span id="local-6989586621681785670"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785670"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621681785669"><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785669"><span class="hs-identifier hs-var">typeOf</span></a></span></span><span> </span><span id="local-6989586621681785668"><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785668"><span class="hs-identifier hs-var">evaluated</span></a></span></span><span> </span><span id="local-6989586621681785667"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785667"><span class="hs-identifier hs-var">types</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Term v () -&gt; m Pretty
forall v a. Var v =&gt; Term (F v a a) v a -&gt; m Pretty
</span><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-282"></span><span>  </span><span id="local-6989586621681785666"><span class="annot"><span class="annottext">go :: Term (F v a a) v a -&gt; m Pretty
</span><a href="#local-6989586621681785666"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocJoin"><span class="hs-identifier hs-type">DD.DocJoin</span></a></span><span> </span><span id="local-6989586621681785664"><span class="annot"><span class="annottext">Seq (Term (F v a a) v a)
</span><a href="#local-6989586621681785664"><span class="hs-identifier hs-var">docs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Seq Pretty -&gt; Pretty
forall (t :: * -&gt; *) m. (Foldable t, Monoid m) =&gt; t m -&gt; m
</span><span class="hs-identifier hs-var">fold</span></span><span> </span><span class="annot"><span class="annottext">(Seq Pretty -&gt; Pretty) -&gt; m (Seq Pretty) -&gt; m Pretty
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(Term (F v a a) v a -&gt; m Pretty)
-&gt; Seq (Term (F v a a) v a) -&gt; m (Seq Pretty)
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Traversable t, Applicative f) =&gt;
(a -&gt; f b) -&gt; t a -&gt; f (t b)
</span><span class="hs-identifier hs-var">traverse</span></span><span> </span><span class="annot"><span class="annottext">Term (F v a a) v a -&gt; m Pretty
</span><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="annot"><span class="annottext">Seq (Term (F v a a) v a)
</span><a href="#local-6989586621681785664"><span class="hs-identifier hs-var">docs</span></a></span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocBlob"><span class="hs-identifier hs-type">DD.DocBlob</span></a></span><span> </span><span id="local-6989586621681785661"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785661"><span class="hs-identifier hs-var">txt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty
forall s. (ListLike s Char, IsString s) =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#paragraphyText"><span class="hs-identifier hs-var">P.paragraphyText</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785661"><span class="hs-identifier hs-var">txt</span></a></span><span>
</span><span id="line-284"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621681785656"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785656"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#underline"><span class="hs-identifier hs-var">P.underline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785656"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocLink"><span class="hs-identifier hs-type">DD.DocLink</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621681785654"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785654"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#underline"><span class="hs-identifier hs-var">P.underline</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785654"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-288"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkTerm"><span class="hs-identifier hs-type">DD.LinkTerm</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621681785651"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785651"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
forall v at ap a.
Var v =&gt;
(Reference -&gt; m (Maybe (Term2 v at ap v a)))
-&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621681785650"><span class="hs-identifier hs-var">prettyTerm</span></a></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785670"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785651"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-289"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSource"><span class="hs-identifier hs-type">DD.DocSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#LinkType"><span class="hs-identifier hs-type">DD.LinkType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TypeLink'</span></span><span> </span><span id="local-6989586621681785649"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785649"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m Pretty
</span><a href="#local-6989586621681785648"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785649"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-290"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocSignature"><span class="hs-identifier hs-type">DD.DocSignature</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621681785646"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785646"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621681785645"><span class="hs-identifier hs-var">prettySignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785646"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-291"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Unison.Builtin.Decls.html#DocEvaluate"><span class="hs-identifier hs-type">DD.DocEvaluate</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Term.TermLink'</span></span><span> </span><span id="local-6989586621681785643"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785643"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Reference -&gt; m (Maybe (Term v ()))) -&gt; Referent -&gt; m Pretty
forall (f :: * -&gt; *) v a.
(Monad f, Var v) =&gt;
(Reference -&gt; f (Maybe (Term v a))) -&gt; Referent -&gt; f Pretty
</span><a href="#local-6989586621681785642"><span class="hs-identifier hs-var">prettyEval</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Term v () -&gt; m (Maybe (Term v ()))
</span><a href="#local-6989586621681785668"><span class="hs-identifier hs-var">evaluated</span></a></span><span> </span><span class="annot"><span class="annottext">(Term v () -&gt; m (Maybe (Term v ())))
-&gt; (Reference -&gt; Term v ()) -&gt; Reference -&gt; m (Maybe (Term v ()))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">() -&gt; Reference -&gt; Term v ()
forall v a vt at ap. Ord v =&gt; a -&gt; Reference -&gt; Term2 vt at ap v a
</span><span class="hs-identifier hs-var">Term.ref</span></span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785643"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-292"></span><span>  </span><span class="annot"><a href="#local-6989586621681785666"><span class="hs-identifier hs-var">go</span></a></span><span> </span><span id="local-6989586621681785641"><span class="annot"><span class="annottext">Term (F v a a) v a
</span><a href="#local-6989586621681785641"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term (F v a a) v a -&gt; Pretty
forall v a. Var v =&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><a href="Unison.TermPrinter.html#pretty"><span class="hs-identifier hs-var">TP.pretty</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term (F v a a) v a
</span><a href="#local-6989586621681785641"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-293"></span><span>  </span><span id="local-6989586621681785645"><span class="annot"><span class="annottext">prettySignature :: Referent -&gt; m Pretty
</span><a href="#local-6989586621681785645"><span class="hs-identifier hs-var hs-var">prettySignature</span></a></span></span><span> </span><span id="local-6989586621681785639"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785639"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m (Maybe (Type v ()))
</span><a href="#local-6989586621681785669"><span class="hs-identifier hs-var">typeOf</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785639"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Type v ()))
-&gt; (Maybe (Type v ()) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Type v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#unsuffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.unsuffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785639"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785638"><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681785638"><span class="hs-identifier hs-var">typ</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; (Pretty -&gt; Pretty) -&gt; Pretty -&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-296"></span><span>      </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; [(HashQualified Name, Type v ())] -&gt; Pretty
forall v a.
Var v =&gt;
PrettyPrintEnv -&gt; [(HashQualified Name, Type v a)] -&gt; Pretty
</span><a href="Unison.TypePrinter.html#prettySignatures"><span class="hs-identifier hs-var">TypePrinter.prettySignatures</span></a></span><span>
</span><span id="line-297"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#suffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.suffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-298"></span><span>        </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnvDecl.html#unsuffixifiedPPE"><span class="hs-identifier hs-var hs-var">PPE.unsuffixifiedPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785639"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Type v ()
</span><a href="#local-6989586621681785638"><span class="hs-identifier hs-var">typ</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-299"></span><span>  </span><span id="local-6989586621681785642"><span class="annot"><span class="annottext">prettyEval :: (Reference -&gt; f (Maybe (Term v a))) -&gt; Referent -&gt; f Pretty
</span><a href="#local-6989586621681785642"><span class="hs-identifier hs-var hs-var">prettyEval</span></a></span></span><span> </span><span id="local-6989586621681785637"><span class="annot"><span class="annottext">Reference -&gt; f (Maybe (Term v a))
</span><a href="#local-6989586621681785637"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621681785636"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785636"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785636"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-300"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span id="local-6989586621681785635"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785635"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; f Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; f Pretty)
-&gt; (Pretty (SyntaxText' Any) -&gt; Pretty)
-&gt; Pretty (SyntaxText' Any)
-&gt; f Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Any) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Any) -&gt; f Pretty)
-&gt; Pretty (SyntaxText' Any) -&gt; f Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Pretty (SyntaxText' Any)
forall s. IsString s =&gt; Text -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#text"><span class="hs-identifier hs-var">P.text</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621681785635"><span class="hs-identifier hs-var">n</span></a></span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span id="local-6989586621681785634"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785634"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-302"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785633"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621681785633"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnv.Util.html#declarationPPE"><span class="hs-identifier hs-var">PPE.declarationPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785634"><span class="hs-identifier hs-var">ref</span></a></span><span>
</span><span id="line-303"></span><span>      </span><span class="hs-keyword">in</span><span>  </span><span class="annot"><span class="annottext">Reference -&gt; f (Maybe (Term v a))
</span><a href="#local-6989586621681785637"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785634"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">f (Maybe (Term v a)) -&gt; (Maybe (Term v a) -&gt; f Pretty) -&gt; f Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-304"></span><span>            </span><span class="annot"><span class="annottext">Maybe (Term v a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; f Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; f Pretty) -&gt; Pretty -&gt; f Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing term source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785633"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785636"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-305"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785631"><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785631"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; f Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; f Pretty) -&gt; Pretty -&gt; f Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Term v a -&gt; Pretty
forall v a. Var v =&gt; PrettyPrintEnv -&gt; Term v a -&gt; Pretty
</span><a href="Unison.TermPrinter.html#pretty"><span class="hs-identifier hs-var">TP.pretty</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785633"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Term v a
</span><a href="#local-6989586621681785631"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-306"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Con</span></span><span> </span><span id="local-6989586621681785630"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785630"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; f Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; f Pretty) -&gt; Pretty -&gt; f Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnv.Util.html#declarationPPE"><span class="hs-identifier hs-var">PPE.declarationPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785630"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785630"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-307"></span><span>  </span><span id="local-6989586621681785650"><span class="annot"><span class="annottext">prettyTerm :: (Reference -&gt; m (Maybe (Term2 v at ap v a)))
-&gt; Referent -&gt; m Pretty
</span><a href="#local-6989586621681785650"><span class="hs-identifier hs-var hs-var">prettyTerm</span></a></span></span><span> </span><span id="local-6989586621681785629"><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term2 v at ap v a))
</span><a href="#local-6989586621681785629"><span class="hs-identifier hs-var">terms</span></a></span></span><span> </span><span id="local-6989586621681785628"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785628"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785628"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-308"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Reference.Builtin</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Referent -&gt; m Pretty
</span><a href="#local-6989586621681785645"><span class="hs-identifier hs-var">prettySignature</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785628"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-309"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Ref</span></span><span> </span><span id="local-6989586621681785627"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785627"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785626"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621681785626"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnv.Util.html#declarationPPE"><span class="hs-identifier hs-var">PPE.declarationPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785627"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Term2 v at ap v a))
</span><a href="#local-6989586621681785629"><span class="hs-identifier hs-var">terms</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785627"><span class="hs-identifier hs-var">ref</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Term2 v at ap v a))
-&gt; (Maybe (Term2 v at ap v a) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-310"></span><span>      </span><span class="annot"><span class="annottext">Maybe (Term2 v at ap v a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing term source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var">termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785626"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785628"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-311"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785625"><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681785625"><span class="hs-identifier hs-var">tm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty)
-&gt; (Pretty (SyntaxText' Reference) -&gt; Pretty)
-&gt; Pretty (SyntaxText' Reference)
-&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; m Pretty)
-&gt; Pretty (SyntaxText' Reference) -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
forall v at ap a.
Var v =&gt;
PrettyPrintEnv
-&gt; HashQualified Name
-&gt; Term2 v at ap v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.TermPrinter.html#prettyBinding"><span class="hs-identifier hs-var">TP.prettyBinding</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785626"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785626"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785628"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Term2 v at ap v a
</span><a href="#local-6989586621681785625"><span class="hs-identifier hs-var">tm</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Referent.Con</span></span><span> </span><span id="local-6989586621681785623"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785623"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="annot"><span class="annottext">ConstructorId
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ConstructorType
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m Pretty
</span><a href="#local-6989586621681785648"><span class="hs-identifier hs-var">prettyType</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785623"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-313"></span><span>  </span><span id="local-6989586621681785648"><span class="annot"><span class="annottext">prettyType :: Reference -&gt; m Pretty
</span><a href="#local-6989586621681785648"><span class="hs-identifier hs-var hs-var">prettyType</span></a></span></span><span> </span><span id="local-6989586621681785622"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621681785621"><span class="annot"><span class="annottext">ppe :: PrettyPrintEnv
</span><a href="#local-6989586621681785621"><span class="hs-identifier hs-var hs-var">ppe</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl -&gt; Reference -&gt; PrettyPrintEnv
</span><a href="Unison.PrettyPrintEnv.Util.html#declarationPPE"><span class="hs-identifier hs-var">PPE.declarationPPE</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">Reference -&gt; m (Maybe (Decl v ()))
</span><a href="#local-6989586621681785667"><span class="hs-identifier hs-var">types</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="annot"><span class="annottext">m (Maybe (Decl v ()))
-&gt; (Maybe (Decl v ()) -&gt; m Pretty) -&gt; m Pretty
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="annottext">Maybe (Decl v ())
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty) -&gt; Pretty -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty
</span><span class="hs-string">&quot;&#128566;  Missing type source for: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; Pretty -&gt; Pretty
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var">typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785621"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621681785620"><span class="annot"><span class="annottext">Decl v ()
</span><a href="#local-6989586621681785620"><span class="hs-identifier hs-var">ty</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Pretty -&gt; m Pretty
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(Pretty -&gt; m Pretty)
-&gt; (Pretty (SyntaxText' Reference) -&gt; Pretty)
-&gt; Pretty (SyntaxText' Reference)
-&gt; m Pretty
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; m Pretty)
-&gt; Pretty (SyntaxText' Reference) -&gt; m Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall s. Pretty s -&gt; Pretty s
</span><a href="Unison.Util.Pretty.html#group"><span class="hs-identifier hs-var">P.group</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
-&gt; Reference
-&gt; HashQualified Name
-&gt; Decl v ()
-&gt; Pretty (SyntaxText' Reference)
forall v a.
Var v =&gt;
PrettyPrintEnvDecl
-&gt; Reference
-&gt; HashQualified Name
-&gt; Decl v a
-&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.DeclPrinter.html#prettyDecl"><span class="hs-identifier hs-var">DP.prettyDecl</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnvDecl
</span><a href="#local-6989586621681785671"><span class="hs-identifier hs-var">pped</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PPE.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785621"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785622"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Decl v ()
</span><a href="#local-6989586621681785620"><span class="hs-identifier hs-var">ty</span></a></span><span>
</span><span id="line-316"></span><span>
</span><span id="line-317"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-type">termName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PPE.PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Referent</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-318"></span><span id="termName"><span class="annot"><span class="annottext">termName :: PrettyPrintEnv -&gt; Referent -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#termName"><span class="hs-identifier hs-var hs-var">termName</span></a></span></span><span> </span><span id="local-6989586621681785618"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785618"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621681785617"><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785617"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-319"></span><span>  </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">NP.styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.NamePrinter.html#fmt"><span class="hs-identifier hs-var">NP.fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Referent -&gt; Element Reference
forall r. Referent' r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#Referent"><span class="hs-identifier hs-var">S.Referent</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785617"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681785613"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-320"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681785613"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681785613"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Referent -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#termName"><span class="hs-identifier hs-var">PPE.termName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785618"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Referent
</span><a href="#local-6989586621681785617"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-type">typeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Unison.PrettyPrintEnv.html#PrettyPrintEnv"><span class="hs-identifier hs-type">PPE.PrettyPrintEnv</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Reference</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Unison.CommandLine.DisplayValues.html#Pretty"><span class="hs-identifier hs-type">Pretty</span></a></span><span>
</span><span id="line-323"></span><span id="typeName"><span class="annot"><span class="annottext">typeName :: PrettyPrintEnv -&gt; Reference -&gt; Pretty
</span><a href="Unison.CommandLine.DisplayValues.html#typeName"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span id="local-6989586621681785612"><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785612"><span class="hs-identifier hs-var">ppe</span></a></span></span><span> </span><span id="local-6989586621681785611"><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785611"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Pretty (SyntaxText' Reference) -&gt; Pretty
forall r. Pretty (SyntaxText' r) -&gt; Pretty
</span><a href="Unison.Util.Pretty.html#syntaxToColor"><span class="hs-identifier hs-var">P.syntaxToColor</span></a></span><span> </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty)
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">(Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference))
-&gt; HashQualified Name -&gt; Pretty (SyntaxText' Reference)
</span><a href="Unison.NamePrinter.html#styleHashQualified%27%27"><span class="hs-identifier hs-var">NP.styleHashQualified''</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Element Reference
-&gt; Pretty (SyntaxText' Reference) -&gt; Pretty (SyntaxText' Reference)
forall r.
Element r -&gt; Pretty (SyntaxText' r) -&gt; Pretty (SyntaxText' r)
</span><a href="Unison.NamePrinter.html#fmt"><span class="hs-identifier hs-var">NP.fmt</span></a></span><span> </span><span class="annot"><span class="annottext">(Element Reference
 -&gt; Pretty (SyntaxText' Reference)
 -&gt; Pretty (SyntaxText' Reference))
-&gt; Element Reference
-&gt; Pretty (SyntaxText' Reference)
-&gt; Pretty (SyntaxText' Reference)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Reference -&gt; Element Reference
forall r. r -&gt; Element r
</span><a href="Unison.Util.SyntaxText.html#Reference"><span class="hs-identifier hs-var">S.Reference</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785611"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">HashQualified Name
</span><a href="#local-6989586621681785609"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="hs-keyword">where</span><span> </span><span id="local-6989586621681785609"><span class="annot"><span class="annottext">name :: HashQualified Name
</span><a href="#local-6989586621681785609"><span class="hs-identifier hs-var hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv -&gt; Reference -&gt; HashQualified Name
</span><a href="Unison.PrettyPrintEnv.html#typeName"><span class="hs-identifier hs-var">PPE.typeName</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyPrintEnv
</span><a href="#local-6989586621681785612"><span class="hs-identifier hs-var">ppe</span></a></span><span> </span><span class="annot"><span class="annottext">Reference
</span><a href="#local-6989586621681785611"><span class="hs-identifier hs-var">r</span></a></span><span>
</span><span id="line-326"></span></pre></body></html>